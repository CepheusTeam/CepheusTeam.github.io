<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Cepheusç¿»è¯‘ç»„</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://CepheusTeam.github.io/"/>
  <updated>2017-05-13T16:08:14.000Z</updated>
  <id>https://CepheusTeam.github.io/</id>
  
  <author>
    <name>CepheusSun</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Introduction to Protocol Oriented Programming in Swift</title>
    <link href="https://CepheusTeam.github.io/2017/05/14/Introduction%20to%20Protocol%20Oriented%20Programming%20in%20Swift/"/>
    <id>https://CepheusTeam.github.io/2017/05/14/Introduction to Protocol Oriented Programming in Swift/</id>
    <published>2017-05-13T16:05:23.000Z</published>
    <updated>2017-05-13T16:08:14.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>OOP is okay, but couldâ€™ve been better</p>
</blockquote>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>å³ä½¿ä½ è¿˜ä¸çŸ¥é“ Class å’Œ Struct åŸºæœ¬çš„åŒºåˆ«, ä½ ä¹Ÿå¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ã€‚éƒ½çŸ¥é“ Struct ä¸èƒ½ç»§æ‰¿, ä½†æ˜¯, ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¦‚æœä½ è¿˜ä¸çŸ¥é“ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ, èŠ±ä¸¤åˆ†é’Ÿæ—¶é—´è¯»ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ã€‚è¿™äº›ä»£ç æ˜¯å†™åœ¨ playground ä¸Šçš„</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HumanClass</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> classHuman = <span class="type">HumanClass</span>(name: <span class="string">"Bob"</span>)</div><div class="line"><span class="comment">// "Bob"</span></div><div class="line">classHuman.name</div><div class="line"><span class="comment">// Created a "copied" object</span></div><div class="line"><span class="keyword">var</span> newClassHuman = classHuman</div><div class="line">newClassHuman.name = <span class="string">"Bobby"</span></div><div class="line">classHuman.name <span class="comment">//"Bobby"</span></div></pre></td></tr></table></figure>
<p>ç­‰æˆ‘ä»¬æ”¹å˜ <code>newClassHuman</code> çš„ <code>name</code> å±æ€§ä¸º <code>â€œBobbyâ€</code> ä¹‹å, <code>classHuman</code> çš„ <code>name</code> å±æ€§ä¹Ÿå˜æˆ <code>â€œBobbyâ€</code> äº†ã€‚</p>
<p>æˆ‘ä»¬å†çœ‹çœ‹ Struct </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">HumanStruct</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> humanStruct = <span class="type">HumanStruct</span>(name: <span class="string">"Bob"</span>)</div><div class="line"><span class="keyword">var</span> newHumanStruct = humanStruct</div><div class="line">newHumanStruct.name = <span class="string">"Bobby"</span></div><div class="line">humanStruct.name  <span class="comment">// "Bobby"</span></div></pre></td></tr></table></figure>
<p>çœ‹å‡ºæ¥åŒºåˆ«äº†å—ï¼Ÿ æ”¹å˜å¤åˆ¶å‡ºæ¥çš„ <code>newHumanStruct</code> çš„ <code>name</code> å±æ€§æ¯”å‘¢æ²¡æœ‰æ”¹å˜åŸå§‹çš„ <code>humanStruct</code> çš„ <code>name</code> å±æ€§ã€‚</p>
<p>å¯¹äº Class æ¥è¯´, è¿™æ ·çš„å¤åˆ¶å‡ºæ¥çš„å¯¹è±¡, å’ŒåŸæ¥çš„å¯¹è±¡éƒ½æŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ã€‚å¯¹ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜, éƒ½ä¼šæ”¹å˜å…¶ä»–çš„å¯¹è±¡(å¼•ç”¨ç±»å‹)ã€‚ å¯¹äº Struct æ¥è¯´, åœ¨ä¼ é€’å’Œèµ‹å€¼çš„æ—¶å€™ä¼šåˆ›é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡(å€¼ç±»å‹)</p>
<p><a href="https://www.youtube.com/watch?v=MNnfUwzJ4ig" target="_blank" rel="external">è¿™é‡Œæœ‰ä¸€ä¸ªä»‹ç»è¿™ä¸ªæ¦‚å¿µçš„è§†é¢‘</a></p>
<h3 id="Bye-OOP"><a href="#Bye-OOP" class="headerlink" title="Bye OOP"></a>Bye OOP</h3><p>ä½ å¯èƒ½ä¼šæ¯”è¾ƒå¥½å¥‡ä¸ºä»€ä¹ˆæˆ‘è®²äº†åŠå¤©è·Ÿé¢å‘åè®®ç¼–ç¨‹æ²¡å…³ç³»çš„ä¸œè¥¿ã€‚åœ¨æˆ‘å¼€å§‹å°† POP å¯¹æ¯” OOP çš„ä¼˜åŠ¿ä¹‹å‰ï¼Œ ä½ å¾—ç†è§£å¼•ç”¨ç±»å‹å’Œå€¼ç±»å‹çš„åŒºåˆ«ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€äº›æ¯‹åº¸ç½®ç–‘çš„ OOP çš„ä¼˜åŠ¿, ä¹Ÿæ˜¯åŠ£åŠ¿ã€‚</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå­ç±», è¿™ä¸ªå­ç±»ä¼šç»§æ‰¿ä¸€äº›å¹¶ä¸éœ€è¦çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™ä¼šè®©è¿™ä¸ªå­ç±»å˜çš„è‡ƒè‚¿ã€‚</li>
<li>å½“ä½ æœ‰å¾ˆå¤šçš„ç»§æ‰¿å…³ç³»çš„æ—¶å€™, æ‰¾åˆ°å„ä¸ªç±»ä¹‹é—´çš„å…³ç³», å°±å˜çš„æ¯”è¾ƒå›°éš¾äº†ã€‚</li>
<li>å½“å¯¹è±¡æŒ‡å‘çš„å†…å­˜ä¸­çš„åŒä¸€å—åœ°å€çš„æ—¶å€™, å¦‚æœå¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œäº†ä¿®æ”¹, æ‰€æœ‰çš„éƒ½ä¼šå˜ã€‚</li>
</ol>
<p>é¡ºä¾¿çœ‹ä¸€ä¸‹ UIKit ä¸­çš„ OOP å§</p>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*hjEXB3PGUOSbxet0qUJRNA.png" alt=""><br>2015 WWDC_Hideous Structure<br></center>

<p>å¦‚æœä½ æ˜¯åˆšè¿›è‹¹æœçš„å·¥ç¨‹å¸ˆ, ä½ èƒ½å¤Ÿæå®šè¿™äº›ä¸œè¥¿å—ï¼Ÿæˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™æ€»è§‰çš„ä¼šæ¯”è¾ƒæ··ä¹±ã€‚</p>
<p>æœ‰äººè¯´ OOP æ˜¯ä¸€ä¸ªè®©ä½ çš„ä»£ç å˜çš„æƒ³æ„å¤§åˆ©é¢é‚£æ ·ä¹±çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚å¦‚æœä½ æƒ³è¦æ›´å¤šåæ§½ OOP çš„å†…å®¹. <a href="https://content.pivotal.io/blog/all-evidence-points-to-oop-being-bullshit" target="_blank" rel="external">è¿™å„¿</a><a href="https://krakendev.io/blog/subclassing-can-suck-and-heres-why" target="_blank" rel="external">è¿™å„¿</a><a href="http://www.smashcompany.com/technology/object-oriented-programming-is-an-expensive-disaster-which-must-end" target="_blank" rel="external">è¿™å„¿</a><a href="https://www.leaseweb.com/labs/2015/08/object-oriented-programming-is-exceptionally-bad/" target="_blank" rel="external">è¿˜æœ‰è¿™å„¿</a></p>
<h3 id="Welcome-POP"><a href="#Welcome-POP" class="headerlink" title="Welcome POP"></a>Welcome POP</h3><p>ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†, POP çš„åŸºç¡€ä¸æ˜¯ç±», è€Œæ˜¯å€¼ç±»å‹å˜é‡ã€‚æ²¡æœ‰å¼•ç”¨ï¼Œä¸åƒåˆšåˆšçœ‹åˆ°çš„é‡‘å­—å¡”ç»“æ„ã€‚ POP å–œæ¬¢æ‰å¹³çš„, æ²¡é‚£ä¹ˆå¤šåµŒå¥—å…³ç³»çš„ä»£ç ã€‚</p>
<p>åªæ˜¯å“ä½ ä¸€ä¸‹å•¦, ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è‹¹æœçˆ¸çˆ¸çš„å®˜æ–¹å®šä¹‰ã€‚</p>
<blockquote>
<p>â€œA protocol defines a blueprint of methods, propertiesâ€¦ The protocol can then be adopted by a class, structure, or enumerationâ€â€Šâ€”â€ŠApple</p>
<p>åè®®å®šä¹‰äº†æ–¹æ³•å±æ€§çš„è“å›¾, åè®®å¯ä»¥è¢«ç±»ã€ç»“æ„ä½“ã€è¿˜æœ‰æšä¸¾å®ç°ã€‚</p>
</blockquote>
<h3 id="Getting-Real-with-POP"><a href="#Getting-Real-with-POP" class="headerlink" title="Getting Real with POP"></a>Getting Real with POP</h3><p>é¦–å…ˆæˆ‘ä»¬è®¾è®¡ä¸€ä¸‹ human è¿™ä¸ªä¸œè¥¿ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123;<span class="keyword">get</span> <span class="keyword">set</span>&#125;</div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> &#123;<span class="keyword">get</span> <span class="keyword">set</span>&#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªåè®®ä¸­, æˆ‘æ²¡æœ‰ç”³æ˜ <code>drinking</code>. å®ƒåªæ˜¯å£°æ˜ä¸€äº›ä¸€å®šå­˜åœ¨çš„ä¸œè¥¿ã€‚ç°åœ¨å…ˆä¸è¦çº ç»“ <code>{get set}</code>. å®ƒåªæ˜¯è¡¨æ˜ä½ å¯ä»¥ç»™è¿™ä¸ªå±æ€§èµ‹å€¼ä¹Ÿå¯ä»¥å–å€¼ã€‚å…ˆä¸è¦æ‹…å¿ƒ, é™¤éä½ è¦ä½¿ç”¨è®¡ç®—å±æ€§ã€‚</p>
<p>æˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªéŸ©å›½äºº ğŸ‡°ğŸ‡· ç»“æ„ä½“, æ¥å®ç°è¿™ä¸ªåè®®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Korean</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Bob Lee"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"Asian"</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åªè¦è¿™ä¸ªç»“æ„ä½“éµå®ˆäº†è¿™ä¸ªåè®®ï¼Œå®ƒå°±å¿…é¡»è¦å®ç°è¿™ä¸ªåè®®ä¸­çš„å¤šæœ‰æ–¹æ³•å’Œå±æ€§ã€‚å¦‚æœæ²¡æœ‰çš„è¯ Xcode å°±ä¼šæŠ¥é”™ğŸ˜¡</p>
<p>åªè¦æ˜¯éµå®ˆäº†è¿™ä¸ªè“å›¾ã€‚ä½ å°±å¯ä»¥åšå…¶ä»–ä»»ä½•äº‹æƒ…äº†, ç›–ä¸€åº§é•¿åŸä¹Ÿæ²¡å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ¥å®ç°ä¸€ä¸ªç¾å›½äºº ğŸ‡ºğŸ‡¸</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Korean</span>: <span class="title">Human</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Joe Smith"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"White"</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¾ˆé…·å§ï¼ ä¸éœ€è¦ç”¨é‚£äº› <code>init</code> <code>override</code> å…³é”®å­—ã€‚ å¼€å§‹æ„Ÿå…´è¶£äº†å—ï¼Ÿ</p>
<p><a href="https://www.youtube.com/watch?v=lyzcERHGH_8&amp;t=2s&amp;list=PL8btZwalbjYm5xDXDURW9u86vCtRKaHML&amp;index=1" target="_blank" rel="external">Intro to Protocol Lesson</a></p>
<h3 id="Protocol-Inheritance"><a href="#Protocol-Inheritance" class="headerlink" title="Protocol Inheritance"></a>Protocol Inheritance</h3><p>å¦‚æœä½ æƒ³è¦ä¸€ä¸ª <code>superman</code> çš„åè®®ã€‚è¿™ä¸ªåè®®ä¹Ÿéœ€è¦éµå®ˆ <code>Human</code> è¿™ä¸ªåè®®å‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SuperHuman</span>: <span class="title">Human</span> </span>&#123;</div><div class="line"> <span class="keyword">var</span> canFly: <span class="type">Bool</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125; </div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">punch</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å¦‚æœä½ æœ‰ä¸€ä¸ªéµå®ˆäº† <code>SuperMan</code> è¿™ä¸ªåè®®çš„ç±»æˆ–è€…ç»“æ„ä½“çš„è¯ï¼Œè¿™ä¸ªç±»ä¹Ÿå¿…é¡»å®ç° <code>Human</code> è¿™ä¸ªåè®®ä¸­çš„æ–¹æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SuperSaiyan</span>: <span class="title">SuperMan</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"Goku"</span></div><div class="line">    <span class="keyword">var</span> race: <span class="type">String</span> = <span class="string">"Asian"</span></div><div class="line">    <span class="keyword">var</span> canFly: <span class="type">Bool</span> = <span class="literal">true</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">sayHi</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"Hi, I'm <span class="subst">\(name)</span>"</span>) &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">punch</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"Puuooookkk"</span>) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥éµå®ˆå¤šä¸ªåè®®ã€‚å°±å¯ä»¥å®ç°å¤šç»§æ‰¿äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Example</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Example</span>: <span class="title">ProtocolOne</span>, <span class="title">ProtocolTwo</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<h3 id="Protocol-Extension"><a href="#Protocol-Extension" class="headerlink" title="Protocol Extension"></a>Protocol Extension</h3><p>ä¸‹é¢æ‰æ˜¯åè®®æœ€å¼ºå¤§çš„ç‰¹æ€§äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Super Animal speaks English</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">func</span> <span class="title">speakEnglish</span><span class="params">()</span></span> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»™è¿™ä¸ªåè®®åŠ ä¸€ä¸ª <code>Extension</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">speakEnglish</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"I speak English, pretty cool, huh?"</span>)&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨å†åˆ›å»ºä¸€ä¸ªéµå®ˆè¿™ä¸ªåè®®çš„ç±»</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Donkey</span>: <span class="title">SuperAnimal</span> </span>&#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ramon = <span class="type">Donkey</span>()</div><div class="line">ramon.speakEnglish()</div><div class="line"><span class="comment">//  "I speak English, pretty cool, huh?"</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä½¿ç”¨äº† <code>Extension</code> å°±å¯ä»¥ç»™è¿™ä¸ªåè®®æ·»åŠ é»˜è®¤çš„å®ç°å’Œå±æ€§å€¼äº†ã€‚è¿™æ ·ä¸çˆ½å—ï¼Ÿ</p>
<h3 id="Protocol-as-Type-Last"><a href="#Protocol-as-Type-Last" class="headerlink" title="Protocol as Type(Last)"></a>Protocol as Type(Last)</h3><p>å¦‚æœæˆ‘è·Ÿä½ è¯´æˆ‘èƒ½åœ¨ä¸€ä¸ªæ•°ç»„ä¸­åŒæ—¶æ”¾ä¸€ä¸ªå¯¹è±¡å’Œä¸€ä¸ªç»“æ„ä½“å‘¢ï¼ŸğŸ˜®</p>
<p>æˆ‘è¦ç”¨è¢‹é¼ æ‰“æ¶æ±‚å¶æ¥å†™ä¸€ä¸ª demo äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">StructKangaroo</span>: <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Puuook"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassKangroo</span>: <span class="title">Fightable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">legKick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Pakkkk"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶ååˆå§‹åŒ–ä¿©è¢‹é¼ å‡ºæ¥</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> structKangroo = <span class="type">StructKangaroo</span>()</div><div class="line"><span class="keyword">let</span> classKangroo = <span class="type">ClassKangroo</span>()</div></pre></td></tr></table></figure>
<p>ç°åœ¨å°±å¯ä»¥æŠŠä»–ä»¬æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> kangaroos: [<span class="type">Fightable</span>] = [structKang, classKang]</div></pre></td></tr></table></figure>
<p>éš¾ä»¥ç½®ä¿¡å§ï¼ å†çœ‹çœ‹</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> kang <span class="keyword">in</span> kangaroos &#123; </div><div class="line"> kang.legKick() </div><div class="line">&#125;</div><div class="line"><span class="comment">// "Puuook"</span></div><div class="line"><span class="comment">// "Pakkkk"</span></div></pre></td></tr></table></figure>
<p>è¿™å¾ˆçˆ½å§ï¼ æƒ³è±¡åœ¨ OOP ä¸­æˆ‘ä»¬æ€ä¹ˆå®ç°è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿ</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p><a href="https://blog.bobthedeveloper.io/protocol-oriented-programming-view-in-swift-3-8bcb3305c427" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;OOP is okay, but couldâ€™ve been better&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Introduction&quot;&gt;&lt;a href=&quot;#Introduction&quot; class=&quot;headerlink&quot; title=&quot;Introduction&quot;&gt;&lt;/a&gt;Introduction&lt;/h3&gt;&lt;p&gt;å³ä½¿ä½ è¿˜ä¸çŸ¥é“ Class å’Œ Struct åŸºæœ¬çš„åŒºåˆ«, ä½ ä¹Ÿå¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ã€‚éƒ½çŸ¥é“ Struct ä¸èƒ½ç»§æ‰¿, ä½†æ˜¯, ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è¿˜ä¸çŸ¥é“ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ, èŠ±ä¸¤åˆ†é’Ÿæ—¶é—´è¯»ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ã€‚è¿™äº›ä»£ç æ˜¯å†™åœ¨ playground ä¸Šçš„&lt;/p&gt;
    
    </summary>
    
      <category term="POP" scheme="https://CepheusTeam.github.io/categories/POP/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="POP" scheme="https://CepheusTeam.github.io/tags/POP/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift MVVM API Manual ğŸ“ƒ</title>
    <link href="https://CepheusTeam.github.io/2017/05/07/RxSwift%20MVVM%20API%20Manual/"/>
    <id>https://CepheusTeam.github.io/2017/05/07/RxSwift MVVM API Manual/</id>
    <published>2017-05-07T11:02:57.000Z</published>
    <updated>2017-05-13T04:13:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç°åœ¨æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰çš„å·¥å…·, ä¹Ÿæ˜ç¡®äº†ä»–å­˜åœ¨çš„é£é™©ä»¥åŠè§„é¿çš„æ–¹æ³•ã€‚ç°åœ¨æ˜¯æ—¶å€™æƒ³æƒ³åº”è¯¥æ€ä¹ˆæ ·æœ€å¤§å¯èƒ½çš„è¿ç”¨å®ƒäº†ã€‚ä»¥ MVVM ä¸ºä¾‹ã€‚</p>
<p>åˆå¾ˆå¤šæ–¹æ³•æ¥å†™ RxSwift çš„ APIã€‚ æˆ‘æ€•çš„åšæ³•æ˜¯: åˆ©ç”¨ RxSwift å¾ˆé…·çš„è§‚å¯Ÿè€…æ¨¡å¼å’Œå¾ˆæ–¹ä¾¿çš„æ“ä½œç¬¦, ç®¡ç†å¼‚æ­¥çš„ä»»åŠ¡ã€‚å¯èƒ½ä¸æ˜¯ 100% çº¯æ­£çš„ RxSwiftã€‚ åœ¨å°†æˆ‘åšè¿‡å¾ˆå¤šçš„å°è¯•è¯•å›¾å°†ä¸¤ç§ç¼–ç¨‹æ€ç»´ç»Ÿä¸€èµ·æ¥,ä½†æ˜¯æˆ‘éƒ½å¤±è´¥äº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä½¿ç”¨ RxSwift çš„æ–¹æ³•ã€‚</p>
<h3 id="Be-Consistent"><a href="#Be-Consistent" class="headerlink" title="Be Consistent"></a>Be Consistent</h3><p>è¿™æ˜¯åœ¨æ¥å£è®¾è®¡ä¸­æœ€é‡è¦çš„äº‹æƒ…, å¦‚æœä½ åšå‡ºäº†é€‰æ‹©ã€‚å°±åšæŒä¸‹å»ã€‚</p>
<p>æ—¢ç„¶å¦‚æ­¤, ç°åœ¨å°±å¼€å§‹å§ï¼<strong>input vs output</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilterViewModel</span> </span>&#123;</div><div class="line">    <span class="comment">//Input</span></div><div class="line">    <span class="keyword">let</span> filterButtonEvents: <span class="type">BehaviorSubject</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    <span class="keyword">let</span> filterSelectionEvent: <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    </div><div class="line">    <span class="comment">//OutPut</span></div><div class="line">    <span class="keyword">let</span> currentFilter: <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">    <span class="keyword">let</span> shouldShowFilter: <span class="type">Observable</span>&lt;<span class="type">Bool</span>&gt;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ‰å¥½å‡ ä¸ªå¯ä»¥ç”¨æ¥å£°æ˜ inout å’Œ output çš„ç»„åˆã€‚è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚</p>
<h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>é€šè¿‡å°† <code>input</code> å£°æ˜æˆ <code>subject</code> ç±»å‹ã€‚æˆ‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ <code>RxSwift</code> ä¸­çš„å„ç§æ“ä½œç¬¦ã€‚æˆ‘ç”¨çš„æœ€å¤šçš„åº”è¯¥æ˜¯ <strong>throttle</strong>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">filterButtonEvents</div><div class="line">    .throttle(<span class="number">0.5</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (counter) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.makeRequest()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>å½“ç„¶ç”¨ observable åš input ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>è®°ä½ <code>output</code> åº”è¯¥æ˜¯ <code>Observable</code>, ç”šè‡³æ˜¯ <code>Subject</code>ã€‚ å¦‚æœä¸è¿™æ ·çš„è¯ï¼Œä¸€äº›å¤–éƒ¨çš„ç±»å¯èƒ½ä¼šé”™è¯¯çš„æŠŠè¿™ä»–å½“åšæ˜¯ <code>input</code> è¿™æ ·å°±æ‰“ç ´äº†å°è£…äº†ã€‚å½“æˆ‘æƒ³è¦å‘å‡ºä¸€ä¸ªå˜é‡çš„æ—¶å€™, å°±æ˜¯å¼ºåˆ¶çš„é‡Šæ”¾ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(observable <span class="keyword">as</span>! <span class="type">PublishSubject</span>)</div><div class="line">    .onNext(<span class="string">"Ugly..."</span>)</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„æ–¹æ³•, ä¸€å®šè¦å‘Šè¯‰æˆ‘ã€‚æˆ‘æ„Ÿè§‰è¿™ä¹ˆå¹²æ˜¯åœ¨æ˜¯ä¸ä¼˜é›…ğŸ˜±ã€‚</p>
<h3 id="Safety"><a href="#Safety" class="headerlink" title="Safety"></a>Safety</h3><p>å¦‚æœåœ¨ä¸€ä¸ªç®€å•çš„ Demo ä¸­, ä½ å¯èƒ½è®°å¾—åšæ‰€æœ‰çš„ç»†èŠ‚ã€‚ä½†åœ¨ä¸€ä¸ªå¤æ‚çš„ app ä¸­, ä½ å‡ ä¹ä¸å¯èƒ½è®°å¾—ä½æ‰€æœ‰çš„å®ç°ç»†èŠ‚ã€‚è¿™é‡Œé¢å¯èƒ½æœ‰å¥½å‡ ç™¾ä¸ªè®¢é˜…è€…ã€‚ <code>Observable</code> åˆæ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›çš„ç±»å‹ã€‚éƒ½è¿˜æ²¡æœ‰è¯´è¿™ä¸ªä¿¡å·æ˜¯çƒ­ä¿¡å·è¿˜æ˜¯å†·ä¿¡å·, ä»–æ˜¯åœ¨ä¸»çº¿ç¨‹è¿˜æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™ä¹Ÿæ˜¯ <code>Driver</code> è¢«è®¾è®¡å‡ºæ¥çš„åŸå› , ä¸ºäº†è®© API æ›´åŠ æ˜ç¡®ã€‚æˆ‘ä»¬é¼“åŠ±è‡ªå·±å»åˆ›å»ºä¸€äº›å•å…ƒã€‚</p>
<a id="more"></a>
<p><strong>Driver</strong> æ˜¯ä¸€ä¸ªçƒ­ä¿¡å·, è€Œä¸”æ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹å½“ä¸­çš„ã€‚å¥½æƒ³å¿½ç•¥æ‰äº†å†·ä¿¡å·ï¼Ÿæ²¡å…³ç³», åˆ›é€ ä¸€ä¸ªå°±æ˜¯äº†ã€‚æˆ‘ç§°ä»–ä½œ <strong>Template</strong> å› ä¸ºå†·ä¿¡å·å°±æ˜¯æ˜¯ä¸€ä¸ªæ¨¡ç‰ˆ, åœ¨è¿™ä¸ªæ¨¡ç‰ˆä¸­ä½ å¯ä»¥ç”¨ <code>subscribe</code> æ¥è¿è¡Œä»–ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Template</span>&lt;<span class="title">Element</span>&gt; </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">Element</span>&gt;</div><div class="line">    </div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> subscribe: @escaping (<span class="type">AnyObserver</span>&lt;<span class="type">Element</span>&gt;) -&gt; <span class="type">Disposable</span>) &#123;</div><div class="line">        observable = <span class="type">Observable</span>.create(subscribe)</div><div class="line">            .subscribeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ · <code>Template</code> å°±èƒ½ç¡®ä¿æ˜¯ä¸€ä¸ªåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„å†·ä¿¡å·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class MyViewModel &#123;</div><div class="line"> //Cold â„ï¸</div><div class="line"> let createRequest : Template&lt;Int&gt;</div><div class="line"> //Hot ğŸŒ¶</div><div class="line"> let shouldShowElement : Driver&lt;Bool&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·çœ‹, ç¨‹åºä¸­æš´éœ²çš„æ¥å£å°±å¾ˆæ˜ç¡®äº†ã€‚</p>
<h3 id="MVVM-State-Machine"><a href="#MVVM-State-Machine" class="headerlink" title="MVVM State Machine"></a>MVVM State Machine</h3><p>æ¶‰åŠåˆ°çŠ¶æ€çš„ç®¡ç†çš„æ—¶å€™, <code>ViewController</code> ç»å¸¸ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚å¦‚æœåœ¨ <code>viewModel</code> ä¸­ä½¿ç”¨çŠ¶æ€æœº, æ¥å‘Šè¯‰ <code>ViewController</code> åœ¨ä»€ä¹ˆæ—¶å€™åº”è¯¥æ€ä¹ˆåšã€‚<a href="http://curtclifton.net/generic-state-machine-in-swift" target="_blank" rel="external">è¿™é‡Œæœ‰ä¸€ç¯‡ä¸é”™çš„æ–‡ç« </a></p>
<ul>
<li>æŠŠè¿™äº›çŠ¶æ€æ”¾åœ¨ä¸€ä¸ªæšä¸¾é‡Œé¢, è€Œä¸æ˜¯åˆ†æ•£åœ¨å„ä¸ªåœ°æ–¹ã€‚è¿™æ ·åšå¯ä»¥æå¤§çš„å‡å°‘ä½ çš„ <code>Observable</code>ã€‚</li>
<li>è¿™ä¹Ÿä¼šå¼ºè¿«ä½ å§æ›´å¤šçš„é€»è¾‘ç§»åˆ° <code>ViewModel</code> é‡Œé¢ã€‚</li>
<li>è®©ä½ çš„ä»£ç æ›´åŠ çš„å…·æœ‰å£°æ˜æ€§ã€‚<br>ğŸ‘‹</li>
</ul>
<p><a href="http://swiftpearls.com/mvvm-state-manage.html" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç°åœ¨æˆ‘ä»¬æŒæ¡äº†æ‰€æœ‰çš„å·¥å…·, ä¹Ÿæ˜ç¡®äº†ä»–å­˜åœ¨çš„é£é™©ä»¥åŠè§„é¿çš„æ–¹æ³•ã€‚ç°åœ¨æ˜¯æ—¶å€™æƒ³æƒ³åº”è¯¥æ€ä¹ˆæ ·æœ€å¤§å¯èƒ½çš„è¿ç”¨å®ƒäº†ã€‚ä»¥ MVVM ä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;åˆå¾ˆå¤šæ–¹æ³•æ¥å†™ RxSwift çš„ APIã€‚ æˆ‘æ€•çš„åšæ³•æ˜¯: åˆ©ç”¨ RxSwift å¾ˆé…·çš„è§‚å¯Ÿè€…æ¨¡å¼å’Œå¾ˆæ–¹ä¾¿çš„æ“ä½œç¬¦, ç®¡ç†å¼‚æ­¥çš„ä»»åŠ¡ã€‚å¯èƒ½ä¸æ˜¯ 100% çº¯æ­£çš„ RxSwiftã€‚ åœ¨å°†æˆ‘åšè¿‡å¾ˆå¤šçš„å°è¯•è¯•å›¾å°†ä¸¤ç§ç¼–ç¨‹æ€ç»´ç»Ÿä¸€èµ·æ¥,ä½†æ˜¯æˆ‘éƒ½å¤±è´¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä½¿ç”¨ RxSwift çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Be-Consistent&quot;&gt;&lt;a href=&quot;#Be-Consistent&quot; class=&quot;headerlink&quot; title=&quot;Be Consistent&quot;&gt;&lt;/a&gt;Be Consistent&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯åœ¨æ¥å£è®¾è®¡ä¸­æœ€é‡è¦çš„äº‹æƒ…, å¦‚æœä½ åšå‡ºäº†é€‰æ‹©ã€‚å°±åšæŒä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶å¦‚æ­¤, ç°åœ¨å°±å¼€å§‹å§ï¼&lt;strong&gt;input vs output&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FilterViewModel&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Input&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; filterButtonEvents: &lt;span class=&quot;type&quot;&gt;BehaviorSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; filterSelectionEvent: &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//OutPut&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; currentFilter: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; shouldShowFilter: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt;&amp;gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æœ‰å¥½å‡ ä¸ªå¯ä»¥ç”¨æ¥å£°æ˜ inout å’Œ output çš„ç»„åˆã€‚è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;h4 id=&quot;Input&quot;&gt;&lt;a href=&quot;#Input&quot; class=&quot;headerlink&quot; title=&quot;Input&quot;&gt;&lt;/a&gt;Input&lt;/h4&gt;&lt;p&gt;é€šè¿‡å°† &lt;code&gt;input&lt;/code&gt; å£°æ˜æˆ &lt;code&gt;subject&lt;/code&gt; ç±»å‹ã€‚æˆ‘å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ &lt;code&gt;RxSwift&lt;/code&gt; ä¸­çš„å„ç§æ“ä½œç¬¦ã€‚æˆ‘ç”¨çš„æœ€å¤šçš„åº”è¯¥æ˜¯ &lt;strong&gt;throttle&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;filterButtonEvents&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .throttle(&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;, scheduler: &lt;span class=&quot;type&quot;&gt;MainScheduler&lt;/span&gt;.instance)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.makeRequest()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å½“ç„¶ç”¨ observable åš input ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;Output&quot;&gt;&lt;a href=&quot;#Output&quot; class=&quot;headerlink&quot; title=&quot;Output&quot;&gt;&lt;/a&gt;Output&lt;/h4&gt;&lt;p&gt;è®°ä½ &lt;code&gt;output&lt;/code&gt; åº”è¯¥æ˜¯ &lt;code&gt;Observable&lt;/code&gt;, ç”šè‡³æ˜¯ &lt;code&gt;Subject&lt;/code&gt;ã€‚ å¦‚æœä¸è¿™æ ·çš„è¯ï¼Œä¸€äº›å¤–éƒ¨çš„ç±»å¯èƒ½ä¼šé”™è¯¯çš„æŠŠè¿™ä»–å½“åšæ˜¯ &lt;code&gt;input&lt;/code&gt; è¿™æ ·å°±æ‰“ç ´äº†å°è£…äº†ã€‚å½“æˆ‘æƒ³è¦å‘å‡ºä¸€ä¸ªå˜é‡çš„æ—¶å€™, å°±æ˜¯å¼ºåˆ¶çš„é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;(observable &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .onNext(&lt;span class=&quot;string&quot;&gt;&quot;Ugly...&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœä½ çŸ¥é“æœ‰æ›´å¥½çš„æ–¹æ³•, ä¸€å®šè¦å‘Šè¯‰æˆ‘ã€‚æˆ‘æ„Ÿè§‰è¿™ä¹ˆå¹²æ˜¯åœ¨æ˜¯ä¸ä¼˜é›…ğŸ˜±ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Safety&quot;&gt;&lt;a href=&quot;#Safety&quot; class=&quot;headerlink&quot; title=&quot;Safety&quot;&gt;&lt;/a&gt;Safety&lt;/h3&gt;&lt;p&gt;å¦‚æœåœ¨ä¸€ä¸ªç®€å•çš„ Demo ä¸­, ä½ å¯èƒ½è®°å¾—åšæ‰€æœ‰çš„ç»†èŠ‚ã€‚ä½†åœ¨ä¸€ä¸ªå¤æ‚çš„ app ä¸­, ä½ å‡ ä¹ä¸å¯èƒ½è®°å¾—ä½æ‰€æœ‰çš„å®ç°ç»†èŠ‚ã€‚è¿™é‡Œé¢å¯èƒ½æœ‰å¥½å‡ ç™¾ä¸ªè®¢é˜…è€…ã€‚ &lt;code&gt;Observable&lt;/code&gt; åˆæ˜¯ä¸€ä¸ªéå¸¸å¹¿æ³›çš„ç±»å‹ã€‚éƒ½è¿˜æ²¡æœ‰è¯´è¿™ä¸ªä¿¡å·æ˜¯çƒ­ä¿¡å·è¿˜æ˜¯å†·ä¿¡å·, ä»–æ˜¯åœ¨ä¸»çº¿ç¨‹è¿˜æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™ä¹Ÿæ˜¯ &lt;code&gt;Driver&lt;/code&gt; è¢«è®¾è®¡å‡ºæ¥çš„åŸå› , ä¸ºäº†è®© API æ›´åŠ æ˜ç¡®ã€‚æˆ‘ä»¬é¼“åŠ±è‡ªå·±å»åˆ›å»ºä¸€äº›å•å…ƒã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/tags/Reactive/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift Safety Manual ğŸ“š</title>
    <link href="https://CepheusTeam.github.io/2017/05/07/RxSwift%20Safety%20Manual/"/>
    <id>https://CepheusTeam.github.io/2017/05/07/RxSwift Safety Manual/</id>
    <published>2017-05-07T09:19:57.000Z</published>
    <updated>2017-05-13T04:13:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>RxSwift æä¾›äº†å¤§é‡éå¸¸å¥½ç”¨çš„å·¥å…·, è®©å†™ä»£ç æ›´çˆ½, ä½†æ˜¯ä»–ä¹Ÿå¯èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¤´ç–¼çš„åœ°æ–¹, ä¹Ÿå¯èƒ½æ˜¯bugğŸ˜±ã€‚ ç”¨äº†ä¸‰ä¸ªæœˆä¹‹åæˆ‘è§‰å¾—æˆ‘åº”è¯¥ä¹Ÿå¯ä»¥ç»™å‡ºä¸€äº›å»ºè®®æ¥é¿å…ä¸€äº›é—®é¢˜ã€‚</p>
<h3 id="Side-Effects"><a href="#Side-Effects" class="headerlink" title="Side Effects"></a>Side Effects</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å‰¯ä½œç”¨è¿™ä¸ªè¯å¯èƒ½æ²¡é‚£ä¹ˆå®¹æ˜“ç†è§£, å› ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸å®½æ³›çš„å†…å®¹ã€‚åœ¨ <a href="http://softwareengineering.stackexchange.com/questions/40297/what-is-a-side-effect" target="_blank" rel="external">Stackoverflow</a> æœ‰ä¸€äº›æ¯”è¾ƒå¥½çš„è®¨è®ºã€‚</p>
<p>ç®€å•ç‚¹è¯´, ä¸€ä¸ªå‡½æ•°/é—­åŒ…/â€¦å¦‚æœä»–ä»¬æ”¹å˜äº† app çš„çŠ¶æ€, éƒ½æœ‰å¯èƒ½å¸¦æ¥ä¸€äº›å‰¯ä½œç”¨ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// è¿™æ ·å†™æ²¡æœ‰å‰¯ä½œç”¨</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="comment">// è¿™é‡Œå°±ä¼šæœ‰å‰¯ä½œç”¨: è¿™ä¸ª closure æ”¹å˜äº† counter çš„å€¼</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆåœ¨ RxSwift ä¸­è¿™ä¸ªå¾ˆé‡è¦å‘¢? å› ä¸ºå¯¹äºå†·ä¿¡å·â„ï¸æ¥è¯´ã€‚<strong>æ¯æ¬¡è¢«è®¢é˜…ä»–éƒ½ä¼šæ‰§è¡Œä¸€ä¸‹é‡Œé¢çš„ä»»åŠ¡</strong></p>
<p>æˆ‘ä»¬ä¸¤æ¬¡è®¢é˜…è¿™ä¸ª <code>observableWithSideEffect</code>: </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯èƒ½å¸Œæœ›ä»–è¾“å‡ºçš„æ˜¯ä¸¤ä¸ª2.ä½†æ˜¯äº‹å®ä¸Šå®ƒä¼šè¾“å‡º2ï¼Œ3. å› ä¸ºæ¯æ¬¡è®¢é˜…éƒ½ä¼šåˆ†åˆ«æ‰§è¡Œ, æ‰€ä»¥åœ¨é—­åŒ…é‡Œé¢çš„ä»£ç ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ã€‚<strong>æ‰€ä»¥ counter + 1 ä¼šæ‰§è¡Œä¸¤æ¬¡</strong></p>
<p>ä¹Ÿå°±æ˜¯è¯´, å¦‚æœä½ åœ¨è¿™é‡Œé¢æˆ¿é‡Œä¸¤ä¸ªç½‘ç»œè¯·æ±‚ã€‚<strong>å®ƒä¼šå‘å‡ºä¸¤æ¬¡è¯·æ±‚</strong></p>
<p>æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ æŠŠè¿™ä¸ªå†·ä¿¡å·è½¬æ¢æˆçƒ­ä¿¡å·ğŸ’¡ã€‚ ä½¿ç”¨ <strong>publish</strong> connect è¿˜æœ‰ refCount å°±å¯ä»¥äº†,è¿™æ˜¯<a href="http://www.tailec.com/blog/understanding-publish-connect-refcount-share" target="_blank" rel="external">å®Œæ•´ç»†èŠ‚</a>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> counter = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;.publish()</div><div class="line"><span class="comment">// publish returns an observable with a shared subscription(hot).</span></div><div class="line"><span class="comment">// It's not active yet</span></div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .connect()</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™ä¼šè¾“å‡º 2ï¼Œ2</p>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹è¿™å°±å¤Ÿäº†ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´é«˜çº§çš„ <em>shareReplay</em> æ“ä½œç¬¦ã€‚ä»–ä½¿ç”¨äº† <code>refCont</code> æ“ä½œç¬¦åˆ <code>replay</code>. <code>refCount</code> ä¹Ÿæ˜¯ä¸€ç§ <code>connect</code> ä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨ç®¡ç†çš„ã€‚ä»–ä¼šåœ¨ç¬¬ä¸€æ¬¡è®¢é˜…å¼€å§‹çš„æ—¶å€™å¼€å§‹ã€‚ replay ä¼šæŠŠä¸€äº›å…ƒç´ å‘é€ç»™é‚£äº› â€œè¿Ÿåˆ°äº†â€ çš„è®¢é˜…è€…/</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> counter = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> observableWithSideEffect = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    counter = counter + <span class="number">1</span></div><div class="line">    observer.onNext(counter)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;.shareReplay(<span class="number">1</span>)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observableWithSideEffect</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(counter)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Main-Queue"><a href="#Main-Queue" class="headerlink" title="Main Queue"></a>Main Queue</h3><p>å½“è®¢é˜…è¡Œä¸ºæ˜¯å‘ç”Ÿåœ¨ viewcontroller ä¸Š, ç„¶åä½ ä¸çŸ¥é“è®¢é˜…è¡Œä¸ºæ˜¯åœ¨é‚£ä¸ªçº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚åœ¨åˆ·æ–° UI çš„æ—¶å€™ç¡®å®šè¿™æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observableWithSideEffect</div><div class="line">    .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; (counter) <span class="keyword">in</span></div><div class="line">        <span class="comment">// update UI</span></div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Error-Events"><a href="#Error-Events" class="headerlink" title="Error Events"></a>Error Events</h3><p>å¦‚æœä½ æŠŠå¥½å‡ ä¸ª <code>Observerable</code> åˆå¹¶åœ¨äº†ä¸€èµ·ã€‚å¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªå‘ç”Ÿäº†é”™è¯¯ã€‚æ‰€æœ‰çš„ <code>Observerable</code> éƒ½ä¼šç»“æŸã€‚å¦‚æœæœ€å¼€å§‹æ˜¯UIçš„è¯, ä»–å°±ä¼šåœæ­¢å“åº”ã€‚ä½ åº”è¯¥å¥½å¥½çš„è®¾è®¡ä½ çš„ä»£ç , è€ƒè™‘å¥½å¦‚æœå‘ç”Ÿäº† <code>complete</code> æˆ–è€… <code>error</code> ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .bindTo(myImportantLabel.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å¦‚æœ viewModel.importantText å› ä¸ºä»€ä¹ˆåŸå› å‘é€å‡ºæ¥ä¸€ä¸ªerroräº‹ä»¶ã€‚è¿™ä¸ª <code>bingding</code> è®¢é˜…ä¹Ÿä¼šç»“æŸã€‚</p>
<p>å¦‚æœä½ æƒ³é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿä½ å¯ä»¥ä½¿ç”¨ <strong>catchErrorJustReturn</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .catchErrorJustReturn(<span class="string">"default text"</span>)</div><div class="line">    .bind(to: lable.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h3><p><strong>Driver</strong> æ˜¯ä¸€ä¸ªèƒ½å¤Ÿ <code>observeOn</code>ã€<code>catchErrorJustReturn</code>ã€<code>shareReplay</code> <strong>Observable</strong>.å¦‚æœä½ æƒ³åœ¨viewModelä¸­æš´éœ²ä¸€ä¸ªå®‰å…¨çš„APIã€‚ä½¿ç”¨ <strong>Driver</strong> æ˜¯æ›´å¥½çš„åšæ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.importantText</div><div class="line">    .asDriver(onErrorJustReturn: <span class="string">"default text"</span>)</div><div class="line">    .drive(lable.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h3 id="Reference-Cycles"><a href="#Reference-Cycles" class="headerlink" title="Reference Cycles"></a>Reference Cycles</h3><p>é˜²æ­¢å†…å­˜æ³„æ¼éœ€è¦åœ¨è¯å¾ˆå¤šå¿ƒæ€åœ¨é¿å…å¼•ç”¨å¾ªç¯ä¸Šï¼Œå½“æˆ‘ä»¬ä½¿ç”¨åœ¨è®¢é˜…é—­åŒ…ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡çš„æ—¶å€™ã€‚è¿™ä¸ªå˜é‡ä¼šè¢«æ•è·ä¸ºä¸€ä¸ªå¼ºå¼•ç”¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.priceString</div><div class="line">    .subscribe(onNext: &#123;(text) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.priceLabel.text = text</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ª vc å¼ºå¼•ç”¨äº† viewModelã€‚ç°åœ¨è¿™ä¸ª viewmodel åˆå› ä¸ºåœ¨è¿™ä¸ªé—­åŒ…ä¸­å¼ºå¼•ç”¨äº†è¿™ä¸ª vcã€‚è¿™å°±å¸¦æ¥äº†å¾ªç¯å¼•ç”¨ã€‚ <a href="https://krakendev.io/blog/weak-and-unowned-references-in-swift" target="_blank" rel="external">â€œWEAK, STRONG, UNOWNED, OH MY!â€ - A GUIDE TO REFERENCES IN SWIFT</a></p>
<p>ä¸‹é¢æ˜¯è§£å†³åŠæ³•</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">viewModel.priceString</div><div class="line">    .subscribe(onNext: &#123;[<span class="keyword">unowned</span> <span class="keyword">self</span>] (text) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.priceLabel.text = text</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <strong>[unowned self]</strong> è¯­å¥ä¹‹åå°±ä¸ç”¨å»è€ƒè™‘è¿™ä¸ªé—®é¢˜äº†ğŸ¤—ã€‚</p>
<p>self å¹¶ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªä½ éœ€è¦æ‹…å¿ƒçš„ä¸œè¥¿ã€‚ä½ å¯èƒ½éœ€è¦è€ƒè™‘æ‰€æœ‰ä½ åœ¨åœ¨é—­åŒ…ä¸­æ•è·çš„å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// out side the view controller</span></div><div class="line">        viewModel.priceString</div><div class="line">            .subscribe(onNext: &#123;[<span class="keyword">weak</span> viewController] (text) <span class="keyword">in</span></div><div class="line">                viewController?.priceLabel.text = text</div><div class="line">            &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ã€‚è¿™ä¹Ÿæ˜¯æˆ‘<strong>å¼ºçƒˆå»ºè®®ä½ å°½é‡è®©ä½ çš„é—­åŒ…å¾ˆçŸ­</strong>çš„åŸå› ã€‚å¦‚æœä¸€ä¸ªé—­åŒ…è¶…è¿‡äº†3ã€4è¡Œä»£ç çš„è¯ã€‚å¯ä»¥è€ƒè™‘æŠŠè¿™éƒ¨åˆ†é€»è¾‘æ”¾åœ¨ä¸€ä¸ªæ–°çš„æ–¹æ³•é‡Œé¢å»ã€‚è¿™æ ·çš„è¯ï¼Œè¿™äº›ä¾èµ–å…³ç³»å°±ä¼šå˜çš„å¾ˆæ˜ç¡®äº†ã€‚ä½ æ‰èƒ½å¤Ÿå¾ˆå¥½çš„å»è€ƒè™‘å¼ºå¼±åº”ç”¨çš„é—®é¢˜ã€‚</p>
<h3 id="Managing-your-subscriptions"><a href="#Managing-your-subscriptions" class="headerlink" title="Managing your subscriptions"></a>Managing your subscriptions</h3><p>è®°ä½è¦æŠŠä½ ä¸éœ€è¦è®¢é˜…çš„è®¢é˜…æ¸…æ¥šæ‰ã€‚æˆ‘æ›¾ç»é‡åˆ°è¿‡ä¸€æ¬¡, ç”±äºæˆ‘æ²¡æœ‰åŠæ—¶çš„æ¸…é™¤æ‰æˆ‘çš„è®¢é˜…, å½“ <code>cell</code> è¢«é‡ç”¨çš„æ—¶å€™, å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è®¢é˜…, å¯¼è‡´äº†éå¸¸å£®è§‚çš„ <strong>bug</strong>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reuseBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="comment">// Called each time a cell is reused</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">configCell</span><span class="params">()</span></span> &#123;</div><div class="line">    viewModel</div><div class="line">        .subscribe(onNext: &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">            <span class="keyword">self</span>.sendOpenNewDetailsScreen()</div><div class="line">        &#125;)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Creating a new bag for each cell</span></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prepareForReuse</span><span class="params">()</span></span> &#123;</div><div class="line">    reuseBag = <span class="type">DisposeBag</span>()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>RxSwift æ˜¯éå¸¸å¤æ‚çš„ä¸œè¥¿ã€‚ä½†æ˜¯å¦‚æœä½ è®¾å®šå¥½äº†è‡ªå·±çš„ä¸€å¥—è§„åˆ™, ç„¶ååœ¨ç¼–ç çš„æ—¶å€™åšæŒè¿™ä¸ªè§„åˆ™ã€‚è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½éš¾å—çš„ğŸ˜‡ã€‚ åœ¨ä½¿ç”¨ RxSwift åšçš„æ—¶å€™åœ¨æ¯ä¸€å±‚ä¸­è€ƒè™‘æ¸…æ¥šä½ éœ€è¦æŠŠå“ªäº› API æš´éœ²å‡ºæ¥ã€‚è¿™ä¹Ÿèƒ½å¸®åŠ©ä½ å¾ˆå¿«çš„å‘ç° bugã€‚</p>
<p><a href="http://swiftpearls.com/RxSwift-Safety-Manual.html" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;RxSwift æä¾›äº†å¤§é‡éå¸¸å¥½ç”¨çš„å·¥å…·, è®©å†™ä»£ç æ›´çˆ½, ä½†æ˜¯ä»–ä¹Ÿå¯èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¤´ç–¼çš„åœ°æ–¹, ä¹Ÿå¯èƒ½æ˜¯bugğŸ˜±ã€‚ ç”¨äº†ä¸‰ä¸ªæœˆä¹‹åæˆ‘è§‰å¾—æˆ‘åº”è¯¥ä¹Ÿå¯ä»¥ç»™å‡ºä¸€äº›å»ºè®®æ¥é¿å…ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Side-Effects&quot;&gt;&lt;a href=&quot;#Side-Effects&quot; class=&quot;headerlink&quot; title=&quot;Side Effects&quot;&gt;&lt;/a&gt;Side Effects&lt;/h3&gt;&lt;p&gt;åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å‰¯ä½œç”¨è¿™ä¸ªè¯å¯èƒ½æ²¡é‚£ä¹ˆå®¹æ˜“ç†è§£, å› ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸å®½æ³›çš„å†…å®¹ã€‚åœ¨ &lt;a href=&quot;http://softwareengineering.stackexchange.com/questions/40297/what-is-a-side-effect&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Stackoverflow&lt;/a&gt; æœ‰ä¸€äº›æ¯”è¾ƒå¥½çš„è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•ç‚¹è¯´, ä¸€ä¸ªå‡½æ•°/é—­åŒ…/â€¦å¦‚æœä»–ä»¬æ”¹å˜äº† app çš„çŠ¶æ€, éƒ½æœ‰å¯èƒ½å¸¦æ¥ä¸€äº›å‰¯ä½œç”¨ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// è¿™æ ·å†™æ²¡æœ‰å‰¯ä½œç”¨&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observableWithSideEffect = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// è¿™é‡Œå°±ä¼šæœ‰å‰¯ä½œç”¨: è¿™ä¸ª closure æ”¹å˜äº† counter çš„å€¼&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    counter = counter + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆåœ¨ RxSwift ä¸­è¿™ä¸ªå¾ˆé‡è¦å‘¢? å› ä¸ºå¯¹äºå†·ä¿¡å·â„ï¸æ¥è¯´ã€‚&lt;strong&gt;æ¯æ¬¡è¢«è®¢é˜…ä»–éƒ½ä¼šæ‰§è¡Œä¸€ä¸‹é‡Œé¢çš„ä»»åŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸¤æ¬¡è®¢é˜…è¿™ä¸ª &lt;code&gt;observableWithSideEffect&lt;/code&gt;: &lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬å¯èƒ½å¸Œæœ›ä»–è¾“å‡ºçš„æ˜¯ä¸¤ä¸ª2.ä½†æ˜¯äº‹å®ä¸Šå®ƒä¼šè¾“å‡º2ï¼Œ3. å› ä¸ºæ¯æ¬¡è®¢é˜…éƒ½ä¼šåˆ†åˆ«æ‰§è¡Œ, æ‰€ä»¥åœ¨é—­åŒ…é‡Œé¢çš„ä»£ç ä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ã€‚&lt;strong&gt;æ‰€ä»¥ counter + 1 ä¼šæ‰§è¡Œä¸¤æ¬¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´, å¦‚æœä½ åœ¨è¿™é‡Œé¢æˆ¿é‡Œä¸¤ä¸ªç½‘ç»œè¯·æ±‚ã€‚&lt;strong&gt;å®ƒä¼šå‘å‡ºä¸¤æ¬¡è¯·æ±‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ æŠŠè¿™ä¸ªå†·ä¿¡å·è½¬æ¢æˆçƒ­ä¿¡å·ğŸ’¡ã€‚ ä½¿ç”¨ &lt;strong&gt;publish&lt;/strong&gt; connect è¿˜æœ‰ refCount å°±å¯ä»¥äº†,è¿™æ˜¯&lt;a href=&quot;http://www.tailec.com/blog/understanding-publish-connect-refcount-share&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®Œæ•´ç»†èŠ‚&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; counter = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observableWithSideEffect = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    counter = counter + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;.publish()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// publish returns an observable with a shared subscription(hot).&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// It&#39;s not active yet&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (counter) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(counter)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observableWithSideEffect&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .connect()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ä¼šè¾“å‡º 2ï¼Œ2&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹è¿™å°±å¤Ÿäº†ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´é«˜çº§çš„ &lt;em&gt;shareReplay&lt;/em&gt; æ“ä½œç¬¦ã€‚ä»–ä½¿ç”¨äº† &lt;code&gt;refCont&lt;/code&gt; æ“ä½œç¬¦åˆ &lt;code&gt;replay&lt;/code&gt;. &lt;code&gt;refCount&lt;/code&gt; ä¹Ÿæ˜¯ä¸€ç§ &lt;code&gt;connect&lt;/code&gt; ä½†æ˜¯å®ƒæ˜¯è‡ªåŠ¨ç®¡ç†çš„ã€‚ä»–ä¼šåœ¨ç¬¬ä¸€æ¬¡è®¢é˜…å¼€å§‹çš„æ—¶å€™å¼€å§‹ã€‚ replay ä¼šæŠŠä¸€äº›å…ƒç´ å‘é€ç»™é‚£äº› â€œè¿Ÿåˆ°äº†â€ çš„è®¢é˜…è€…/&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/tags/Reactive/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part3</title>
    <link href="https://CepheusTeam.github.io/2017/05/07/RxSwift%20For%20Dummies%20Part3/"/>
    <id>https://CepheusTeam.github.io/2017/05/07/RxSwift For Dummies Part3/</id>
    <published>2017-05-07T07:27:57.000Z</published>
    <updated>2017-05-13T04:13:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½äº†, æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚<strong>Subjects</strong></p>
<p>å­¦äº†ä¹‹å‰å†…å®¹. æˆ‘ä»¬å¯èƒ½å·²ç»å‘ç°äº†ã€‚ä¹‹å‰å­¦ä¹ çš„å†…å®¹éƒ½æ˜¯ <code>Observables</code> è¾“å‡ºäº‹ä»¶çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥è®¢é˜…ä»–, å°±èƒ½çŸ¥é“ä»–è¾“å‡ºçš„äº‹ä»¶äº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸èƒ½æ”¹å˜ä»–ã€‚</p>
<p><strong>Subject</strong> ä¹Ÿæ˜¯ä¸€ä¸ª <code>Observable</code> ä½†æ˜¯ä»–æ˜¯èƒ½å¤ŸåŒæ—¶è¾“å…¥å’Œè¾“å‡ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¯ä»¥åŠ¨æ€(å¼ºåˆ¶)çš„åœ¨ä¸€ä¸ªåºåˆ—ä¸­å‘å‡ºä¿¡å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="comment">// å¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ä¸€ä¸ª `Observable`</span></div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"><span class="comment">// åªè¦ä½ æƒ³å‘å‡ºä¸€ä¸ªæ–°çš„äº‹ä»¶, å°±å¯ä»¥ç”¨ onNext æ–¹æ³• </span></div><div class="line">subject.onNext(<span class="string">"Hey!"</span>)</div><div class="line">subject.onNext(<span class="string">"I'm back!"</span>)</div></pre></td></tr></table></figure>
<p><strong>onNext</strong> æ˜¯ä¸€ä¸ªè¾“å‡ºäº‹ä»¶çš„æ–¹æ³•ã€‚æœ€åæ§åˆ¶å°ä¼šè¾“å‡º</p>
<blockquote>
<p>â€œHey!â€<br>â€œIâ€™m back!â€</p>
</blockquote>
<p><code>Subject</code> åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢? ä¸ºäº†å¾ˆè½»æ¾çš„å°† Rxswift ä¸­å£°æ˜å¼çš„ä¸–ç•Œå’Œæˆ‘ä»¬å¹³å¸¸çš„ä¸–ç•Œè¿æ¥èµ·æ¥ã€‚è®©æˆ‘ä»¬åœ¨éœ€è¦å†™å®ç°å¼çš„ä»£ç çš„æ—¶å€™æ›´ Rx </p>
<p>åœ¨ä¸€ä¸ªçº¯æ­£çš„ Rx çš„ä¸–ç•Œé‡Œã€‚å½“ä½ éœ€è¦æœ‰ä¸€ä¸ªæ›´å®Œç¾çš„æµçš„æ—¶å€™, ä¸ç”¨å»ç®¡è¿™ä¸ª <code>Observable</code> æ˜¯æ€ä¹ˆå®ç°çš„ã€‚è¿™ä¸ªä¸œè¥¿æˆ‘ä¼šå¦å¤–çš„è§£é‡Šã€‚åæ­£, å¦‚æœä½ éœ€è¦ï¼Œ å¤§èƒ†çš„ç”¨å§ã€‚</p>
<p>ä¸Šé¢å¼å…³äº Subject æœ€åŸºæœ¬çš„å†…å®¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆæ›´å¥½çš„ä½¿ç”¨ <strong>Subject</strong></p>
<h3 id="HotğŸ”¥-vs-Coldâ„ï¸"><a href="#HotğŸ”¥-vs-Coldâ„ï¸" class="headerlink" title="HotğŸ”¥ vs Coldâ„ï¸"></a>HotğŸ”¥ vs Coldâ„ï¸</h3><p>åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­å°±å·²ç»æåˆ°è¿‡äº†çƒ­ä¿¡å·ğŸ”¥å’Œå†·ä¿¡å·â„ï¸ã€‚ä»Šå¤©æˆ‘ä»¬åœ¨æ·±å…¥çš„äº†è§£ä¸€ç‚¹å§ï¼Œå› ä¸º <strong>Subject</strong> å®é™…ä¸Šæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°çœŸæ­£çš„çƒ­ä¿¡å·ã€‚</p>
<p>æˆ‘ä»¬ä¸€å®šç¡®å®šäº†ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ <strong>create</strong> åˆ›å»ºä¸€ä¸ª <strong>Observable</strong> çš„æ—¶å€™, ç”±äºæ²¡æœ‰äººè®¢é˜…ä»–ï¼Œæ‰€ä»¥å¥¹æ˜¯ä¸ä¼šå‘é€æ¶ˆæ¯çš„ã€‚åªæœ‰è¢« <strong>subscribe</strong>(è®¢é˜…)ä¹‹åæ‰ä¼šå¼€å§‹å‘é€æ¶ˆæ¯å‡ºæ¥ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å«å®ƒä¸ºå†·ä¿¡å·â„ï¸çš„åŸå› ã€‚å¦‚æœå¾ˆä¸å¹¸ä½ å¿˜äº†è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚ä½ å¯ä»¥å›åˆ°ç¬¬ä¸€ç¯‡æ–‡ç« å»çœ‹çœ‹ã€‚çƒ­ä¿¡å·ğŸ”¥ å°±æ˜¯é‚£ç§å³ä½¿æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šå‘å‡ºæ¶ˆæ¯çš„ä¿¡å·, è¿™ä¹Ÿæ˜¯ <code>subject</code> åšçš„äº‹æƒ…ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"><span class="comment">// è¿™ä¸ªä¿¡å·è¿˜æ²¡æœ‰è¢«è®¢é˜…, æ‰€ä»¥è¿™ä¸ªå€¼ä¸å›è¢«æ¥å—åˆ°</span></div><div class="line">subject.onNext(<span class="string">"Am I too early for the party?"</span>)</div><div class="line"></div><div class="line">observable</div><div class="line">    .subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(text)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"><span class="comment">// è¿™ä¸ªå€¼å‘å‡ºæ¥çš„æ—¶å€™å·²ç»æœ‰ä¸€ä¸ªè®¢é˜…è€…äº†, æ‰€ä»¥è¿™ä¸ªå€¼ä¼šæ‰“å°å‡ºæ¥</span></div><div class="line">subject.onNext(<span class="string">"ğŸ‰ğŸ‰ğŸ‰"</span>)</div></pre></td></tr></table></figure>
<p>å¾ˆç®€å•ç›´æ¥å§ã€‚å¦‚æœåœ¨ç¬¬ä¸€ç¯‡ä¸­ä½ ç†è§£äº†å†·ä¿¡å·çš„è¯, ç†è§£çƒ­ä¿¡å·ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…ã€‚</p>
<h3 id="Subject-Types"><a href="#Subject-Types" class="headerlink" title="Subject Types"></a>Subject Types</h3><p>å¸¸ç”¨çš„ <code>Subject</code> æœ‰ä¸‰ç§ã€‚ ä»–ä»¬å…¶å®éƒ½å·®ä¸å¤š, å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯: åœ¨è®¢é˜…ä¹‹å‰, å®ƒä¼šå¹²ä»€ä¹ˆã€‚</p>
<a id="more"></a>
<h4 id="Publish-Subject"><a href="#Publish-Subject" class="headerlink" title="Publish Subject"></a>Publish Subject</h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å·²ç»è¯´åˆ°äº†ã€‚ <strong>PublishSubject</strong> ä¼šå¿½ç•¥æ‰åœ¨è®¢é˜…ä¹‹å‰å‘å‡ºæ¥çš„ä¿¡å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line">subject.onNext(<span class="string">"Ignored..."</span>)</div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“ä½ åªå…³æ³¨ä½ è®¢é˜…ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™, å°±å¯ä»¥ä½¿ç”¨ <code>PublishSubject</code></p>
<h4 id="Replay-Subjects"><a href="#Replay-Subjects" class="headerlink" title="Replay Subjects"></a>Replay Subjects</h4><p><strong>ReplaySubject</strong> ä¼šå°†æœ€å n ä¸ªå€¼å‘å‡ºæ¥, å³ä½¿æ˜¯è®¢é˜…å‘ç”Ÿä¹‹å‰çš„å€¼ã€‚ è¿™ä¸ª n ä¸ªå€¼è¢«è¢«æ”¾åœ¨ä¸€ä¸ªç¯ä»åŒºé‡Œé¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¼šç¼“æœ‰ 3 ä¸ªå€¼è¢«ä¿ç•™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">ReplaySubject</span>&lt;<span class="type">String</span>&gt;.create(bufferSize: <span class="number">3</span>)</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"></div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject .onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬éœ€è¦çŸ¥é“è®¢é˜…ä¹‹å‰å‘ç”Ÿäº†ä»€ä¹ˆçš„æ—¶å€™, æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>ReplaySubject</code> äº†ã€‚</p>
<h4 id="Behavior-Subject"><a href="#Behavior-Subject" class="headerlink" title="Behavior Subject"></a>Behavior Subject</h4><p><strong>BehaviorSubject</strong> åªä¼šé‡å¤æœ€åä¸€ä¸ªå€¼ã€‚ æ›´å…¶ä»–çš„ Subject çš„åŒï¼Œ ä»–åœ¨åˆ›å»ºçš„æ—¶å€™å°±éœ€è¦ç»™å®šä¸€ä¸ªåˆå§‹å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">BehaviorSubject</span>&lt;<span class="type">String</span>&gt;(value: <span class="string">"Initial value"</span>)</div><div class="line"><span class="keyword">let</span> observable: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = subject</div><div class="line"></div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Not printed!"</span>)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">subject.onNext(<span class="string">"Printed!"</span>)</div></pre></td></tr></table></figure>
<p>å½“ä½ åªéœ€è¦çŸ¥é“æœ€åä¸€ä¸ªå€¼çš„æ—¶å€™ã€‚å°±éœ€è¦ä½¿ç”¨ <code>BehaviorSubject</code></p>
<h3 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h3><p>ä½ å¯ä»¥æŠŠä¸€ä¸ª <code>Observable</code> å’Œ <code>Subject</code> ç»‘å®šåˆ°ä¸€èµ·ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥è®©è¿™ä¸ª <code>Observable</code> å°†å®ƒçš„åºåˆ—é‡Œçš„æ‰€æœ‰å€¼éƒ½å‘é€ç»™è¿™ä¸ª <code>Subject</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"I'm being passed around ğŸ˜²"</span>)</div><div class="line">subject.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observable.subscribe &#123; (event) <span class="keyword">in</span></div><div class="line">    subject.on(event)</div><div class="line">&#125;.addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æœ‰ä¸€ä¸ªè¯­æ³•ç³–æ¥ç®€åŒ–è¿™äº›ä»£ç ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"I'm being passed around ğŸ˜²"</span>)</div><div class="line">subject.subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line">observable.bind(to: subject).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<blockquote>
<p>Iâ€™m being passed around ğŸ˜²</p>
</blockquote>
<p><strong>Warning</strong></p>
<p>Binding ä¸ä»…ä»…ä¼šä¼ é€’å€¼, ä»–ä¹Ÿä¼šæŠŠå®Œæˆå’Œé”™è¯¯éƒ½ä¼ é€’è¿‡æ¥ã€‚è¿™ç§æƒ…å†µä¸‹è¿™ä¸ª <code>Subject</code> å°±ä¼šè¢«é‡Šæ”¾ã€‚</p>
<h3 id="Quick-Example"><a href="#Quick-Example" class="headerlink" title="Quick Example"></a>Quick Example</h3><p>è¿˜æ˜¯æŠŠç¬¬ä¸€ç¯‡æ–‡ç« ä¸­çš„ Demo ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GoogleModel</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> googleString = <span class="type">BehaviorSubject</span>&lt;<span class="type">String</span>&gt;(value: <span class="string">""</span>)</div><div class="line">    <span class="keyword">private</span> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fetchNetString</span><span class="params">()</span></span>  &#123;</div><div class="line">        <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">            <span class="keyword">let</span> session = <span class="type">URLSession</span>.shared</div><div class="line">            <span class="keyword">let</span> task = session.dataTask(with: <span class="type">URL</span>(string: <span class="string">"https://www.google.com"</span>)!, completionHandler: &#123; (data, response, error) <span class="keyword">in</span></div><div class="line">                </div><div class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> err = error &#123;</div><div class="line">                        observer.onError(err)</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="keyword">let</span> googleString = <span class="type">NSString</span>(data: data!, encoding: <span class="number">1</span>) <span class="keyword">as</span> <span class="type">String</span>?</div><div class="line">                        </div><div class="line">                        observer.onNext(googleString!)</div><div class="line">                        observer.onCompleted()</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;)</div><div class="line">            task.resume()</div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create&#123;</div><div class="line">                task.cancel()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// Bind the observable to the subject</span></div><div class="line">        observable.bind(to: googleString).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;        </div><div class="line"><span class="comment">// Bind the observable to the subject</span></div><div class="line">observable.bind(to: googleString).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè§†å›¾æ¨¡å‹å°† <code>googleString</code> è¿™ä¸ª <code>subject</code> æš´éœ²å‡ºæ¥ã€‚è®© <code>ViewController</code> èƒ½å¤Ÿè®¢é˜…ã€‚æˆ‘ä»¬å°†è¿™ä¸ª <code>observable</code> ç»‘å®šåˆ°è¿™ä¸ª <code>subject</code> ä¸Š, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç½‘ç»œè¯·æ±‚æœ‰ç»“æœçš„æ—¶å€™, ç«‹é©¬å°†è¯·æ±‚ç»“æœä¼ é€’åˆ°è¿™ç»™ <code>subject</code>ã€‚</p>
<h3 id="Bonus-Variable"><a href="#Bonus-Variable" class="headerlink" title="Bonus: Variable"></a>Bonus: Variable</h3><p>è·ç¦»å®Œå®Œå…¨å…¨çš„ Rx è¿˜å·®æœ€åä¸€ç‚¹äº†ã€‚å¼ºè¡Œçš„è·å–ä¹‹å‰å‘é€å‡ºæ¥çš„å€¼ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰ <strong>Variable</strong> è¿™ä¸ªä¸œè¥¿äº†ã€‚Variable æ˜¯å¯¹ BehaviorSubject çš„ç®€å•åŒ…è£…ã€‚<a href="https://github.com/ReactiveX/RxSwift/blob/master/RxSwift/Subjects/Variable.swift" target="_blank" rel="external">å¯ä»¥çœ‹ä¸€ä¸‹</a> å®ƒçš„å®ç°æ˜¯éå¸¸ç®€å•çš„ã€‚ä½†å®ƒå´éå¸¸çš„æ–¹ä¾¿ã€‚</p>
<p>è¿˜æ˜¯ç”¨ä¸€ä¸ªå°ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜å§ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬éœ€è¦åœ¨ä»»ä½•æ—¶é—´éƒ½å¯ä»¥å¾—åˆ° â€œgoogleStringâ€ â€œå½“å‰â€ çš„å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> googleString = <span class="type">Variable</span>(<span class="string">"currentString"</span>)</div><div class="line"><span class="comment">// get</span></div><div class="line"><span class="built_in">print</span>(googleString.value)</div><div class="line"><span class="comment">// set</span></div><div class="line">googleString.value = <span class="string">"newString"</span></div><div class="line"><span class="comment">// è®¢é˜…</span></div><div class="line">googleString.asObservable().subscribe(onNext: &#123; (text) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(text)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä½ ä¸€å®šä¼šçˆ±ä¸Šä»–çš„ã€‚è¿™åŸºæœ¬ä¸Šå°±æ˜¯ <strong>RxSwift</strong> çš„ç®€å•æ¨¡å¼äº†ã€‚</p>
<p>çœ‹èµ·æ¥å¾ˆç®€å•å§ï¼Œä½†æ˜¯åˆ«å¿˜äº†ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šçš„å‘çš„ã€‚è¿˜æ˜¯å°å¿ƒä¸ºä¸Šã€‚ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä¼šè®²è®²: æ€ä¹ˆå†™ Rxswift æœ€ä¿é™©ã€‚</p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p>ä½ çŸ¥é“äº†å¤ªå¤šäº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ <code>Subjects</code> äº†</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-3-Subjects.html" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¥½äº†, æ¥ä¸‹æ¥æ˜¯ç¬¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚&lt;strong&gt;Subjects&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å­¦äº†ä¹‹å‰å†…å®¹. æˆ‘ä»¬å¯èƒ½å·²ç»å‘ç°äº†ã€‚ä¹‹å‰å­¦ä¹ çš„å†…å®¹éƒ½æ˜¯ &lt;code&gt;Observables&lt;/code&gt; è¾“å‡ºäº‹ä»¶çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥è®¢é˜…ä»–, å°±èƒ½çŸ¥é“ä»–è¾“å‡ºçš„äº‹ä»¶äº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸èƒ½æ”¹å˜ä»–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Subject&lt;/strong&gt; ä¹Ÿæ˜¯ä¸€ä¸ª &lt;code&gt;Observable&lt;/code&gt; ä½†æ˜¯ä»–æ˜¯èƒ½å¤ŸåŒæ—¶è¾“å…¥å’Œè¾“å‡ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¯ä»¥åŠ¨æ€(å¼ºåˆ¶)çš„åœ¨ä¸€ä¸ªåºåˆ—ä¸­å‘å‡ºä¿¡å·ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; subject = &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä»–ä¹Ÿæ˜¯ä¸€ä¸ª `Observable`&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt; = subject&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable.subscribe(onNext: &amp;#123; (text) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(text)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åªè¦ä½ æƒ³å‘å‡ºä¸€ä¸ªæ–°çš„äº‹ä»¶, å°±å¯ä»¥ç”¨ onNext æ–¹æ³• &lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hey!&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;I&#39;m back!&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;onNext&lt;/strong&gt; æ˜¯ä¸€ä¸ªè¾“å‡ºäº‹ä»¶çš„æ–¹æ³•ã€‚æœ€åæ§åˆ¶å°ä¼šè¾“å‡º&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œHey!â€&lt;br&gt;â€œIâ€™m back!â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;Subject&lt;/code&gt; åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢? ä¸ºäº†å¾ˆè½»æ¾çš„å°† Rxswift ä¸­å£°æ˜å¼çš„ä¸–ç•Œå’Œæˆ‘ä»¬å¹³å¸¸çš„ä¸–ç•Œè¿æ¥èµ·æ¥ã€‚è®©æˆ‘ä»¬åœ¨éœ€è¦å†™å®ç°å¼çš„ä»£ç çš„æ—¶å€™æ›´ Rx &lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªçº¯æ­£çš„ Rx çš„ä¸–ç•Œé‡Œã€‚å½“ä½ éœ€è¦æœ‰ä¸€ä¸ªæ›´å®Œç¾çš„æµçš„æ—¶å€™, ä¸ç”¨å»ç®¡è¿™ä¸ª &lt;code&gt;Observable&lt;/code&gt; æ˜¯æ€ä¹ˆå®ç°çš„ã€‚è¿™ä¸ªä¸œè¥¿æˆ‘ä¼šå¦å¤–çš„è§£é‡Šã€‚åæ­£, å¦‚æœä½ éœ€è¦ï¼Œ å¤§èƒ†çš„ç”¨å§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢å¼å…³äº Subject æœ€åŸºæœ¬çš„å†…å®¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆæ›´å¥½çš„ä½¿ç”¨ &lt;strong&gt;Subject&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;HotğŸ”¥-vs-Coldâ„ï¸&quot;&gt;&lt;a href=&quot;#HotğŸ”¥-vs-Coldâ„ï¸&quot; class=&quot;headerlink&quot; title=&quot;HotğŸ”¥ vs Coldâ„ï¸&quot;&gt;&lt;/a&gt;HotğŸ”¥ vs Coldâ„ï¸&lt;/h3&gt;&lt;p&gt;åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­å°±å·²ç»æåˆ°è¿‡äº†çƒ­ä¿¡å·ğŸ”¥å’Œå†·ä¿¡å·â„ï¸ã€‚ä»Šå¤©æˆ‘ä»¬åœ¨æ·±å…¥çš„äº†è§£ä¸€ç‚¹å§ï¼Œå› ä¸º &lt;strong&gt;Subject&lt;/strong&gt; å®é™…ä¸Šæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°çœŸæ­£çš„çƒ­ä¿¡å·ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸€å®šç¡®å®šäº†ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ &lt;strong&gt;create&lt;/strong&gt; åˆ›å»ºä¸€ä¸ª &lt;strong&gt;Observable&lt;/strong&gt; çš„æ—¶å€™, ç”±äºæ²¡æœ‰äººè®¢é˜…ä»–ï¼Œæ‰€ä»¥å¥¹æ˜¯ä¸ä¼šå‘é€æ¶ˆæ¯çš„ã€‚åªæœ‰è¢« &lt;strong&gt;subscribe&lt;/strong&gt;(è®¢é˜…)ä¹‹åæ‰ä¼šå¼€å§‹å‘é€æ¶ˆæ¯å‡ºæ¥ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å«å®ƒä¸ºå†·ä¿¡å·â„ï¸çš„åŸå› ã€‚å¦‚æœå¾ˆä¸å¹¸ä½ å¿˜äº†è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚ä½ å¯ä»¥å›åˆ°ç¬¬ä¸€ç¯‡æ–‡ç« å»çœ‹çœ‹ã€‚çƒ­ä¿¡å·ğŸ”¥ å°±æ˜¯é‚£ç§å³ä½¿æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šå‘å‡ºæ¶ˆæ¯çš„ä¿¡å·, è¿™ä¹Ÿæ˜¯ &lt;code&gt;subject&lt;/code&gt; åšçš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; subject = &lt;span class=&quot;type&quot;&gt;PublishSubject&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable: &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt; = subject&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// è¿™ä¸ªä¿¡å·è¿˜æ²¡æœ‰è¢«è®¢é˜…, æ‰€ä»¥è¿™ä¸ªå€¼ä¸å›è¢«æ¥å—åˆ°&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Am I too early for the party?&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; (text) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(text)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// è¿™ä¸ªå€¼å‘å‡ºæ¥çš„æ—¶å€™å·²ç»æœ‰ä¸€ä¸ªè®¢é˜…è€…äº†, æ‰€ä»¥è¿™ä¸ªå€¼ä¼šæ‰“å°å‡ºæ¥&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;subject.onNext(&lt;span class=&quot;string&quot;&gt;&quot;ğŸ‰ğŸ‰ğŸ‰&quot;&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¾ˆç®€å•ç›´æ¥å§ã€‚å¦‚æœåœ¨ç¬¬ä¸€ç¯‡ä¸­ä½ ç†è§£äº†å†·ä¿¡å·çš„è¯, ç†è§£çƒ­ä¿¡å·ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Subject-Types&quot;&gt;&lt;a href=&quot;#Subject-Types&quot; class=&quot;headerlink&quot; title=&quot;Subject Types&quot;&gt;&lt;/a&gt;Subject Types&lt;/h3&gt;&lt;p&gt;å¸¸ç”¨çš„ &lt;code&gt;Subject&lt;/code&gt; æœ‰ä¸‰ç§ã€‚ ä»–ä»¬å…¶å®éƒ½å·®ä¸å¤š, å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯: åœ¨è®¢é˜…ä¹‹å‰, å®ƒä¼šå¹²ä»€ä¹ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/tags/Reactive/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part2</title>
    <link href="https://CepheusTeam.github.io/2017/05/07/RxSwift%20For%20Dummies%20Part2/"/>
    <id>https://CepheusTeam.github.io/2017/05/07/RxSwift For Dummies Part2/</id>
    <published>2017-05-06T16:26:57.000Z</published>
    <updated>2017-05-13T04:13:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº† RxSwift åŸºç¡€çš„éƒ¨åˆ†. ç°åœ¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ“ä½œç¬¦, æ¥å­¦ä¹ ä¸€ä¸‹ <strong>FRP</strong> ä¸­çš„<strong>F</strong>(unctional) éƒ¨åˆ†</p>
<h3 id="Schedulers"><a href="#Schedulers" class="headerlink" title="Schedulers"></a>Schedulers</h3><p>æˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹ä¹‹å‰å°±å·²ç»æåˆ°è¿‡çš„, ä½†æ˜¯æ²¡æœ‰è¯¦ç»†ä»‹ç»çš„ <strong>Schedulers</strong></p>
<p><strong>Schedulers</strong> æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å‘Šè¯‰ <code>Observables</code> å’Œè®¢é˜…è€… åº”è¯¥åœ¨å“ªä¸ªçº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ä¸­å‘é€äº‹ä»¶,æˆ–è€…é€šçŸ¥ã€‚</p>
<p>å…³äº <code>Schedulers</code> æœ€å¸¸è§çš„æ“ä½œç¬¦æ˜¯<code>observerOn</code> å’Œ <code>subscribleOn</code></p>
<p>é€šå¸¸æƒ…å†µä¸‹ <code>Observables</code> ä¼šåœ¨å®ƒè¢«è®¢é˜…çš„é‚£ä¸ªçº¿ç¨‹å‘é€äº‹ä»¶æˆ–è€…é€šçŸ¥ã€‚</p>
<h4 id="ObserveOn"><a href="#ObserveOn" class="headerlink" title="ObserveOn"></a>ObserveOn</h4><p><strong>ObserveOn</strong> æŒ‡å®š <code>Observables</code> å‘é€äº‹ä»¶çš„çº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ã€‚å®ƒä¸ä¼šæ”¹å˜å®ƒæ‰§è¡Œçš„çº¿ç¨‹ã€‚</p>
<p>ä¸¾ä¸€ä¸ªè·Ÿ part1 å¾ˆç›¸ä¼¼çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">            observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">            observer.onCompleted()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡è®¾è®¢é˜…è€…æ˜¯ä¸€ä¸ª UI å±‚çš„ä¸œè¥¿ï¼Œ æ¯”å¦‚è¯´æ˜¯ä¸€ä¸ª <code>UIViewController</code> æˆ–è€… <code>UIView</code></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠè¿™ä¸ªä»»åŠ¡æ”¾åœ¨å­çº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œ ä»¥å…é˜»å¡ UI </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DispatchQueue.main.async&#123; ...</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­å»æ›´æ–° UI, ä½ åº”è¯¥çŸ¥é“ <code>UIKit</code> è¦æ±‚å¯¹ <code>UI</code> çš„æ“ä½œéƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚æ‰€ä»¥è¿™äº›æ“ä½œå¯¹ä½ æ¥è¯´ä¸€å®šæ˜¯å¾ˆç†Ÿæ‚‰çš„äº†ã€‚</p>
<p>è®°ä¸‹æ¥ä½¿ç”¨ <strong>ObserveOn</strong> æ¥é‡æ„ä¸€ä¸‹è¿™æ®µä»£ç </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create(&#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">        observer.onCompleted()</div><div class="line">    &#125;</div><div class="line">        <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;).observeOn(<span class="type">MainScheduler</span>.instance)</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åˆ æ‰äº† <code>DispatchQueue.main.async {}</code> ç„¶åæ·»åŠ äº† <code>.observeOn(MainScheduler.instance)</code>ã€‚ è¿™ä¸ªå°±å¯ä»¥è®©æ‰€æœ‰çš„äº‹ä»¶éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ <code>&quot;Hello dummy ğŸ¥&quot;</code> è¿™ä¸ªå…ƒç´ å°±èƒ½å¤Ÿå¾ˆå®‰å…¨çš„è¢«å‘é€ç»™ UI çš„å…ƒç´ ï¼Œ å› ä¸ºæˆ‘ä»¬å¯ä»¥å¾ˆç¡®å®šä»–ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">observable.subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.label.text = element</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>ObserveOn</strong> å¤§æ¦‚æ˜¯æœ€å¸¸è§çš„çº¿ç¨‹è°ƒåº¦æ“ä½œç¬¦äº†ã€‚ä½ å¸Œæœ› <code>Observables</code> åŒ…å«äº†æ‰€æœ‰çš„é€»è¾‘, å’Œçº¿ç¨‹æ“ä½œ, è®©è®¢é˜…è€…å°½å¯èƒ½çš„ç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å†äº†è§£ä¸€ä¸‹ <code>subscribeOn</code> è¿™ä¸ªæ“ä½œç¬¦ã€‚</p>
<h4 id="SubscribeOn-Optional"><a href="#SubscribeOn-Optional" class="headerlink" title="SubscribeOn (Optional)"></a>SubscribeOn (Optional)</h4><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å…ˆè¿›çš„æ“ä½œç¬¦ã€‚ä½ å¯ä»¥å…ˆè·³è¿‡è¿™éƒ¨åˆ†, ä»¥åå†æ¥ç ”ç©¶ğŸ¤</p>
<p><code>subscribeOn</code> è·Ÿ <code>ObserveOn</code> éå¸¸çš„ç›¸ä¼¼ã€‚<strong>ä½†æ˜¯ä»–åªèƒ½æ”¹å˜ <code>Observable</code> å°†è¦æ‰§è¡Œçš„ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹ã€‚</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">    observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125; </div><div class="line">observable</div><div class="line">    .subscribeOn(<span class="type">ConcurrentDispatchQueueScheduler</span>(qos: .<span class="keyword">default</span>))</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.label.text = element</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘åˆ æ‰äº† <code>Observable</code> ä¸­çš„ <code>DispatchQueue.global(qos: .default).async {}</code>  æ˜¯è¿™ä¸ªè®¢é˜…è€…å‘Šè¯‰ä»–åº”è¯¥åœ¨ä¸€ä¸ª <code>global queue</code> ä¸­æ‰§è¡Œä¸‹é¢çš„æ“ä½œ, ä»¥å…é˜»å¡ UI. å¾ˆæ˜æ˜¾è¿™å›å¯¼è‡´ä¸€ä¸ªå¼‚å¸¸çš„æŠ›å‡º, ä¹‹å‰æåˆ°è¿‡ï¼š è¿™å›å¯¼è‡´ <code>Observable</code> åœ¨å…¨å±€é˜Ÿåˆ—ä¸­æ‰§è¡Œ, <strong>ä¹Ÿä¼šåœ¨å…¨å±€é˜Ÿåˆ—ä¸­å‘å‡ºäº‹ä»¶</strong>ã€‚åªéœ€è¦æ·»åŠ åœ¨ <code>Observable</code> ä¸­æ·»åŠ  <code>.observeOn(MainScheduler.instance)</code>å°±èƒ½é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">    observer.onNext(<span class="string">"Hello dummy ğŸ¥"</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">        <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;.observeOn(<span class="type">MainScheduler</span>.instance)      </div><div class="line">observable</div><div class="line">    .subscribeOn(<span class="type">ConcurrentDispatchQueueScheduler</span>(qos: .<span class="keyword">default</span>))</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.label.text = element</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>æ·»åŠ ä¹‹åï¼Œå°±èƒ½å¤Ÿå‘ç°åˆšåˆšè¯´åˆ°çš„é—®é¢˜å·²ç»è§£å†³æ‰äº†ã€‚</p>
<p>æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ <code>observeOn</code> å‘¢ï¼Ÿæœ€å¸¸è§çš„åœºæ™¯æ˜¯:å¦‚æœåœ¨ <code>Observable</code> ä¸éœ€è¦åœ¨åå°æ‰§è¡Œè€—æ—¶æ“ä½œ(è¯»å–æ•°æ®, å¤§çš„è®¡ç®—ä»»åŠ¡)çš„è¯.æˆ‘ä¸è®¤ä¸ºè¿™æ˜¯éå¸¸é¢‘ç¹çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œcome on!  å¤šçŸ¥é“ä¸€ä¸ªä½ èƒ½ç”¨çš„å·¥å…· ğŸ› ä¸æ˜¯ä»¶å¾ˆ cool çš„äº‹æƒ…å—ï¼Ÿ</p>
<h4 id="Scheduler-Types"><a href="#Scheduler-Types" class="headerlink" title="Scheduler Types"></a>Scheduler Types</h4><p>åšä¸º RxSwift èœé¸Ÿ, å¥½å¥‡ <code>observeOn</code> å’Œ <code>MainScheduler.instance</code> æ²¡ä»€ä¹ˆå…³ç³»ã€‚ä½ å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æˆ–è€…ç›´æ¥ä½¿ç”¨å·²ç»åˆ›å»ºå¥½äº†çš„ã€‚å¦‚æœä½ å¾ˆå¥½å¥‡çš„è¯<a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Schedulers.md" target="_blank" rel="external">è¿™é‡Œæœ‰å¾ˆå¤š</a>ã€‚ è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½å¤æ‚çš„ï¼Œ å°±æ˜¯å¯¹ GCD å’Œ NSOperation çš„å°è£…è€Œå·²ã€‚</p>
<a id="more"></a>
<h3 id="Transforming-Operators"><a href="#Transforming-Operators" class="headerlink" title="Transforming Operators"></a>Transforming Operators</h3><p>ç°åœ¨ä½ å·²ç»çŸ¥é“ä¸¤ç§æ“ä½œç¬¦äº†: åˆ›å»ºæ“ä½œç¬¦(<code>create</code>ã€<code>interval</code>ã€<code>just</code>)  å’Œ åŠŸèƒ½æ“ä½œç¬¦(<code>observeOn</code>, <code>subscribeOn</code>)ã€‚ ç°åœ¨å†å­¦ä¸€äº›è½¬æ¢æ“ä½œç¬¦å§ï¼</p>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>è¿™æ˜¯éå¸¸ç®€å•ï¼Œä½†éå¸¸æœ‰ç”¨çš„æ“ä½œç¬¦ã€‚å®ƒä¹Ÿå¯èƒ½æ˜¯ä½ æœªæ¥æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ“ä½œç¬¦å·ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observerable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;        </div><div class="line"><span class="keyword">let</span> boolObservable: <span class="type">Observable</span>&lt;<span class="type">Bool</span>&gt; = observerable.<span class="built_in">map</span>&#123;(element) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">if</span> element == <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line">boolObservable.subscribe(onNext: &#123; (boolElement) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(boolElement)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>Map</strong> æ“ä½œç¬¦å·ï¼Œæ”¹å˜äº†åºåˆ—ä¸­å€¼çš„ç±»å‹ã€‚ä»–æ˜ å°„äº†ä¸€ä¸ª <code>Observable</code> æ‰€ä»¥ä»–ä»¥ä½ å‘Šè¯‰ä»–çš„æ–°çš„æ–¹å¼å‘é€äº‹ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å°†ä¸€ä¸ª <code>Int</code> ç±»å‹çš„ <code>Observable</code> æ˜ å°„æˆäº†ä¸€ä¸ª <code>Bool</code> ç±»å‹ã€‚ </p>
<p>æ‰€ä»¥è¿™ä¸ªä¾‹å­çš„ç»“æœæ˜¯</p>
<blockquote>
<p>true</p>
</blockquote>
<h4 id="Scan"><a href="#Scan" class="headerlink" title="Scan"></a>Scan</h4><p><strong>scan</strong> è¦å¤æ‚ä¸€äº›äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"D"</span>)</div><div class="line">    observer.onNext(<span class="string">"U"</span>)</div><div class="line">    observer.onNext(<span class="string">"M"</span>)</div><div class="line">    observer.onNext(<span class="string">"M"</span>)</div><div class="line">    observer.onNext(<span class="string">"Y"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observable.scan(<span class="string">""</span>) &#123; (lastValue, currentValue) -&gt; <span class="type">String</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> lastValue + currentValue</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¼šè¾“å‡º</p>
<blockquote>
<p>D<br>DU<br>DUM<br>DUMM<br>DUMMY</p>
</blockquote>
<p><strong>scan</strong>æ“ä½œç¬¦, è®©ä½ å¯ä»¥é€šè¿‡ä¸Šä¸€ä¸ªå€¼æ¥æ”¹å˜è¿™ä¸€ä¸ªå€¼ã€‚ä»–ä¹Ÿè¢«ç§°ä½œå…ƒç´ å †ç§¯ã€‚ä¸Šé¢ä»£ç ä¸­çš„ <code>â€œâ€</code>æ˜¯æ‰«æå‚æ•°ä¼ é€’çš„èµ·å§‹å€¼ã€‚è¿˜æ˜¯æƒ³ç€èƒ½å¹²ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    observer.onNext(<span class="number">2</span>)</div><div class="line">    observer.onNext(<span class="number">3</span>)</div><div class="line">    observer.onNext(<span class="number">4</span>)</div><div class="line">    observer.onNext(<span class="number">5</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observable.scan(<span class="number">1</span>) &#123; (lastValue, currentValue) -&gt; <span class="type">Int</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> lastValue + currentValue</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯é€šè¿‡ <strong>scan</strong> æ“ä½œç¬¦è®¡ç®— 5 çš„é˜¶å±‚ã€‚ ç®—å‡ºæ¥çš„ç­”æ¡ˆæ˜¯: 120</p>
<p><a href="http://rx-marin.com/post/rxswift-state-with-scan/" target="_blank" rel="external">Marin ç»™äº†ä¸€ä¸ªæ›´æœ‰ç”¨çš„ä¾‹å­</a> å…³äºæŒ‰é’®çš„ selected çŠ¶æ€</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> button = <span class="type">UIButton</span>()</div><div class="line">button.rx.tap.scan(<span class="literal">false</span>) &#123; last, new <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> !last</div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"tap: <span class="subst">\(element)</span>"</span>)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ çŸ¥é“ä»–èƒ½å¹²ä»€ä¹ˆäº†å§ï¼Ÿ å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„è½¬æ¢æ“ä½œç¬¦ã€‚</p>
<h3 id="Filtering-Operators"><a href="#Filtering-Operators" class="headerlink" title="Filtering Operators"></a>Filtering Operators</h3><p>å‘å‡ºäº‹ä»¶æ˜¯å¾ˆé‡è¦çš„äº‹æƒ…, ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬è¿˜éœ€è¦è¿‡æ»¤æ‰ä¸€äº›æ²¡ç”¨çš„äº‹ä»¶ã€‚è¿™å°±æ˜¯ filter æ“ä½œç¬¦æ‰€åšçš„äº‹ä»€ä¹ˆã€‚</p>
<h4 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h4><p>å†³å®šé‚£äº›äº‹ä»¶æ˜¯è¦å“åº”çš„é‚£äº›æ˜¯è¦è¿‡æ»¤æ‰çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observerable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">observerable.<span class="built_in">filter</span> &#123; (element) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> element == <span class="string">"ğŸ"</span></div><div class="line">&#125;.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<blockquote>
<p>ğŸ<br>ğŸ</p>
</blockquote>
<h4 id="Debounce"><a href="#Debounce" class="headerlink" title="Debounce"></a>Debounce</h4><p>ç®€å•ä¸”æœ‰ç”¨</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observerable</div><div class="line">    .debounce(<span class="number">2</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(element)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>debounce</strong> ä¼šè¿‡æ»¤æ‰2ç§’ä»¥å†…çš„æ‰€æœ‰äº‹ä»¶, å¦‚æœäº‹ä»¶aåœ¨ä¸Šä¸€æ¬¡äº‹ä»¶ä¹‹åçš„0.5ç§’è¢«å‘é€å‡ºæ¥ã€‚é‚£ä¹ˆä»–å°±ä¼šè¢«è¿‡æ»¤æ‰ã€‚å¦‚æœä»–åœ¨ä¸Šæ¬¡äº‹ä»¶çš„2.5ç§’è¢«å‘é€å‡ºæ¥ã€‚é‚£ä¹ˆä»–å°±ä¼šè¢«æ¥å—åˆ°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœå°±ç®—å½“å‰æ—¶é—´ä¹‹åæ²¡æœ‰å…¶ä»–çš„äº‹ä»¶ï¼Œä»–ä¹Ÿè¦åœ¨2ç§’ä¹‹åè¢«å‘é€å‡ºæ¥ã€‚</p>
<blockquote>
<p>è¯‘è€…: éœ€è¦æ³¨æ„çš„ <code>debounce</code> å’Œ <code>throttle</code> çš„åŒºåˆ«ã€‚è¿˜æœ‰ Obj-C ä¸­çš„ <code>ReactiveCocoa</code> ä¸­çš„ throttle çš„åŒºåˆ«ã€‚</p>
</blockquote>
<h3 id="Combining-Operator"><a href="#Combining-Operator" class="headerlink" title="Combining Operator"></a>Combining Operator</h3><p>è”åˆæ“ä½œç¬¦è®©ä½ å¯ä»¥æŠŠå¤šä¸ª <code>Observable</code> è½¬æ¢æˆä¸€ä¸ªã€‚</p>
<h4 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h4><p>åˆå¹¶åªæ˜¯å°†å¤šä¸ª <code>Observable</code> å‘é€çš„äº‹ä»¶åˆå¹¶åˆ°ä¸€ä¸ª <code>Observable</code> ä¸­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.of(observable, observable2).merge().subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ğŸ<br>ğŸ<br>ğŸ’©<br>ğŸ’©</p>
</blockquote>
<h4 id="Zip"><a href="#Zip" class="headerlink" title="Zip"></a>Zip</h4><p><strong>Zip</strong> å°†æ¯ä¸ª <code>Observable</code> å‘å‡ºæ¥çš„å€¼åˆå¹¶æˆä¸€ä¸ªå€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ’©"</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.<span class="built_in">zip</span>(observable ,observable2).subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ğŸğŸ’©<br>ğŸğŸ’©</p>
</blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ“ä½œç¬¦ã€‚è¿˜æ˜¯ä¸¾ä¸€ä¸ªä¾‹å­å§ï¼ å‡å¦‚ä½ æœ‰ä¸¤ä¸ªç½‘ç»œè¯·æ±‚, ä½ éœ€è¦ç­‰åˆ°ä»–ä»¬éƒ½ç»“æŸä¹‹åå†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">3</span>)</div><div class="line">        observer.onNext(<span class="string">"fetched from sever 1"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> observable2 = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">2</span>)</div><div class="line">        observer.onNext(<span class="string">"fetched from sever 2"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line"><span class="type">Observable</span>.<span class="built_in">zip</span>(observable, observable2)</div><div class="line">    .subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(element)</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><strong>Zip</strong> ä¼šç­‰åˆ°ä¸¤ä¸ª <code>Observable</code> éƒ½ç»“æŸä¹‹åå°†ä¸¤ä¸ªè¯·æ±‚çš„ç»“æœåˆå¹¶æˆä¸€ä¸ªå€¼å‘é€å‡ºæ¥ã€‚</p>
<h3 id="Other-Operators"><a href="#Other-Operators" class="headerlink" title="Other Operators"></a>Other Operators</h3><p>è¿˜æœ‰å¾ˆå¤šæœ‰è¶£çš„æ“ä½œç¬¦, æ¯”å¦‚ <code>reduce</code>ã€ <code>takeUntil</code> ç­‰ç­‰ã€‚æˆ‘è®¤ä¸ºå¦‚æœä½ ä»€ä¹ˆæ—¶å€™æœ‰äº†ä¸€äº›æƒ³æ³•, ä½ ä¹Ÿä¼šå¾ˆå®¹æ˜“çš„æ‰¾åˆ°ä»–ä»¬ã€‚ä»–ä»¬éå¸¸çš„å¼ºå¤§, èƒ½è®©ä½ å¿«é€Ÿç®€å•çš„æ“ä½œäº‹ä»¶åºåˆ—ã€‚</p>
<h3 id="Mixing-Operators"><a href="#Mixing-Operators" class="headerlink" title="Mixing Operators"></a>Mixing Operators</h3><p>è¿™ä¸ªæ•™ç¨‹ä¸éœ€è¦å…·ä½“çš„å®ä¾‹é¡¹ç›®, ä½†æ˜¯èƒ½å¿«çš„å°†å„ç§æ“ä½œç¬¦æ­é…ä½¿ç”¨ã€‚æˆ‘ä»¬æ¥åšä¸€ä¸ªå®éªŒå§ï¼šå·¥å…·æ ¹æ®äº‹ä»¶æ”¹å˜è§†å›¾çš„é¢œè‰²ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="type">Observable</span>&lt;<span class="type">NSDate</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="keyword">while</span> <span class="literal">true</span> &#123;</div><div class="line">            <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">0.01</span>)</div><div class="line">            observer.onNext(<span class="type">NSDate</span>())</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;<span class="comment">// éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­åˆ·æ–° UI</span></div><div class="line">    .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">    <span class="comment">// æˆ‘ä»¬åªéœ€è¦èƒ½å¤Ÿè¢«2æ•´é™¤çš„äº‹ä»¶</span></div><div class="line">    .<span class="built_in">filter</span> &#123; (date) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">return</span> <span class="type">Int</span>(date.timeIntervalSince1970) % <span class="number">2</span> == <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// å°†æ•°æ®è½¬æ¢æˆé¢œè‰²</span></div><div class="line">    .<span class="built_in">map</span> &#123; (date) -&gt; <span class="type">UIColor</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">let</span> interval: <span class="type">Int</span> = <span class="type">Int</span>(date.timeIntervalSince1970)</div><div class="line">        <span class="keyword">let</span> color1 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">1</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">let</span> color2 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">2</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">let</span> color3 = <span class="type">CGFloat</span>( <span class="type">Double</span>(((interval * <span class="number">3</span>) % <span class="number">255</span>)) / <span class="number">255.0</span>)</div><div class="line">        <span class="keyword">return</span> <span class="type">UIColor</span>(red: color1, green: color2, blue: color3, alpha: <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">    .subscribe(onNext: &#123;[<span class="keyword">weak</span> <span class="keyword">self</span>] (color) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.demoView.backgroundColor = color</div><div class="line">    &#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>You can find more examples in the <a href="https://github.com/ReactiveX/RxSwift/blob/master/Rx.playground/Pages/Combining_Operators.xcplaygroundpage/Contents.swift" target="_blank" rel="external">RxSwfit playgrounds</a></p>
<h3 id="Thatâ€™s-it"><a href="#Thatâ€™s-it" class="headerlink" title="Thatâ€™s it!"></a>Thatâ€™s it!</h3><p>ä½ çŸ¥é“äº†å¤ªå¤šäº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ <code>Subjects</code> äº†</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-2-Operators.html" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº† RxSwift åŸºç¡€çš„éƒ¨åˆ†. ç°åœ¨æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ“ä½œç¬¦, æ¥å­¦ä¹ ä¸€ä¸‹ &lt;strong&gt;FRP&lt;/strong&gt; ä¸­çš„&lt;strong&gt;F&lt;/strong&gt;(unctional) éƒ¨åˆ†&lt;/p&gt;
&lt;h3 id=&quot;Schedulers&quot;&gt;&lt;a href=&quot;#Schedulers&quot; class=&quot;headerlink&quot; title=&quot;Schedulers&quot;&gt;&lt;/a&gt;Schedulers&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹ä¹‹å‰å°±å·²ç»æåˆ°è¿‡çš„, ä½†æ˜¯æ²¡æœ‰è¯¦ç»†ä»‹ç»çš„ &lt;strong&gt;Schedulers&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Schedulers&lt;/strong&gt; æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å‘Šè¯‰ &lt;code&gt;Observables&lt;/code&gt; å’Œè®¢é˜…è€… åº”è¯¥åœ¨å“ªä¸ªçº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ä¸­å‘é€äº‹ä»¶,æˆ–è€…é€šçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;å…³äº &lt;code&gt;Schedulers&lt;/code&gt; æœ€å¸¸è§çš„æ“ä½œç¬¦æ˜¯&lt;code&gt;observerOn&lt;/code&gt; å’Œ &lt;code&gt;subscribleOn&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é€šå¸¸æƒ…å†µä¸‹ &lt;code&gt;Observables&lt;/code&gt; ä¼šåœ¨å®ƒè¢«è®¢é˜…çš„é‚£ä¸ªçº¿ç¨‹å‘é€äº‹ä»¶æˆ–è€…é€šçŸ¥ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ObserveOn&quot;&gt;&lt;a href=&quot;#ObserveOn&quot; class=&quot;headerlink&quot; title=&quot;ObserveOn&quot;&gt;&lt;/a&gt;ObserveOn&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;ObserveOn&lt;/strong&gt; æŒ‡å®š &lt;code&gt;Observables&lt;/code&gt; å‘é€äº‹ä»¶çš„çº¿ç¨‹æˆ–è€…é˜Ÿåˆ—ã€‚å®ƒä¸ä¼šæ”¹å˜å®ƒæ‰§è¡Œçš„çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸€ä¸ªè·Ÿ part1 å¾ˆç›¸ä¼¼çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.main.async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‡è®¾è®¢é˜…è€…æ˜¯ä¸€ä¸ª UI å±‚çš„ä¸œè¥¿ï¼Œ æ¯”å¦‚è¯´æ˜¯ä¸€ä¸ª &lt;code&gt;UIViewController&lt;/code&gt; æˆ–è€… &lt;code&gt;UIView&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬æŠŠè¿™ä¸ªä»»åŠ¡æ”¾åœ¨å­çº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œ ä»¥å…é˜»å¡ UI &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;DispatchQueue.main.async&amp;#123; ...&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­å»æ›´æ–° UI, ä½ åº”è¯¥çŸ¥é“ &lt;code&gt;UIKit&lt;/code&gt; è¦æ±‚å¯¹ &lt;code&gt;UI&lt;/code&gt; çš„æ“ä½œéƒ½å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚æ‰€ä»¥è¿™äº›æ“ä½œå¯¹ä½ æ¥è¯´ä¸€å®šæ˜¯å¾ˆç†Ÿæ‚‰çš„äº†ã€‚&lt;/p&gt;
&lt;p&gt;è®°ä¸‹æ¥ä½¿ç”¨ &lt;strong&gt;ObserveOn&lt;/strong&gt; æ¥é‡æ„ä¸€ä¸‹è¿™æ®µä»£ç &lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create(&amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).observeOn(&lt;span class=&quot;type&quot;&gt;MainScheduler&lt;/span&gt;.instance)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬åˆ æ‰äº† &lt;code&gt;DispatchQueue.main.async {}&lt;/code&gt; ç„¶åæ·»åŠ äº† &lt;code&gt;.observeOn(MainScheduler.instance)&lt;/code&gt;ã€‚ è¿™ä¸ªå°±å¯ä»¥è®©æ‰€æœ‰çš„äº‹ä»¶éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ &lt;code&gt;&amp;quot;Hello dummy ğŸ¥&amp;quot;&lt;/code&gt; è¿™ä¸ªå…ƒç´ å°±èƒ½å¤Ÿå¾ˆå®‰å…¨çš„è¢«å‘é€ç»™ UI çš„å…ƒç´ ï¼Œ å› ä¸ºæˆ‘ä»¬å¯ä»¥å¾ˆç¡®å®šä»–ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¢«å‘é€å‡ºå»ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;observable.subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.label.text = element&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;ObserveOn&lt;/strong&gt; å¤§æ¦‚æ˜¯æœ€å¸¸è§çš„çº¿ç¨‹è°ƒåº¦æ“ä½œç¬¦äº†ã€‚ä½ å¸Œæœ› &lt;code&gt;Observables&lt;/code&gt; åŒ…å«äº†æ‰€æœ‰çš„é€»è¾‘, å’Œçº¿ç¨‹æ“ä½œ, è®©è®¢é˜…è€…å°½å¯èƒ½çš„ç®€å•ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å†äº†è§£ä¸€ä¸‹ &lt;code&gt;subscribeOn&lt;/code&gt; è¿™ä¸ªæ“ä½œç¬¦ã€‚&lt;/p&gt;
&lt;h4 id=&quot;SubscribeOn-Optional&quot;&gt;&lt;a href=&quot;#SubscribeOn-Optional&quot; class=&quot;headerlink&quot; title=&quot;SubscribeOn (Optional)&quot;&gt;&lt;/a&gt;SubscribeOn (Optional)&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸å…ˆè¿›çš„æ“ä½œç¬¦ã€‚ä½ å¯ä»¥å…ˆè·³è¿‡è¿™éƒ¨åˆ†, ä»¥åå†æ¥ç ”ç©¶ğŸ¤&lt;/p&gt;
&lt;p&gt;&lt;code&gt;subscribeOn&lt;/code&gt; è·Ÿ &lt;code&gt;ObserveOn&lt;/code&gt; éå¸¸çš„ç›¸ä¼¼ã€‚&lt;strong&gt;ä½†æ˜¯ä»–åªèƒ½æ”¹å˜ &lt;code&gt;Observable&lt;/code&gt; å°†è¦æ‰§è¡Œçš„ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribeOn(&lt;span class=&quot;type&quot;&gt;ConcurrentDispatchQueueScheduler&lt;/span&gt;(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.label.text = element&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘åˆ æ‰äº† &lt;code&gt;Observable&lt;/code&gt; ä¸­çš„ &lt;code&gt;DispatchQueue.global(qos: .default).async {}&lt;/code&gt;  æ˜¯è¿™ä¸ªè®¢é˜…è€…å‘Šè¯‰ä»–åº”è¯¥åœ¨ä¸€ä¸ª &lt;code&gt;global queue&lt;/code&gt; ä¸­æ‰§è¡Œä¸‹é¢çš„æ“ä½œ, ä»¥å…é˜»å¡ UI. å¾ˆæ˜æ˜¾è¿™å›å¯¼è‡´ä¸€ä¸ªå¼‚å¸¸çš„æŠ›å‡º, ä¹‹å‰æåˆ°è¿‡ï¼š è¿™å›å¯¼è‡´ &lt;code&gt;Observable&lt;/code&gt; åœ¨å…¨å±€é˜Ÿåˆ—ä¸­æ‰§è¡Œ, &lt;strong&gt;ä¹Ÿä¼šåœ¨å…¨å±€é˜Ÿåˆ—ä¸­å‘å‡ºäº‹ä»¶&lt;/strong&gt;ã€‚åªéœ€è¦æ·»åŠ åœ¨ &lt;code&gt;Observable&lt;/code&gt; ä¸­æ·»åŠ  &lt;code&gt;.observeOn(MainScheduler.instance)&lt;/code&gt;å°±èƒ½é¿å…è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ¥&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;.observeOn(&lt;span class=&quot;type&quot;&gt;MainScheduler&lt;/span&gt;.instance)      &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;observable&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribeOn(&lt;span class=&quot;type&quot;&gt;ConcurrentDispatchQueueScheduler&lt;/span&gt;(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;))&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    .subscribe(onNext: &amp;#123; [&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;] (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;?.label.text = element&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ·»åŠ ä¹‹åï¼Œå°±èƒ½å¤Ÿå‘ç°åˆšåˆšè¯´åˆ°çš„é—®é¢˜å·²ç»è§£å†³æ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ &lt;code&gt;observeOn&lt;/code&gt; å‘¢ï¼Ÿæœ€å¸¸è§çš„åœºæ™¯æ˜¯:å¦‚æœåœ¨ &lt;code&gt;Observable&lt;/code&gt; ä¸éœ€è¦åœ¨åå°æ‰§è¡Œè€—æ—¶æ“ä½œ(è¯»å–æ•°æ®, å¤§çš„è®¡ç®—ä»»åŠ¡)çš„è¯.æˆ‘ä¸è®¤ä¸ºè¿™æ˜¯éå¸¸é¢‘ç¹çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œcome on!  å¤šçŸ¥é“ä¸€ä¸ªä½ èƒ½ç”¨çš„å·¥å…· ğŸ› ä¸æ˜¯ä»¶å¾ˆ cool çš„äº‹æƒ…å—ï¼Ÿ&lt;/p&gt;
&lt;h4 id=&quot;Scheduler-Types&quot;&gt;&lt;a href=&quot;#Scheduler-Types&quot; class=&quot;headerlink&quot; title=&quot;Scheduler Types&quot;&gt;&lt;/a&gt;Scheduler Types&lt;/h4&gt;&lt;p&gt;åšä¸º RxSwift èœé¸Ÿ, å¥½å¥‡ &lt;code&gt;observeOn&lt;/code&gt; å’Œ &lt;code&gt;MainScheduler.instance&lt;/code&gt; æ²¡ä»€ä¹ˆå…³ç³»ã€‚ä½ å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æˆ–è€…ç›´æ¥ä½¿ç”¨å·²ç»åˆ›å»ºå¥½äº†çš„ã€‚å¦‚æœä½ å¾ˆå¥½å¥‡çš„è¯&lt;a href=&quot;https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Schedulers.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™é‡Œæœ‰å¾ˆå¤š&lt;/a&gt;ã€‚ è¿™ä¹Ÿæ²¡ä»€ä¹ˆå¥½å¤æ‚çš„ï¼Œ å°±æ˜¯å¯¹ GCD å’Œ NSOperation çš„å°è£…è€Œå·²ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/tags/Reactive/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift For Dummies ğŸ£ Part1</title>
    <link href="https://CepheusTeam.github.io/2017/05/06/RxSwift%20For%20Dummies%20Part1/"/>
    <id>https://CepheusTeam.github.io/2017/05/06/RxSwift For Dummies Part1/</id>
    <published>2017-05-06T10:20:45.000Z</published>
    <updated>2017-05-13T16:09:40.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>RxSwift</strong> çœŸçš„æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ã€‚éå¸¸é—æ†¾çš„æ˜¯æˆ‘æ²¡æœ‰ç ”ç©¶æ‰€æœ‰çš„æ¶æ„æ¨¡å¼MVVM VIPER Routingã€‚</p>
<p>è¦éå¸¸å¥½çš„è®²å‡ºæ¥RxSwiftåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿè¯´ä¸å¥½ã€‚æ¯•ç«Ÿä»–èƒ½åšå¤ªå¤šçš„äº‹æƒ…äº†ã€‚æ™®éè®¤ä¸ºï¼Œä»–æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¸­éå¸¸é‡è¦çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚åœ¨æœ€åˆçš„å®šä¹‰ä¸­,ä»–å¹¶ä¸å°±æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ã€‚ä»–æœ€åˆçš„è®¾è®¡çµæ„Ÿå°±æ˜¯æ¥è‡ªäºå‡½æ•°å“åº”å¼(<strong>FRP</strong>), æ‰€ä»¥ä¹Ÿå¯ä»¥è¯´å®ƒåŒ…å«äº†å‡½æ•°å“åº”å¼çš„ç‰¹æ€§ã€‚</p>
<p>å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ <strong>FRP</strong> çš„è¯, ä¸ç”¨æ‹…å¿ƒ, åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½ ä¼šè‡ªç„¶è€Œç„¶çš„ç†è§£ä»€ä¹ˆæ˜¯ <strong>FRP</strong>ã€‚</p>
<p>é€šè¿‡å¯¹ RXSwift çš„æ·±å…¥ç ”ç©¶, æˆ‘å¾—åˆ°äº†å¾ˆå¤šçš„å¯å‘, åŒæ—¶ä¹Ÿè¢«å¾ˆå¤šçš„é—®é¢˜å›°æ‰°ã€‚ç›¸ä¿¡ä½ ä¹Ÿä¼šè¿™æ ·ã€‚</p>
<p>éœ€è¦èŠ±å¾ˆå¤šä¸ªå°æ—¶çš„æ—¶é—´æ¥é€‚åº”æ–°çš„æ€ç»´æ¨¡å¼ï¼Œå”¯ä¸€èƒ½ç¡®å®šçš„æ˜¯ï¼Œä¸€æ—¦ä½ é€‚åº”äº†ï¼Œä½ å°±å†ä¹Ÿä¸æƒ³å›åˆ°ä»å‰äº†ã€‚</p>
<p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä¼šå°½å¯èƒ½çš„èŠ‚çº¦ä½ çš„æ—¶é—´ï¼Œå¹¶ä¸”è§£é‡Šçš„å°½å¯èƒ½çš„è¯¦ç»†ã€‚æƒ³æ•™å¹¼å„¿å›­çš„å°æœ‹å‹ä¸€æ ·ã€‚</p>
<p>å¼€å§‹å­¦ä¹ ä¹‹å‰, è¯·ç¡®å®šä½ å·²ç»æŒæ¡äº† Swift å’Œ UIkit çš„åŸºç¡€çŸ¥è¯†. </p>
<h3 id="The-Why"><a href="#The-Why" class="headerlink" title="The Why?"></a>The Why?</h3><p>å†™ UI çš„æ—¶å€™ç»å¸¸ä¼šå¤„ç†ä¸€äº›å¼‚æ­¥çš„æ“ä½œã€‚æˆ‘ä»¬å¾ˆæ—©å°±çŸ¥é“è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°è¿™ä¸ªä¸œè¥¿ã€‚æˆ‘ç›¸ä¿¡ä½ ç°åœ¨å·²ç»éå¸¸ç†Ÿæ‚‰ä»£ç†æ¨¡å¼äº†ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§å¾ˆé…·çš„è®¾è®¡æ¨¡å¼ã€‚ä½†æ˜¯å†™èµ·æ¥çœŸçš„å¾ˆçƒ¦ğŸ˜¡ã€‚</p>
<center><br><img src="http://swiftpearls.com/images/cry.jpg" alt=""><br></center>

<ul>
<li>ä»£ç†æ¨¡å¼éœ€è¦äº›å¾ˆå¤šçš„æ¨¡ç‰ˆä»£ç : åˆ›å»ºä¸€ä¸ªåè®®, å£°æ˜ä¸€ä¸ª <code>delegate</code> å˜é‡, éµå®ˆåè®®, è®¾ç½®ä»£ç†â€¦</li>
<li>å†™å®Œè¿™ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ,å¯èƒ½ä½ ä¸å°å¿ƒå°±å¿˜äº†å…¶ä¸­çš„æŸä¸ªæ­¥éª¤ã€‚ æ¯”å¦‚è¯´ <code>object.delegete = self</code></li>
<li>ç®¡ç†èµ·æ¥éå¸¸éº»çƒ¦ã€‚ä»–éœ€è¦åœ¨å¥½å‡ ä¸ªæ–‡ä»¶ä¸­è·³è·ƒã€‚</li>
</ul>
<p>RxSwift è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä»–èƒ½å¤Ÿè®©ä½ é€šè¿‡å£°æ˜çš„æ–¹å¼ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚å‡å°‘äº†ç®¡ç†çš„è´Ÿæ‹…, å½“ç„¶ï¼Œä¹Ÿä¸ç”¨å†™é‚£ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ã€‚</p>
<p>æˆ‘åˆšåˆšå¼€å§‹äº†ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œè‡³ä»Šè¿˜æ²¡æœ‰å†™ä¸€ä¸ª <code>delegate</code></p>
<h3 id="Basic-Example"><a href="#Basic-Example" class="headerlink" title="Basic Example"></a>Basic Example</h3><p>talk is cheap, show you the code.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleClass</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">runExample</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// OBSERVABLE //</span></div><div class="line">        <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span></div><div class="line">            <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">                <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">                observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div><div class="line">                observer.onCompleted()</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// OBSERVER //</span></div><div class="line">        </div><div class="line">        observable.subscribe(onNext:&#123; (element) <span class="keyword">in</span></div><div class="line">            <span class="built_in">print</span>(element)</div><div class="line">        &#125;).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯æœ€åŸºæœ¬çš„ä¾‹å­, åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­, æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª runExample æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œçš„æ˜¯ä¸€äº› RxSwift ä¸­çš„äº‹æƒ…ã€‚æƒ³ä¸€ä¸‹åœ¨è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿäº†ä»€ä¹ˆå§ã€‚</p>
<a id="more"></a>
<h3 id="Observable-ğŸ“¡"><a href="#Observable-ğŸ“¡" class="headerlink" title="Observable ğŸ“¡"></a>Observable ğŸ“¡</h3><p>æˆ‘ä»¬è¿˜æ˜¯ä» RxSwift ä¸­æœ€åŸºæœ¬çš„æ„å»ºå•å…ƒå¼€å§‹å§ã€‚ <code>Observable</code>ã€‚ å®ƒå…¶å®éå¸¸çš„ç®€å•ã€‚ <code>Observable</code> æ‰§è¡ŒæŸäº›åŠ¨ä½œ, ç„¶åè§‚å¯Ÿè€…èƒ½å¤Ÿå¯¹æ­¤ä½œå‡ºä¸€äº›ååº”ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span></div><div class="line">    <span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;</div><div class="line">        <span class="comment">// Simulate some work</span></div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">10</span>)</div><div class="line">        observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div><div class="line">        observer.onCompleted()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">                </div><div class="line">observable.subscribe(onNext:&#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ª <code>Observable</code> ä¿¡å·äº†ã€‚è¿™ç§ä¿¡å·åªæœ‰åœ¨è¢«è®¢é˜…ä¹‹åæ‰ä¼šæ‰§è¡Œå®ƒä¹Ÿè¢«å«åš:å†·ä¿¡å·â„ï¸ã€‚ç›¸åçƒ­ä¿¡å·ğŸ”¥æ˜¯é‚£ç§æ—¢æ˜¯æ²¡æœ‰è¢«è®¢é˜…ä¹Ÿä¼šæ‰§è¡Œçš„ä¿¡å·ã€‚</p>
<p>åœ¨ä¸‹ä¸€æ­¥ä»¬æˆ‘ä»¬ä¼šå…·ä½“çš„è®²è§£äºŒè€…çš„åŒºåˆ«ã€‚ç°åœ¨ä½ åªéœ€è¦ç†è§£çš„æ˜¯: å› ä¸ºä½ åˆå§‹åŒ–å‡ºæ¥çš„æ˜¯ä¸€ä¸ªå†·â„ï¸ä¿¡å·<code>Hello dummy ğŸ£</code>è¿™ä¸ªå€¼æ˜¯ä¸ä¼šè¢«å‘é€å‡ºæ¥çš„ã€‚å†·ä¿¡å·â„ï¸åªæœ‰åœ¨æœ‰ä¸œè¥¿è®¢é˜…ä¹‹åæ‰ä¼šå‘é€æ¶ˆæ¯ã€‚</p>
<p>æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¥åˆ†æä¸€ä¸‹è¿™ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.global(qos: .<span class="keyword">default</span>).async &#123;...&#125;</div></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç ä¿è¯è¿™ä¸ª <code>Observable</code> ä¿¡å·åœ¨ä¸»çº¿ç¨‹ä¸­å‘é€æ¶ˆæ¯ã€‚å…¶å® RxSwift æ˜¯æœ‰ä¸€ä¸ªè°ƒåº¦æœºåˆ¶, ä½†æ˜¯æˆ‘ç°åœ¨è¿˜ä¸æƒ³é‚£ä¹ˆæ—©å‘Šè¯‰ä½ , ä¸ç„¶ä½ è¯¥è®°ä¸å€¼äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">observer.onNext(<span class="string">"Hello dummy ğŸ£"</span>)</div></pre></td></tr></table></figure>
<p>ä¸€ä¸ª <code>Observable</code> ä¿¡å·å‘å‡ºçš„æ¶ˆæ¯ä»æ—¶é—´ä¸Šæ¥çœ‹, å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ª <strong>åºåˆ—</strong>ã€‚åœ¨è¿™ä¸ªåºåˆ—ä¸­å¯èƒ½æœ‰æ— é™å¤šçš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>onNext</code> æ–¹æ³•ç±»å°†è¿™äº›å€¼å‘é€å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">observer.onCompleted()</div></pre></td></tr></table></figure>
<p>å½“è¿™ä¸ªåºåˆ—å·²ç»å‘é€å®Œäº†æ‰€æœ‰çš„å€¼ä¹‹åï¼Œå®ƒå¯ä»¥å‘é€ä¸€ä¸ª <code>Completed</code> æˆ–è€… <code>Error</code>å‡ºæ¥ã€‚ä¹‹åè¿™ä¸ªä¿¡å·å°±ä¸èƒ½åœ¨äº§ç”Ÿæ›´å¤šçš„å€¼äº†, ç„¶åå°±ä¼šéšç€ä¸€ä¸ªé—­åŒ…è¢«é‡Šæ”¾æ‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create()</div></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ª  <code>Observable</code> ä¿¡å·éƒ½è¦è¿”å›ä¸€ä¸ª <code>Disposable</code>.</p>
<p>ä½¿ç”¨ <code>Disposables.create()</code> å¦‚æœä½ ä¸æƒ³åœ¨ä¿¡å·è¢«é‡Šæ”¾çš„æ—¶å€™å¤„ç†å…¶ä»–äº‹æƒ…ã€‚ä½ å¯ä»¥çœ‹çœ‹<a href="https://github.com/ReactiveX/RxSwift/blob/master/RxSwift/Disposables/NopDisposable.swift" target="_blank" rel="external">NopDisposable</a>çš„å®ç°ï¼Œä½ ä¼šå‘ç°ï¼Œä»–ä»€ä¹ˆäº‹æƒ…éƒ½æ²¡æœ‰åšï¼Œåªæ˜¯ä¸€äº›ç©ºæ–¹æ³•ã€‚</p>
<h3 id="Disposable"><a href="#Disposable" class="headerlink" title="Disposable"></a>Disposable</h3><p><code>Disposable</code> å¯¹è±¡å¿…é¡»è¦åœ¨ <code>Observable</code> ä¸­è¿”å›, å®ƒæ˜¯ç”¨æ¥åœ¨<code>Observable</code>ä¸èƒ½å†æ­£å¸¸çš„å®Œæˆçš„æ—¶å€™æ¸…é™¤æ‰è¿™äº›ä¿¡å·çš„ã€‚æ¯”å¦‚è¯´ä½ å¯ä»¥ä½¿ç”¨ <strong>AnonymousDisposable</strong>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line">    connection.close()</div><div class="line">    database.closeImportantSomething()</div><div class="line">    cache.clear()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>åªæœ‰å½“ä¿¡å·è¢«æå‰é‡Šæ”¾æˆ–è€…ç¨‹åºæ‰‹åŠ¨è°ƒç”¨äº† <code>dispose()</code> æ–¹æ³•, <code>Disposable</code> æ‰ä¼šè¢«è°ƒç”¨ã€‚ä½†æ˜¯åœ¨å¤šæ•°æƒ…å†µä¸‹, <code>dispose()</code> æ–¹æ³•éƒ½æ˜¯é€šè¿‡ <strong>Dispose Bags</strong> è‡ªåŠ¨è°ƒç”¨çš„ã€‚åˆ«ç€æ€¥ï¼Œä½ å¯ä»¥åœ¨ä¸€äº›æ›´å…·ä½“çš„ä¾‹å­ä¸­è‡ªå·±å®ç°è¿™ä¸ªä¸œè¥¿ã€‚</p>
<h3 id="Observer-ğŸ•µ"><a href="#Observer-ğŸ•µ" class="headerlink" title="Observer ğŸ•µ"></a>Observer ğŸ•µ</h3><p>æˆ‘ä»¬åˆ›å»ºçš„ <code>Observable</code> æ˜¯å†·ä¿¡å·â„ï¸ã€‚ é™¤éæˆ‘ä»¬è®¢é˜…äº†å®ƒï¼Œä¸ç„¶å®ƒæ˜¯ä¸ä¼šå‘é€ä¿¡å·çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">observable.subscribe(onNext: &#123;(element) <span class="keyword">in</span></div><div class="line">  <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯è®¢é˜…ä¿¡å·çš„æ–¹æ³•ã€‚åœ¨ <code>subscribeNext</code> æ–¹æ³•ä¸­ä¸€ä¸ªè®¢é˜…å°±å‘ç”Ÿäº†ã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ª <code>Disposable</code>.è¿™ä¸ª <code>Disposable</code> å°±æ˜¯å¯¹è¿™ä¸ªè®¢é˜…çš„è®°å½•</p>
<p>è¿™ä¸ª <code>Observable</code> å°±å¼€å§‹å·¥ä½œäº†, 10ç§’ä¹‹å, ä½ å°±ä¼šåœ¨æ§åˆ¶å°çœ‹è§</p>
<blockquote>
<p>Hello dummy ğŸ£</p>
</blockquote>
<p><code>subscribe(onNext:)</code> åªä¼šåœ¨Nextäº‹ä»¶å‘é€å‡ºæ¥çš„æ—¶å€™å“åº”ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>subscribe(onCompleted:)</code> å’Œ <code>subscribe(onError:)</code> å“åº”å¯¹åº”çš„äº‹ä»¶ã€‚</p>
<h3 id="Dispose-Bag-ğŸ—‘"><a href="#Dispose-Bag-ğŸ—‘" class="headerlink" title="Dispose Bag ğŸ—‘"></a>Dispose Bag ğŸ—‘</h3><p>å”¯ä¸€ä¸€ä¸ªè¿˜æœ‰ç‚¹ç¥ç§˜çš„ä¸œè¥¿å°±æ˜¯ <code>addDisposableTo</code> è¿™ä¸ªæ–¹æ³•äº†ã€‚</p>
<blockquote>
<p>Dispose bags are used to return ARC like behavior to RX. When a DisposeBag is deallocated, it will call dispose on each of the added disposables.</p>
<p>Dispose bags å°±åƒæ˜¯ä¸€ä¸ªåƒåœ¾ç­ã€‚å°±åƒæ˜¯ AutoreleasePool ä¸€æ ·ï¼Œå½“è¿™ä¸ªåƒåœ¾ç­è¢«é‡Šæ”¾çš„æ—¶å€™, é‡Œé¢çš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p>
</blockquote>
<p>å½“ä½ è®¢é˜…ä¸€ä¸ªä¿¡å·çš„æ—¶å€™, ä½ å°±éœ€è¦æŠŠä½ åˆ›å»ºå‡ºæ¥çš„ <code>Disposable</code> æ·»åŠ åˆ°è¿™ä¸ªæ¡†é‡Œé¢ã€‚å½“è¿™çš„æ¡†è¢«é‡Šæ”¾çš„æ—¶å€™(ExampleClass å¯¹è±¡ dealloc çš„æ—¶å€™)ã€‚è¿™äº›æ²¡æœ‰æ‰§è¡Œå®Œçš„<code>Disposable</code>å°±ä¼šè¢«é‡Šæ”¾æ‰ã€‚</p>
<p>å®ƒè¢«ç”¨ä½œé‡Šæ”¾åœ¨é—­åŒ…ä¸­å¼•ç”¨çš„å€¼, ä»¥åŠæ²¡ç”¨çš„èµ„æº, æ¯”å¦‚è¯´, ä¸€ä¸ª HTTP ç½‘ç»œè¿æ¥, æ•°æ®åº“è¿æ¥, æˆ–è€…æ˜¯ç¼“å­˜çš„å¯¹è±¡ã€‚</p>
<p>å¦‚æœä½ è¿˜æ˜¯ä¸æ‡‚, ä¸€ä¼šå„¿å†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚</p>
<h3 id="Observable-operators"><a href="#Observable-operators" class="headerlink" title="Observable operators"></a>Observable operators</h3><p><code>create</code> åªæ˜¯ä¿¡å·è¯¸å¤šæ“ä½œæ–¹æ³•ä¸­çš„ä¸€ä¸ªè€Œå·²ï¼Œå®ƒè¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ ReactiveX<br>çš„<a href="http://reactivex.io/documentation/operators.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ã€‚å“ªé‡Œæœ‰æ‰€æœ‰çš„æ“ä½œæ–¹æ³•ã€‚æˆ‘åªæ˜¯ä¸¾ä¸€äº›å¸¸è§çš„ä¾‹å­ã€‚</p>
<h4 id="Just"><a href="#Just" class="headerlink" title="Just"></a>Just</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.just(<span class="string">"Hello again dummy ğŸ¥"</span>);</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div><div class="line">        </div><div class="line">observable.subscribe(onCompleted: &#123; </div><div class="line">    <span class="built_in">print</span>(<span class="string">"I'm done"</span>)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>Hello again dummy ğŸ¥<br>Iâ€™m done</p>
</blockquote>
<p><strong>Just</strong> just åˆ›å»ºäº†ä¸€ä¸ªæ™ºèƒ½é‡Šæ”¾ä¸€ä¸ªå€¼çš„ä¿¡å·ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªä¿¡å·åºåˆ—ä¸­çš„äº‹ä»¶ï¼Œæ˜¯è¿™æ ·çš„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.Next(&quot;Hello&quot;) -&gt;  .Completed</div></pre></td></tr></table></figure>
<h4 id="Interval"><a href="#Interval" class="headerlink" title="Interval"></a>Interval</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">0.3</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">   <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>0<br>1<br>2<br>3<br>â€¦</p>
</blockquote>
<p><strong>Interval</strong> æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“çš„æ“ä½œç¬¦å·ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­, å®ƒä» 0 æ¯0.3ç§’é€’å¢, <code>scheduler</code> æ˜¯ç”¨æ¥å®šä¹‰å¼‚æ­¥è¡Œä¸ºçš„ã€‚</p>
<h4 id="Repeat"><a href="#Repeat" class="headerlink" title="Repeat"></a>Repeat</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> observable = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.repeatElement(<span class="string">"This is fun ğŸ™„"</span>)</div><div class="line">observable.subscribe(onNext: &#123; (element) <span class="keyword">in</span></div><div class="line">   <span class="built_in">print</span>(element)</div><div class="line">&#125;).addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>This is fun ğŸ™„<br>This is fun ğŸ™„<br>This is fun ğŸ™„<br>This is fun ğŸ™„<br>â€¦</p>
</blockquote>
<p><strong>repeat</strong> ä¼šæ— é™çš„é‡å¤æˆ‘ä»¬ç»™å®šçš„å€¼ã€‚ä½ å¯ä»¥é€šè¿‡å®šä¹‰ <code>scheduler</code> ç±»å‹çš„æ–¹æ³•æ¥æ§åˆ¶çº¿ç¨‹çš„è¡Œä¸ºã€‚</p>
<p>ç›®å‰ä¸ºæ­¢, å¯èƒ½éƒ½ä¸æ˜¯éå¸¸çš„ç»™åŠ›ã€‚ä½†æ˜¯çŸ¥é“å…¶ä»–çš„æ“ä½œæ˜¯å¿…è¦çš„ã€‚å¦å¤–ä¸€ä»¶å¾ˆé‡è¦çš„äº‹æƒ…æ¶˜ï¼Œè¿™æ˜¯ RxSwift æœ€æœ‰ç”¨çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="Real-life-example"><a href="#Real-life-example" class="headerlink" title="Real life example"></a>Real life example</h3><p>ç°åœ¨æˆ‘ä»¬å¼€å§‹å¿«é€Ÿçš„é€šè¿‡ä¸€ä¸ªä¾‹å­å·©å›ºä¸€ä¸‹è¿™äº›çŸ¥è¯†ã€‚æˆ‘ä»¬å¯¹ RxSwift çš„äº†è§£ç›®å‰ä¸ºæ­¢æ˜¯éå¸¸æœ‰é™çš„ã€‚æ‰€æœ‰æˆ‘ä»¬å…ˆä½¿ç”¨ä¸€ä¸ªç®€å•çš„ MVC çš„ä¾‹å­ã€‚æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œ å®ƒå¯ä»¥ä» google ä¸Šè·å–æ•°æ®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Foundation</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">GoogleModel</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createGoogleDataObservable</span><span class="params">()</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create(&#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">            </div><div class="line">            <span class="keyword">let</span> session = <span class="type">URLSession</span>.shared</div><div class="line">            <span class="keyword">let</span> task = session.dataTask(with: <span class="type">URL</span>(string: <span class="string">"https://www.google.com"</span>)!) &#123; (data, response, error) <span class="keyword">in</span></div><div class="line">                </div><div class="line">                <span class="comment">// æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­æ›´æ–°</span></div><div class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</div><div class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> err = error &#123;</div><div class="line">                        <span class="comment">// å¦‚æœè¯·æ±‚å¤±è´¥, ç›´æ¥å‘å¤„å¤±è´¥çš„äº‹ä»¶</span></div><div class="line">                        observer.onError(err)</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="comment">// è§£ææ•°æ®</span></div><div class="line">                        <span class="keyword">if</span> <span class="keyword">let</span> googleString = <span class="type">String</span>(data: data!, encoding: .ascii) &#123;</div><div class="line">                            <span class="comment">// å°†æ•°æ®å‘é€å‡ºå»</span></div><div class="line">                            observer.onNext(googleString)</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            <span class="comment">// å¦‚æœè§£æå¤±è´¥å‘é€å¤±è´¥çš„äº‹ä»¶</span></div><div class="line">                            observer.onNext(<span class="string">"Error! Unable to parse the response data from google!"</span>)</div><div class="line">                        &#125;</div><div class="line">                        <span class="comment">// ç»“æŸè¿™ä¸ªåºåˆ—</span></div><div class="line">                        observer.onCompleted()</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            task.resume()</div><div class="line">            </div><div class="line">            <span class="comment">// è¿”å›ä¸€ä¸ª AnonymousDisposable</span></div><div class="line">            <span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line">                <span class="comment">// å–æ¶ˆè¯·æ±‚</span></div><div class="line">                task.cancel()</div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ˜¯éå¸¸ç®€å•çš„ã€‚ <code>createGoogleDataObservable</code>ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¯ä»¥è¢«è®¢é˜…çš„ä¿¡å·ã€‚è¿™ä¸ªä¿¡å·åˆ›å»ºäº†ä¸€ä¸ªä» google è·å–æ•°æ®çš„ä»»åŠ¡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="type">DispatchQueue</span>.main.async &#123;...&#125;</div></pre></td></tr></table></figure>
<p>URLSession çš„ä»»åŠ¡æ˜¯åœ¨åå°çº¿ç¨‹ä¸­è¿›è¡Œçš„, æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ UI çº¿ç¨‹ä¸­æ›´æ–°ã€‚è®°ä½è¿˜æœ‰ä¸€ä¸ª <code>schedulers</code> è¿™ä¼šåœ¨æ›´é«˜çº§çš„é˜¶æ®µä»‹ç»å‡ºæ¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="type">Disposables</span>.create(with: &#123;</div><div class="line"> task.cancel()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>Disposable</code> æ˜¯ä¸€ä¸ªç»™é•¿ç»™åŠ›çš„æœºåˆ¶ï¼š å¦‚æœè®¢é˜…è€…åœæ­¢è®¢é˜…è¿™ä¸ªä¿¡å·äº†ã€‚è¿™ä¸ªä»»åŠ¡å°±ä¼šè¢«å–æ¶ˆã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯è®¢é˜…è€…è¿™éƒ¨åˆ†çš„å†…å®¹äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"><span class="keyword">import</span> RxCocoa</div><div class="line"><span class="keyword">import</span> RxSwift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// é€šå¸¸å°±æ˜¯è¿™æ ·åˆ›å»º DisposeBag çš„</span></div><div class="line">    <span class="comment">// å½“è¿™ä¸ª controller è¢«é‡Šæ”¾æ‰çš„æ—¶å€™ï¼Œdisposebag</span></div><div class="line">    <span class="comment">// ä¹Ÿä¼šé‡Šæ”¾æ‰, å¹¶ä¸”æ‰€æœ‰ bag ä¸­çš„å…ƒç´ éƒ½ä¼šè°ƒç”¨ dispose() æ–¹æ³•</span></div><div class="line">    <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">let</span> model = <span class="type">GoogleModel</span>()</div><div class="line">    </div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> googleText: <span class="type">UITextView</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        <span class="comment">// è®°ä½ä½¿ç”¨ [weak self] æˆ–è€… [unowned self] æ¥é¿å…å¾ªç¯å¼•ç”¨</span></div><div class="line">        model.createGoogleDataObservable()</div><div class="line">            .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (element) <span class="keyword">in</span></div><div class="line">                <span class="keyword">self</span>?.googleText.text = element</div><div class="line">            &#125;).addDisposableTo(disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¥å¥‡å—ï¼Ÿæ²¡æœ‰åè®®, æ²¡æœ‰ä»£ç†ã€‚åªæ˜¯å£°æ˜äº†ä¸€ä¸‹åœ¨ä¸€ä¸ªäº‹æƒ…å‘ç”Ÿçš„æ—¶å€™åº”è¯¥åšä»€ä¹ˆã€‚</p>
<p>åœ¨é—­åŒ…ä¸­è®°å¾—ä½¿ç”¨ <code>[weak self]</code> æˆ–è€… <code>[unowned self]</code> æ¥é¿å…å¾ªç¯å¼•ç”¨</p>
<p>è¿˜æœ‰ä¸€ç§æ›´å“åº”å¼çš„æ–¹æ³•æ¥ä¸º <code>UITextView</code> ç»‘å®šæ–‡æœ¬, ç»‘å®šã€‚ä½†é‚£æ˜¯æ›´é«˜çº§çš„å†…å®¹ã€‚</p>
<h3 id="Dispose-Bag-Example"><a href="#Dispose-Bag-Example" class="headerlink" title="Dispose Bag Example"></a>Dispose Bag Example</h3><p>ä½ å¯èƒ½å·²ç»å‘ç°äº† <code>disposeBag</code> æ˜¯ <code>ViewController</code> çš„ä¸€ä¸ªæˆå‘˜å˜é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div></pre></td></tr></table></figure>
<p>å½“è¿™ä¸ªæ§åˆ¶å™¨è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œå®ƒä¹Ÿä¼šé‡Šæ”¾æ‰è¿™ä¸ª <code>disposeBag</code> .</p>
<p>å¦‚æœè¿™ä¸ª <code>disposeBag</code> è¢«é‡Šæ”¾æ‰ä¹‹å, å®ƒæˆ‘ä»¬æ·»åŠ åˆ°è¿™ä¸ª bag é‡Œé¢æ‰€æœ‰çš„ä¿¡å·éƒ½ä¼šè¢«é‡Šæ”¾æ‰ã€‚è€Œè¿™ä¸ªç½‘ç»œè¯·æ±‚ä»»åŠ¡å¦‚æœè¿˜æ²¡æœ‰ç»“æŸçš„è¯ä¹Ÿä¼šè¢«å–æ¶ˆã€‚<br>å¸Œæœ›æˆ‘è®²æ¸…æ¥šäº† <code>DisposeBag</code> çš„æœºåˆ¶ã€‚</p>
<h3 id="Thatâ€˜s-itï¼"><a href="#Thatâ€˜s-itï¼" class="headerlink" title="Thatâ€˜s itï¼"></a>Thatâ€˜s itï¼</h3><p>Demo æˆ‘å·²ç»æ”¾åœ¨ <a href="https://github.com/CepheusTeam/Translate" target="_blank" rel="external">GitHub</a> ä¸Šäº†ã€‚</p>
<p>åˆ°ç°åœ¨, æˆ‘ä»¬å·²ç»å­¦åˆ°äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ª Observable å’Œ è®¢é˜…è€…ã€‚ä»¥åŠ disposing æœºåˆ¶æ˜¯æ€ä¹ˆå›äº‹ã€‚å¸Œæœ›ä½ èƒ½å¤Ÿç†è§£åˆ°è¿™æ ·åšæ¯”å¹³å¸¸çš„è§‚å¯Ÿè€…æ¨¡å¼æœ‰ä»€ä¹ˆä¼˜åŠ¿ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æ˜¯å…³äº RxSwift æ“ä½œç¬¦çš„ã€‚</p>
<p><a href="http://swiftpearls.com/RxSwift-for-dummies-1-Observables.html#basic-example" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>æˆ‘æ˜¯ä¸€åæ¥è‡ªä¸­å›½çš„ iOS ç¨‹åºå‘˜, å¯¹æŠ€æœ¯æœ‰ç€æµ“åšçš„å…´è¶£, åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­, å‘ç°äº†å¾ˆå¤šæ¥è‡ªå›½å¤–çš„ä¼˜ç§€åšå®¢ã€‚ä¸ºäº†æ›´å¥½çš„å­¦ä¹ è¿™äº›æ–‡ç« , äº§ç”Ÿäº†å°†è¿™äº›æ–‡ç« ç¿»è¯‘æˆä¸­æ–‡çš„æƒ³æ³•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;RxSwift&lt;/strong&gt; çœŸçš„æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ã€‚éå¸¸é—æ†¾çš„æ˜¯æˆ‘æ²¡æœ‰ç ”ç©¶æ‰€æœ‰çš„æ¶æ„æ¨¡å¼MVVM VIPER Routingã€‚&lt;/p&gt;
&lt;p&gt;è¦éå¸¸å¥½çš„è®²å‡ºæ¥RxSwiftåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä¹Ÿè¯´ä¸å¥½ã€‚æ¯•ç«Ÿä»–èƒ½åšå¤ªå¤šçš„äº‹æƒ…äº†ã€‚æ™®éè®¤ä¸ºï¼Œä»–æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¸­éå¸¸é‡è¦çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚åœ¨æœ€åˆçš„å®šä¹‰ä¸­,ä»–å¹¶ä¸å°±æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ã€‚ä»–æœ€åˆçš„è®¾è®¡çµæ„Ÿå°±æ˜¯æ¥è‡ªäºå‡½æ•°å“åº”å¼(&lt;strong&gt;FRP&lt;/strong&gt;), æ‰€ä»¥ä¹Ÿå¯ä»¥è¯´å®ƒåŒ…å«äº†å‡½æ•°å“åº”å¼çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ &lt;strong&gt;FRP&lt;/strong&gt; çš„è¯, ä¸ç”¨æ‹…å¿ƒ, åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ä½ ä¼šè‡ªç„¶è€Œç„¶çš„ç†è§£ä»€ä¹ˆæ˜¯ &lt;strong&gt;FRP&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¯¹ RXSwift çš„æ·±å…¥ç ”ç©¶, æˆ‘å¾—åˆ°äº†å¾ˆå¤šçš„å¯å‘, åŒæ—¶ä¹Ÿè¢«å¾ˆå¤šçš„é—®é¢˜å›°æ‰°ã€‚ç›¸ä¿¡ä½ ä¹Ÿä¼šè¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦èŠ±å¾ˆå¤šä¸ªå°æ—¶çš„æ—¶é—´æ¥é€‚åº”æ–°çš„æ€ç»´æ¨¡å¼ï¼Œå”¯ä¸€èƒ½ç¡®å®šçš„æ˜¯ï¼Œä¸€æ—¦ä½ é€‚åº”äº†ï¼Œä½ å°±å†ä¹Ÿä¸æƒ³å›åˆ°ä»å‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä¼šå°½å¯èƒ½çš„èŠ‚çº¦ä½ çš„æ—¶é—´ï¼Œå¹¶ä¸”è§£é‡Šçš„å°½å¯èƒ½çš„è¯¦ç»†ã€‚æƒ³æ•™å¹¼å„¿å›­çš„å°æœ‹å‹ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å§‹å­¦ä¹ ä¹‹å‰, è¯·ç¡®å®šä½ å·²ç»æŒæ¡äº† Swift å’Œ UIkit çš„åŸºç¡€çŸ¥è¯†. &lt;/p&gt;
&lt;h3 id=&quot;The-Why&quot;&gt;&lt;a href=&quot;#The-Why&quot; class=&quot;headerlink&quot; title=&quot;The Why?&quot;&gt;&lt;/a&gt;The Why?&lt;/h3&gt;&lt;p&gt;å†™ UI çš„æ—¶å€™ç»å¸¸ä¼šå¤„ç†ä¸€äº›å¼‚æ­¥çš„æ“ä½œã€‚æˆ‘ä»¬å¾ˆæ—©å°±çŸ¥é“è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°è¿™ä¸ªä¸œè¥¿ã€‚æˆ‘ç›¸ä¿¡ä½ ç°åœ¨å·²ç»éå¸¸ç†Ÿæ‚‰ä»£ç†æ¨¡å¼äº†ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§å¾ˆé…·çš„è®¾è®¡æ¨¡å¼ã€‚ä½†æ˜¯å†™èµ·æ¥çœŸçš„å¾ˆçƒ¦ğŸ˜¡ã€‚&lt;/p&gt;
&lt;center&gt;&lt;br&gt;&lt;img src=&quot;http://swiftpearls.com/images/cry.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;ä»£ç†æ¨¡å¼éœ€è¦äº›å¾ˆå¤šçš„æ¨¡ç‰ˆä»£ç : åˆ›å»ºä¸€ä¸ªåè®®, å£°æ˜ä¸€ä¸ª &lt;code&gt;delegate&lt;/code&gt; å˜é‡, éµå®ˆåè®®, è®¾ç½®ä»£ç†â€¦&lt;/li&gt;
&lt;li&gt;å†™å®Œè¿™ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ,å¯èƒ½ä½ ä¸å°å¿ƒå°±å¿˜äº†å…¶ä¸­çš„æŸä¸ªæ­¥éª¤ã€‚ æ¯”å¦‚è¯´ &lt;code&gt;object.delegete = self&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç®¡ç†èµ·æ¥éå¸¸éº»çƒ¦ã€‚ä»–éœ€è¦åœ¨å¥½å‡ ä¸ªæ–‡ä»¶ä¸­è·³è·ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;RxSwift è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä»–èƒ½å¤Ÿè®©ä½ é€šè¿‡å£°æ˜çš„æ–¹å¼ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚å‡å°‘äº†ç®¡ç†çš„è´Ÿæ‹…, å½“ç„¶ï¼Œä¹Ÿä¸ç”¨å†™é‚£ä¹ˆå¤šæ¨¡ç‰ˆä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åˆšåˆšå¼€å§‹äº†ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œè‡³ä»Šè¿˜æ²¡æœ‰å†™ä¸€ä¸ª &lt;code&gt;delegate&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;Basic-Example&quot;&gt;&lt;a href=&quot;#Basic-Example&quot; class=&quot;headerlink&quot; title=&quot;Basic Example&quot;&gt;&lt;/a&gt;Basic Example&lt;/h3&gt;&lt;p&gt;talk is cheap, show you the code.&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ExampleClass&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; disposeBag = &lt;span class=&quot;type&quot;&gt;DisposeBag&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;runExample&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// OBSERVABLE //&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; observable = &lt;span class=&quot;type&quot;&gt;Observable&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&amp;gt;.create &amp;#123; (observer) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Disposable&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;type&quot;&gt;DispatchQueue&lt;/span&gt;.global(qos: .&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;).async &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                &lt;span class=&quot;type&quot;&gt;Thread&lt;/span&gt;.sleep(forTimeInterval: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                observer.onNext(&lt;span class=&quot;string&quot;&gt;&quot;Hello dummy ğŸ£&quot;&lt;/span&gt;)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;                observer.onCompleted()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Disposables&lt;/span&gt;.create()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// OBSERVER //&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        observable.subscribe(onNext:&amp;#123; (element) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(element)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &amp;#125;).addDisposableTo(disposeBag)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™å°±æ˜¯æœ€åŸºæœ¬çš„ä¾‹å­, åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­, æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª runExample æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œçš„æ˜¯ä¸€äº› RxSwift ä¸­çš„äº‹æƒ…ã€‚æƒ³ä¸€ä¸‹åœ¨è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿäº†ä»€ä¹ˆå§ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/tags/Reactive/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>MVVM design pattern and RxSwift</title>
    <link href="https://CepheusTeam.github.io/2017/05/06/MVVM%20design%20pattern%20and%20RxSwift/"/>
    <id>https://CepheusTeam.github.io/2017/05/06/MVVM design pattern and RxSwift/</id>
    <published>2017-05-05T17:35:57.000Z</published>
    <updated>2017-05-13T04:14:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ª(<a href="http://lukagabric.com/mvvm-design-pattern-and-rxswift/" target="_blank" rel="external">http://lukagabric.com/mvvm-design-pattern-and-rxswift/</a>)</p>
<h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p>MVVM æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚ä»–æ˜¯ç¨‹åºçš„ä»£ç åˆ†ç¦»æˆä¸‰ä¸ªéƒ¨åˆ†: <code>Model</code>ã€<code>View</code>ã€<code>ViewModel</code>ã€‚ <code>Model</code> ä»£è¡¨æ•°æ®çš„è¡¨ç°, <code>View</code> ä»£è¡¨ç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼Œ<code>ViewModel</code> ä»£è¡¨ç€æ¨¡å‹å±‚å’Œè§†å›¾å±‚çš„ä¸»è¦å…³è”å…³ç³»ã€‚</p>
<h4 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h4><p><code>Model</code> å°±æ˜¯æ•°æ®å±‚ã€‚ä»–åŒ…æ‹¬ä¸€å®šèŒƒå›´å†…çš„æ¨¡å‹ï¼Œå’Œä¸šåŠ¡é€»è¾‘ã€‚ <code>Model</code> å¹¶ä¸åªæ˜¯ä½ ç¨‹åºä¸­çš„é‚£äº›æ¨¡å‹ç»“æ„ä½“æˆ–è€…æ•°æ®åº“, ä»–ä¹ŸåŒ…å«äº†ä¸€äº› Service æˆ–è€…ç»„ä»¶, æ¯”å¦‚è¯´ <code>Alamofire</code>å’Œä¸€äº› SDK ç­‰ç­‰ã€‚</p>
<p><code>Model</code> å±‚æ‰§è¡Œæ‰€æœ‰è·Ÿæ•°æ®æœ‰å…³çš„æ“ä½œã€‚æ¯”å¦‚å¸¸è§çš„å¢åˆ æ”¹æŸ¥ç­‰ç­‰ã€‚è¿™äº›æ“ä½œç”± <code>ViewModel</code> å‘èµ·ã€‚å½“ <code>Model</code>æ“ä½œå®Œäº†æ•°æ®ä¹‹åå®ƒå†å‘Šè¯‰ <code>ViewModel</code> ç»“æœã€‚</p>
<p><code>Model</code> è¢« ViewModel æŒæœ‰ã€‚ä»–ä¹Ÿå¹¶ä¸çŸ¥é“è§†å›¾å±‚å’Œ <code>ViewModel</code> å±‚çš„äº‹æƒ…ã€‚å› ä¸ºä»–æ˜¯å’Œè¿™ä¸¤ä¸ªä¸œè¥¿å®Œå…¨éš”ç¦»å¼€çš„ã€‚</p>
<h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><p><code>View</code> æ˜¯ç¨‹åºä¸­æ•°æ®çš„å¯è§†åŒ–å±•ç¤ºã€‚å®ƒæ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ã€‚ä»–ä¸»è¦æœ‰æ¥å—ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå’Œå°†æ•°æ®å±•ç¤ºåœ¨ç•Œé¢ä¸Šä¸¤ä¸ªäººç‰©ã€‚å®ƒå°†ç”¨æˆ·äº¤äº’çš„äº‹ä»¶è½¬å‘åˆ° <code>ViewModel</code> ä¸­è¿›è¡Œå¤„ç†ã€‚<code>View</code> è§‚å¯Ÿ <code>ViewModel</code> ä¸­æ•°æ®çš„å˜åŒ–, å¹¶ä¸”å°†è¿™äº›å˜åŒ–å±•ç°å‡ºæ¥ã€‚</p>
<p><code>View</code> å’Œ <code>Model</code> ä¹‹é—´æ²¡æœ‰ä»»ä½•ç›´æ¥çš„å…³è”ã€‚ ä»–ä»¬é€šè¿‡ <code>View</code> æŒæœ‰çš„ <code>ViewModel</code> äº§ç”Ÿå…³è”ã€‚</p>
<p>ç•Œé¢ä¿¡æ¯åœ¨ <code>xib</code> æˆ–è€… <code>StoryBoard</code> ä¸­é€šè¿‡ <code>UIKit</code> ä¸­çš„ç»„ä»¶è¢«å®šä¹‰ã€‚<code>ViewController</code> æ˜¯ç›´æ¥è·Ÿ <code>xib</code> æˆ–è€… <code>StoryBoard</code> å…³è”çš„ã€‚å®ƒåŒ…å«äº† <code>Xib</code> æˆ–è€… <code>StoryBoard</code> ä¸­çš„ <code>outlets</code> å’Œä¸€äº›å®šä¹‰ UI çš„é¢å¤–é…ç½®ã€‚ä»–ä¹Ÿè´Ÿè´£ç®¡ç† <code>View</code> çš„ç”Ÿå‘½å‘¨æœŸã€‚ åœ¨ MVVM ä¸­ä»–å’Œ <code>View</code> çš„å…³è”æ˜¯éå¸¸ç´§å¯†çš„, ä»–å…¶å®å°±æ˜¯ <code>View</code> å±‚çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h4 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h4><p><code>ViewModel</code> æ˜¯ç¨‹åºçš„é€»è¾‘å±‚ã€‚ä»–å¤„ç†ç”¨æˆ·äº¤äº’è¡Œä¸ºã€‚ç„¶åæ›´æ–°æ•°æ®ã€‚ç„¶ååœ¨é€šçŸ¥ <code>View</code> æ–°çš„æ•°æ®å’Œæ˜¾ç¤ºçš„æ–¹å¼ã€‚ä¸¾ä¸€ä¸ªå¾ˆå¹³å¸¸çš„ä¾‹å­ã€‚ä¸€ä¸ª ViewModel ä»Modelå±‚ä¸­è¯·æ±‚åˆ°äº†ä¸€äº›åŒ…å« <code>Date</code> çš„æ¨¡å‹ã€‚ è¿™ä¸ª Date å€¼å¹¶ä¸ä¼šè¢«å‘Šè¯‰ç»™ View, ViewModel å‘Šè¯‰ View çš„åº”è¯¥æ˜¯è¢«æ ¼å¼åŒ–ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è§†å›¾ä¸ä¼šæ“ä½œæ•°æ®æœ¬èº«ï¼Œä»–åªè´Ÿè´£å°† ViewModel å‡†å¤‡å¥½çš„æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚</p>
<h4 id="Similar-to-MVC"><a href="#Similar-to-MVC" class="headerlink" title="Similar to MVC"></a>Similar to MVC</h4><p>åœ¨ MVC è®¾è®¡æ¨¡å¼ä¸­, <code>ViewController</code> æ˜¯ <code>Model</code> å’Œ <code>View</code> ä¹‹é—´çš„æ¡¥æ¢ã€‚ä»–åªæœ‰è§†å›¾, ç®¡ç†è§†å›¾çš„ç»“æ„ï¼Œç®¡ç†ç”¨æˆ·çš„äº¤äº’ã€‚ä»–è¿˜è´Ÿè´£ç®¡ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸ,åŠ è½½ã€æ˜¾ç¤ºã€æ¶ˆå¤±ç­‰ã€‚ä»–å…·æœ‰çš„å¦å¤–ä¸€ä¸ªæŒ‡è´£æ˜¯æ›´æ–°æ¨¡å‹æ•°æ®, è¿™å°±åŒ…æ‹¬äº†æ˜¾ç¤ºæ•°æ®çš„ç›¸å…³é€»è¾‘(ä¹Ÿå°±æ˜¯æ•°æ®çš„å¤„ç†,å¦‚ä¸Šæ–‡æåˆ°çš„è®² <code>Date</code> è½¬åŒ–æˆ <code>String</code> çš„é€»è¾‘)ã€‚å› ä¸ºä»–å…·æœ‰è¿™ä¹ˆå¤šçš„èŒè´£ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹ <code>Viewcontroller</code> å°±ä¼šå˜çš„éå¸¸å¤§ã€‚æ‰€ä»¥ä¹Ÿæœ‰äººç§°MVC ä¸º Massive View Controller</p>
<p>å‡ºç°å¤æ‚çš„ <code>viewController</code> ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ã€‚ç”±äº <code>Controller</code> æœ‰å¾ˆå¤šçš„èŒè´£ã€‚ä»£ç å°±ä¼šå˜çš„éå¸¸çš„å¤æ‚ã€‚è¿™å¾ˆæ˜æ˜¾å°±è¿èƒŒäº†å•ä¸€èŒè´£è¿™ä¸ªåŸåˆ™ã€‚è¿™ä¹Ÿè®©æµ‹è¯• <code>Controller</code> ä¸­çš„é€»è¾‘å˜æˆä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚<code>Controller</code> å’Œ <code>View</code> çš„é«˜åº¦è€¦åˆã€‚<code>view</code> çš„ç”Ÿå‘½å‘¨æœŸä½¿å¾—é€»è¾‘çš„åˆ†ç¦»å˜çš„ä¸é‚£ä¹ˆå®¹æ˜“ã€‚æˆ‘ä»¬å°±éœ€è¦èŠ±å¾ˆå¤§çš„ç²¾åŠ›æ¥å¤„ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>MVVM å’Œ MVC éå¸¸ç›¸ä¼¼ã€‚ æ­£å¦‚å‰æ–‡æ‰€è¯´ã€‚ MVC ä¸­çš„ <code>Controller</code> åŒæ—¶åŒ…å«äº†è§†å›¾å’Œç¨‹åºçš„é€»è¾‘ã€‚å°†é€»è¾‘ç›¸å…³çš„ä»£ç ä» <code>Controller</code> ä¸­åˆ†ç¦»å‡ºæ¥, æ”¾åˆ°ä»–è‡ªå·±æŠ½è±¡å‡ºæ¥çš„ç±»é‡Œé¢å»ã€‚è¿™æ—¶å€™çš„ <code>Controller</code>å°±åªå…³æ³¨è§†å›¾ç›¸å…³çš„äº‹æƒ…ã€‚åˆšåˆšåˆ†ç¦»å‡ºæ¥çš„è¿™ä¸ªç±»å¤„ç†ç›¸å…³çš„é€»è¾‘ã€‚è¿™ä¸ªç±»å°±æ˜¯ ViewModelã€‚ä»–å’Œ <code>Controller</code> å…·æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æ‰€ä»¥è¯´ MVVM å°±æ˜¯å°†é€»è¾‘ä»£ç ä» <code>controller</code>ä¸­åˆ†ç¦»åˆ° <code>ViewModel</code> ä¸­çš„ MVC</p>
<h4 id="Binding-data-from-ViewModel-to-View"><a href="#Binding-data-from-ViewModel-to-View" class="headerlink" title="Binding data from ViewModel to View"></a>Binding data from ViewModel to View</h4><p>æœ‰å¾ˆå¤šå°†æ•°æ®ç»‘å®šçš„æœºåˆ¶, æ¯”å¦‚ Swift ä¸­çš„å±æ€§è§‚å¯Ÿã€‚è§†å›¾å¯ä»¥å¯¹å¤–æä¾›ä¸€ä¸ª Closure æ¥è¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚è¿™ä¸ª Closure ç”¨æ¥é€šçŸ¥ View ä»–å…³è”çš„å±æ€§çš„æ›´æ–°ã€‚é™¤äº†ç†Ÿæ‚‰è§‚å¯Ÿã€‚æˆ‘ä»¬çš„ç¨‹åºè¿˜ç»å¸¸éœ€è¦å¤„ç†å„ç§å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œå’Œé€šçŸ¥æˆ–è€…äº‹ä»¶çš„æµä¿¡æ¯ã€‚å‡½æ•°å“åº”å¼ç¼–ç¨‹(FRP)æ¡†æ¶ç®€ç›´å°±æ˜¯ä¸ºäº†å¤„ç†è¿™ç±»äº‹ä»¶è€Œç”Ÿçš„ã€‚ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šFRP æ¡†æ¶ï¼Œå¯¹ iOS å¼€å‘æ¥è¯´ï¼Œæœ€å‡ºåçš„åº”è¯¥æ˜¯ <code>RxSwift</code> å’Œ <code>ReactiveCocoa</code>äº†ã€‚ä¹‹å‰åœ¨ä¸€ç¯‡å¯¹æ¯”æ–‡ç« ä¸­æœ‰æåˆ°è¿‡, ä¸ç®¡æ€æ ·ï¼Œæˆ‘æ›´å–œæ¬¢ <code>RxSwift</code> </p>
<h3 id="RxSwift"><a href="#RxSwift" class="headerlink" title="RxSwift"></a>RxSwift</h3><p>æŒ‡ä»¤å¼ç¼–ç¨‹æ˜¯åŸºäºä¸€æ­¥ä¸€æ­¥æ˜ç¡®çš„æŒ‡ä»¤æ¥æ‰§è¡Œçš„ã€‚ä»–è¯¦ç»†çš„æè¿°äº†ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚å€¼åšä¸ºçŠ¶æ€è€Œå­˜åœ¨ã€‚ç”±äºç¨‹åºæ˜¯ä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œçš„,æ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼åœ¨ä¹‹åå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¸€æ”¹å˜ä¹Ÿä¸ä¼šè¢«ä¼ åˆ°ä¸‹ä¸€æ­¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æŒ‡ä»¤å¼ç¼–ç¨‹</span></div><div class="line">a = <span class="number">1</span></div><div class="line">b = <span class="number">2</span></div><div class="line"><span class="built_in">c</span> = a + b  <span class="comment">// c = 3</span></div><div class="line">a = <span class="number">5</span>   <span class="comment">// c = 3</span></div></pre></td></tr></table></figure>
<p>å“åº”å¼ç¼–ç¨‹,è·ŸæŒ‡ä»¤å¼ç›¸åã€‚ä»–æ˜¯åŸºäºå˜åŒ–çš„ã€‚ä»–åŸºäºå£°æ˜å¼ç¼–ç¨‹ï¼Œè¿™å°±æ„å‘³ç€ä»–å…³æ³¨çš„æ˜¯ç¨‹åºåº”è¯¥å®Œæˆä»€ä¹ˆï¼Œè€Œä¸æ˜¯ç¨‹åºæ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚å®ƒæ˜¯é€šè¿‡æ•°å­¦è¿ç®—å’Œå…¶ä»–åƒæ˜¯ <code>filter</code> <code>map</code> <code>reduce</code> ä¹‹ç±»çš„è¿ç®—æ“ä½œçš„è¿ç”¨æ¥å®ç°çš„ã€‚å¦‚ä½•å‡†ç¡®çš„è¿è¡Œè¢«äº¤ç»™åº•å±‚çš„ç¨‹åºè¯­è¨€æˆ–è€…æ¡†æ¶æ¥è€ƒè™‘äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å“åº”å¼ç¼–ç¨‹</span></div><div class="line">a = <span class="number">1</span></div><div class="line">b = <span class="number">2</span></div><div class="line"><span class="built_in">c</span> = a + b <span class="comment">// c = 3</span></div><div class="line">a = <span class="number">5</span>     <span class="comment">// c = 7</span></div></pre></td></tr></table></figure>
<p>RxSwift è®©ä½ èƒ½ç”¨é€šè¿‡å‡½æ•°å“åº”å¼ç¼–ç¨‹æ¥ç¼–å†™ä½ çš„ä»£ç ã€‚ä½¿ç”¨ RxSwift å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºäº‹ä»¶æˆ–è€…æ•°æ®æµã€‚è¿™äº›äº‹ä»¶æˆ–è€…æ•°æ®æµå¯ä»¥äº’ç›¸ç»„åˆã€è½¬æ¢ã€‚å¹¶ä¸”æœ€ç»ˆè¢«è§‚å¯Ÿåˆ°ï¼ŒåŸºäºå€¼æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚</p>
<p>æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œåœ¨ MVVM ä¸­ View è§‚å¯Ÿ ViewModel ä¸­æ¨¡å‹çš„æ•°æ®ã€‚RxSwift æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•å¹¶ä¸”å¹²å‡€çš„æ–¹æ³•æ¥è§‚å¯Ÿè¿™äº›å€¼ï¼Œå¹¶ç»‘å®šåˆ°å¯¹åº”çš„ View ä¸Šã€‚</p>
<a id="more"></a>
<h4 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a>Observable</h4><p>Observable æ˜¯ RxSwift çš„ä¸»è¦æ„æˆéƒ¨åˆ†ã€‚ä»–æ˜¯ä¸€ä¸ªå¯ä»¥å¼‚æ­¥çš„æ¥å—å…ƒç´ çš„åºåˆ—ã€‚è¿™ä¸ªåºåˆ—å¯ä»¥æœ‰0ä¸ªæˆ–è€…å¾ˆå¤šä¸ªçš„å…ƒç´ ã€‚æœ‰ä¸‰ç§äº‹ä»¶èƒ½å¤ŸåŸºäºå®ƒå‘ç”Ÿã€‚ä¸‹ä¸€æ­¥(Next)ã€å®Œæˆ(Completed)ã€é”™è¯¯(Error)</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Event</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> next(<span class="type">Element</span>)   <span class="comment">// è¿™ä¸ªåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></div><div class="line">    <span class="keyword">case</span> error(<span class="type">Swift</span>.<span class="type">Error</span>)<span class="comment">// è¿™ä¸ªåºåˆ—å‘ç”Ÿäº†é”™è¯¯</span></div><div class="line">    <span class="keyword">case</span> completed      <span class="comment">// è¿™ä¸ªåºåˆ—æˆåŠŸçš„å®Œæˆçš„æ‰€æœ‰äººä»»åŠ¡</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨ <code>Observable</code> çš„ <code>subscribe</code> æ–¹æ³•æ¥è®¢é˜…è¿™äº›äº‹ä»¶ã€‚ ç”¨è¿™ç§æ–¹æ³•å¯ä»¥åˆ†åˆ«å¤„ç†è¿™ä¸ªäº‹ä»¶çš„å„ç§æƒ…å†µã€‚</p>
<ul>
<li>OnNext: å¯ä»¥ä½¿ç”¨è¢«è®¢é˜…çš„å…ƒç´ å€¼ã€‚</li>
<li>OnCompleted: å½“è¿™ä¸ªåºåˆ—æˆåŠŸçš„å‘é€å®Œæ‰€æœ‰å…ƒç´ ä¹‹åä¼šè¢«è°ƒç”¨ã€‚</li>
<li>OnError: å½“è¿™ä¸ªåºåˆ—ä¸èƒ½å®Œæˆçš„æ—¶å€™è¢«è°ƒç”¨ã€‚</li>
</ul>
<p>åªè¦ <code>Complete</code> æˆ–è€… <code>Error</code> è¢«è§‚å¯Ÿåˆ°äº†, è¿™ä¸ªåºåˆ—å°±ä¸èƒ½äº§ç”Ÿä»»ä½•æ–°çš„å…ƒç´ äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">observable.subscribe(</div><div class="line">    onNext: &#123; element <span class="keyword">in</span> ... &#125;, </div><div class="line">    onError: &#123; error <span class="keyword">in</span> ... &#125;,</div><div class="line">    onCompleted: &#123; ... &#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<h4 id="Hot-and-cold-observables"><a href="#Hot-and-cold-observables" class="headerlink" title="Hot and cold observables"></a>Hot and cold observables</h4><p>å³ä½¿æ²¡æœ‰è¢«è§‚å¯Ÿä¹Ÿä¼šå‘é€æ¶ˆæ¯çš„ä¿¡å·è¢«ç§°ä½œçƒ­ä¿¡å·ã€‚æƒ³è±¡ä¸€ä¸‹ <code>NotificationCenter</code> æŠ€æœ¯æ²¡æœ‰å…¶ä»–å¯¹è±¡æ¥å—é€šçŸ¥, ä¹Ÿä¹Ÿç„¶ä¼šå‘é€å‡ºæ¥ã€‚å¦‚æœä½ åœ¨æŸä¸ªæ—¶å€™è®¢é˜…äº†è¿™ä¸ªä¿¡å·, ä¹‹å‰å‘å‡ºæ¥çš„æ¶ˆæ¯ä½ å°±ä¼šé”™è¿‡ã€‚</p>
<p>é‚£äº›åªæœ‰è¢«è®¢é˜…ä¹‹åæ‰å¼€å§‹å‘é€æ¶ˆæ¯çš„ä¿¡å·è¢«ç§°ä½œå†·ä¿¡å·ã€‚è¿™äº›èµ„æºä¼šè¢«åˆ†é…ç»™æ¯ä¸ªè®¢é˜…å¯¹è±¡ã€‚(æ¯”å¦‚è¯´ï¼Œä½ æ¯æ¬¡è®¢é˜…çš„ç½‘ç»œè¯·æ±‚å°±ä¼šè¢«é‡Šæ”¾)ä½†æ˜¯è¿™äº›èµ„æºå¯ä»¥è¢«å¤šä¸ªå¯¹è±¡å…±äº«(åªæœ‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚è¢«é‡Šæ”¾äº†,ä½†å¯èƒ½è¿™è¢«å¾ˆå¤šä¸ªè§‚å¯Ÿè€…è®¢é˜…)</p>
<h4 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h4><p>Driver æ˜¯ RxCocoa æ¡†æ¶ä¸­çš„ä¸€ä¸ªå€¼ç±»å‹ã€‚å®ƒæ˜¯å¯¹ä¸€ä¸ªå¯è®¢é˜…çš„åºåˆ—çš„å°è£…ï¼Œå¦‚æœè¦æŠŠä¸€ä¸ªç®€å•çš„å€¼ç»‘å®šåˆ°Viewä¸Š, å®ƒä¼šæ˜¯ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ã€‚å¦‚æœ <code>Observables</code> å‘ç”Ÿäº†é”™è¯¯, ä½ éœ€è¦å¾ˆæ–¹ä¾¿çš„å°†ä¸€äº›ä¸œè¥¿å±•ç¤ºå‡ºæ¥ã€‚æ¯ä¸ªä¿¡å·éƒ½å¯ä»¥å¾ˆå®¹æ˜“çš„è¢«è½¬æ¢æˆ <code>Driver</code>ã€‚ å½“ä½ æä¾›äº†è¿™ä¸ªä¿¡å·å‘ç”Ÿé”™è¯¯çš„è¿”å›ä»€ä¹ˆçš„æ—¶å€™ï¼Œåªéœ€è¦ä½¿ç”¨ <code>asDriver</code> æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.asDriver(onErrorJustReturn: <span class="string">"No items to display."</span>)</div></pre></td></tr></table></figure>
<p>æƒ³è±¡ä¸€ä¸‹å¼‚æ­¥æ“ä½œçš„åœºæ™¯ã€‚æ¯”å¦‚è¯´ç½‘ç»œè¯·æ±‚ã€‚æˆ‘ä»¬éœ€è¦åœ¨ç•Œé¢ä¸Šå±•ç¤ºè¿”å›å€¼çš„ä¸ªæ•°ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿”å›å€¼çš„ä¸ªæ•°æ˜ å°„æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯èƒ½è¿™ä¸ªå­—ç¬¦ä¸²çš„æ ¼å¼å¯èƒ½æ˜¯ <code>&quot;X item(s)&quot;</code> <code>Driver</code> è¿˜èƒ½å¤Ÿç¡®ä¿æˆ‘ä»¬éœ€è¦ä¿®æ”¹ UI çš„è¿™ä¸ªè®¢é˜…æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹å½“ä¸­çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> results: <span class="type">Observable</span>&lt;[<span class="type">SomeItem</span>]&gt; = ...</div><div class="line"><span class="keyword">let</span> resultsCountDriver = results</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="string">"<span class="subst">\($<span class="number">0</span>.<span class="built_in">count</span>)</span> item(s)"</span> &#125;</div><div class="line">    .asDriver(onErrorJustReturn: <span class="string">"No items to display."</span>)</div></pre></td></tr></table></figure>
<p>æŠŠè¿™ä¸ªæ•°æ®ç»‘å®šåˆ° Label ä¸­å°±å¾ˆç®€å•äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resultsCountDriver.drive(resultCountLabel.rx.text).disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h4 id="DisposeBag"><a href="#DisposeBag" class="headerlink" title="DisposeBag"></a>DisposeBag</h4><p>å¦‚æœä¸€ä¸ªåºåˆ—åœæ­¢äº†, ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰è¢«é‡Šæ”¾æ‰ã€‚åœ¨ä»–å°±ä¼šé€ æˆèµ„æºçš„æµªè´¹å’Œå†…å­˜çš„æ³„æ¼ã€‚çŸ¥é“ä»–å®Œæˆäº†æˆ–è€…å¤„é”™äº†ã€‚å¦‚æœä¸€ä¸ªåºåˆ—æ²¡æœ‰åœæ­¢ï¼Œä¹Ÿæ²¡æœ‰å‡ºé”™ï¼Œè¿™ä¸ªèµ„æºå°±ä¼šè¢«æ°¸ä¹…çš„å ç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åœ¨éœ€è¦è®¢é˜…çš„å¯¹è±¡ä¸­ç”Ÿå‘½ä¸€ä¸ª <code>DisposeBag</code> çš„æˆå‘˜å˜é‡çš„åŸå› äº†ã€‚è¿™æ ·çš„è¯ï¼Œåªè¦è¿™ä¸ªå¯¹è±¡å‘—é‡Šæ”¾æ‰äº†ï¼Œæ‰€æœ‰ç›¸å…³çš„èµ„æºéƒ½ä¼šè¢«é‡Šæ”¾å¹¶ä¸”è¢«ç³»ç»Ÿå›æ”¶ã€‚</p>
<h4 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h4><p><code>Variable</code>è¡¨ç¤ºå¯ä»¥è¢«è®¢é˜…çš„çŠ¶æ€ã€‚å®ƒæ˜¯ä¿¡å·å’ŒåŠŸèƒ½èŒƒå¼ä¹‹é—´çš„æ¡¥æ¢ã€‚<code>Variable</code> æ€»æ˜¯åŒ…å«äº†æä¾›ç»™æ„é€ å‡½æ•°çš„åˆå§‹å€¼å½“ä½ è®¢é˜…å½“å‰çš„å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ªåˆå§‹å€¼ä¼šç«‹é©¬è¢«å‘é€åˆ°è¿‡æ¥ã€‚(åªæœ‰æœ€æ–°å’Œå½“å‰å€¼ä¼šè¢«å‘å‡ºï¼Œæ—§çš„å€¼ä¸ä¼š)ã€‚ä¹Ÿå¯ä»¥ç›´æ¥è·å–æˆ–è€…è®¾ç½® <code>Variable</code> çš„å€¼ã€‚ä»–å†…éƒ¨çš„ä¿¡å·å¯ä»¥é€šè¿‡ <code>asObservable</code> æ–¹æ³•è·å–åˆ°ã€‚å¦å¤–, <code>Variable</code> æ°¸è¿œéƒ½ä¸ä¼šå‡ºé”™ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> variable = <span class="type">Variable</span>(<span class="string">"My Variable"</span>)</div><div class="line">variable.value = <span class="string">"Some value"</span></div><div class="line"><span class="keyword">let</span> variableObservable = variable.asObservable()</div><div class="line">variableObservable.subscribe(onNext: &#123; value <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(value) <span class="comment">//prints "Some value"</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œ æˆ‘å†™äº†ä¸€ä¸ª Demo æ¥æ¼”ç¤º MVVM + RxSwift. è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºè·å–å¹¶ä¸”æ˜¾ç¤ºå¤©æ°”çš„æ•°æ®ã€‚è¿™ä¸ªappæœ‰ä¸‰ç§çŠ¶æ€ï¼Œ åŠ è½½ä¸­ï¼Œæ˜¾ç¤ºä¸­ï¼Œé”™è¯¯ã€‚æœ‰ä¸¤ç§å¯¹é”™è¯¯çš„å¤„ç†ï¼Œä¸€æ˜¯ï¼Œæˆ‘ä»¬åªæ˜¾ç¤ºé”™è¯¯ã€‚å¦ä¸€ä¸ªæ˜¯æ˜¾ç¤ºä¹‹å‰çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±æ˜¾ç¤ºé”™è¯¯ã€‚è¿™ä¸¤ç§å¤„ç†æ–¹å¼éƒ½æ˜¯é€šè¿‡å“åº”å¼ç¼–ç¨‹å’ŒæŒ‡ä»¤å¼ç¼–ç¨‹å®ç°çš„ã€‚</p>
<p>åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œåªæœ‰ ViewMoel ä¼šå‘ç”Ÿæ”¹å˜ã€‚ä½ å¯ä»¥çœ‹åˆ°ç»™åŠŸèƒ½å¢åŠ å¤æ‚æ€§(æ˜¾ç¤ºé”™è¯¯æˆ–è€…æ—§çš„æ•°æ®)ã€‚å¦‚æœä½¿ç”¨æŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œå¯èƒ½ä¼šå¯¹ä»£ç å¸¦æ¥å¾ˆå¤šçš„å˜åŠ¨ã€‚è€Œä½¿ç”¨å“åº”å¼ç¼–ç¨‹ï¼Œåªéœ€è¦å¢åŠ é¢å¤–çš„çŠ¶æ€è€Œå·²ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ª(&lt;a href=&quot;http://lukagabric.com/mvvm-design-pattern-and-rxswift/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://lukagabric.com/mvvm-design-pattern-and-rxswift/&lt;/a&gt;)&lt;/p&gt;
&lt;h3 id=&quot;MVVM&quot;&gt;&lt;a href=&quot;#MVVM&quot; class=&quot;headerlink&quot; title=&quot;MVVM&quot;&gt;&lt;/a&gt;MVVM&lt;/h3&gt;&lt;p&gt;MVVM æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚ä»–æ˜¯ç¨‹åºçš„ä»£ç åˆ†ç¦»æˆä¸‰ä¸ªéƒ¨åˆ†: &lt;code&gt;Model&lt;/code&gt;ã€&lt;code&gt;View&lt;/code&gt;ã€&lt;code&gt;ViewModel&lt;/code&gt;ã€‚ &lt;code&gt;Model&lt;/code&gt; ä»£è¡¨æ•°æ®çš„è¡¨ç°, &lt;code&gt;View&lt;/code&gt; ä»£è¡¨ç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ï¼Œ&lt;code&gt;ViewModel&lt;/code&gt; ä»£è¡¨ç€æ¨¡å‹å±‚å’Œè§†å›¾å±‚çš„ä¸»è¦å…³è”å…³ç³»ã€‚&lt;/p&gt;
&lt;h4 id=&quot;Model&quot;&gt;&lt;a href=&quot;#Model&quot; class=&quot;headerlink&quot; title=&quot;Model&quot;&gt;&lt;/a&gt;Model&lt;/h4&gt;&lt;p&gt;&lt;code&gt;Model&lt;/code&gt; å°±æ˜¯æ•°æ®å±‚ã€‚ä»–åŒ…æ‹¬ä¸€å®šèŒƒå›´å†…çš„æ¨¡å‹ï¼Œå’Œä¸šåŠ¡é€»è¾‘ã€‚ &lt;code&gt;Model&lt;/code&gt; å¹¶ä¸åªæ˜¯ä½ ç¨‹åºä¸­çš„é‚£äº›æ¨¡å‹ç»“æ„ä½“æˆ–è€…æ•°æ®åº“, ä»–ä¹ŸåŒ…å«äº†ä¸€äº› Service æˆ–è€…ç»„ä»¶, æ¯”å¦‚è¯´ &lt;code&gt;Alamofire&lt;/code&gt;å’Œä¸€äº› SDK ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Model&lt;/code&gt; å±‚æ‰§è¡Œæ‰€æœ‰è·Ÿæ•°æ®æœ‰å…³çš„æ“ä½œã€‚æ¯”å¦‚å¸¸è§çš„å¢åˆ æ”¹æŸ¥ç­‰ç­‰ã€‚è¿™äº›æ“ä½œç”± &lt;code&gt;ViewModel&lt;/code&gt; å‘èµ·ã€‚å½“ &lt;code&gt;Model&lt;/code&gt;æ“ä½œå®Œäº†æ•°æ®ä¹‹åå®ƒå†å‘Šè¯‰ &lt;code&gt;ViewModel&lt;/code&gt; ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Model&lt;/code&gt; è¢« ViewModel æŒæœ‰ã€‚ä»–ä¹Ÿå¹¶ä¸çŸ¥é“è§†å›¾å±‚å’Œ &lt;code&gt;ViewModel&lt;/code&gt; å±‚çš„äº‹æƒ…ã€‚å› ä¸ºä»–æ˜¯å’Œè¿™ä¸¤ä¸ªä¸œè¥¿å®Œå…¨éš”ç¦»å¼€çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;View&quot;&gt;&lt;a href=&quot;#View&quot; class=&quot;headerlink&quot; title=&quot;View&quot;&gt;&lt;/a&gt;View&lt;/h4&gt;&lt;p&gt;&lt;code&gt;View&lt;/code&gt; æ˜¯ç¨‹åºä¸­æ•°æ®çš„å¯è§†åŒ–å±•ç¤ºã€‚å®ƒæ²¡æœ‰é€»è¾‘ç›¸å…³çš„ä¸œè¥¿ã€‚ä»–ä¸»è¦æœ‰æ¥å—ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå’Œå°†æ•°æ®å±•ç¤ºåœ¨ç•Œé¢ä¸Šä¸¤ä¸ªäººç‰©ã€‚å®ƒå°†ç”¨æˆ·äº¤äº’çš„äº‹ä»¶è½¬å‘åˆ° &lt;code&gt;ViewModel&lt;/code&gt; ä¸­è¿›è¡Œå¤„ç†ã€‚&lt;code&gt;View&lt;/code&gt; è§‚å¯Ÿ &lt;code&gt;ViewModel&lt;/code&gt; ä¸­æ•°æ®çš„å˜åŒ–, å¹¶ä¸”å°†è¿™äº›å˜åŒ–å±•ç°å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;View&lt;/code&gt; å’Œ &lt;code&gt;Model&lt;/code&gt; ä¹‹é—´æ²¡æœ‰ä»»ä½•ç›´æ¥çš„å…³è”ã€‚ ä»–ä»¬é€šè¿‡ &lt;code&gt;View&lt;/code&gt; æŒæœ‰çš„ &lt;code&gt;ViewModel&lt;/code&gt; äº§ç”Ÿå…³è”ã€‚&lt;/p&gt;
&lt;p&gt;ç•Œé¢ä¿¡æ¯åœ¨ &lt;code&gt;xib&lt;/code&gt; æˆ–è€… &lt;code&gt;StoryBoard&lt;/code&gt; ä¸­é€šè¿‡ &lt;code&gt;UIKit&lt;/code&gt; ä¸­çš„ç»„ä»¶è¢«å®šä¹‰ã€‚&lt;code&gt;ViewController&lt;/code&gt; æ˜¯ç›´æ¥è·Ÿ &lt;code&gt;xib&lt;/code&gt; æˆ–è€… &lt;code&gt;StoryBoard&lt;/code&gt; å…³è”çš„ã€‚å®ƒåŒ…å«äº† &lt;code&gt;Xib&lt;/code&gt; æˆ–è€… &lt;code&gt;StoryBoard&lt;/code&gt; ä¸­çš„ &lt;code&gt;outlets&lt;/code&gt; å’Œä¸€äº›å®šä¹‰ UI çš„é¢å¤–é…ç½®ã€‚ä»–ä¹Ÿè´Ÿè´£ç®¡ç† &lt;code&gt;View&lt;/code&gt; çš„ç”Ÿå‘½å‘¨æœŸã€‚ åœ¨ MVVM ä¸­ä»–å’Œ &lt;code&gt;View&lt;/code&gt; çš„å…³è”æ˜¯éå¸¸ç´§å¯†çš„, ä»–å…¶å®å°±æ˜¯ &lt;code&gt;View&lt;/code&gt; å±‚çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ViewModel&quot;&gt;&lt;a href=&quot;#ViewModel&quot; class=&quot;headerlink&quot; title=&quot;ViewModel&quot;&gt;&lt;/a&gt;ViewModel&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ViewModel&lt;/code&gt; æ˜¯ç¨‹åºçš„é€»è¾‘å±‚ã€‚ä»–å¤„ç†ç”¨æˆ·äº¤äº’è¡Œä¸ºã€‚ç„¶åæ›´æ–°æ•°æ®ã€‚ç„¶ååœ¨é€šçŸ¥ &lt;code&gt;View&lt;/code&gt; æ–°çš„æ•°æ®å’Œæ˜¾ç¤ºçš„æ–¹å¼ã€‚ä¸¾ä¸€ä¸ªå¾ˆå¹³å¸¸çš„ä¾‹å­ã€‚ä¸€ä¸ª ViewModel ä»Modelå±‚ä¸­è¯·æ±‚åˆ°äº†ä¸€äº›åŒ…å« &lt;code&gt;Date&lt;/code&gt; çš„æ¨¡å‹ã€‚ è¿™ä¸ª Date å€¼å¹¶ä¸ä¼šè¢«å‘Šè¯‰ç»™ View, ViewModel å‘Šè¯‰ View çš„åº”è¯¥æ˜¯è¢«æ ¼å¼åŒ–ä¹‹åçš„å­—ç¬¦ä¸²ã€‚è§†å›¾ä¸ä¼šæ“ä½œæ•°æ®æœ¬èº«ï¼Œä»–åªè´Ÿè´£å°† ViewModel å‡†å¤‡å¥½çš„æ•°æ®å±•ç¤ºå‡ºæ¥ã€‚&lt;/p&gt;
&lt;h4 id=&quot;Similar-to-MVC&quot;&gt;&lt;a href=&quot;#Similar-to-MVC&quot; class=&quot;headerlink&quot; title=&quot;Similar to MVC&quot;&gt;&lt;/a&gt;Similar to MVC&lt;/h4&gt;&lt;p&gt;åœ¨ MVC è®¾è®¡æ¨¡å¼ä¸­, &lt;code&gt;ViewController&lt;/code&gt; æ˜¯ &lt;code&gt;Model&lt;/code&gt; å’Œ &lt;code&gt;View&lt;/code&gt; ä¹‹é—´çš„æ¡¥æ¢ã€‚ä»–åªæœ‰è§†å›¾, ç®¡ç†è§†å›¾çš„ç»“æ„ï¼Œç®¡ç†ç”¨æˆ·çš„äº¤äº’ã€‚ä»–è¿˜è´Ÿè´£ç®¡ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸ,åŠ è½½ã€æ˜¾ç¤ºã€æ¶ˆå¤±ç­‰ã€‚ä»–å…·æœ‰çš„å¦å¤–ä¸€ä¸ªæŒ‡è´£æ˜¯æ›´æ–°æ¨¡å‹æ•°æ®, è¿™å°±åŒ…æ‹¬äº†æ˜¾ç¤ºæ•°æ®çš„ç›¸å…³é€»è¾‘(ä¹Ÿå°±æ˜¯æ•°æ®çš„å¤„ç†,å¦‚ä¸Šæ–‡æåˆ°çš„è®² &lt;code&gt;Date&lt;/code&gt; è½¬åŒ–æˆ &lt;code&gt;String&lt;/code&gt; çš„é€»è¾‘)ã€‚å› ä¸ºä»–å…·æœ‰è¿™ä¹ˆå¤šçš„èŒè´£ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹ &lt;code&gt;Viewcontroller&lt;/code&gt; å°±ä¼šå˜çš„éå¸¸å¤§ã€‚æ‰€ä»¥ä¹Ÿæœ‰äººç§°MVC ä¸º Massive View Controller&lt;/p&gt;
&lt;p&gt;å‡ºç°å¤æ‚çš„ &lt;code&gt;viewController&lt;/code&gt; ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ã€‚ç”±äº &lt;code&gt;Controller&lt;/code&gt; æœ‰å¾ˆå¤šçš„èŒè´£ã€‚ä»£ç å°±ä¼šå˜çš„éå¸¸çš„å¤æ‚ã€‚è¿™å¾ˆæ˜æ˜¾å°±è¿èƒŒäº†å•ä¸€èŒè´£è¿™ä¸ªåŸåˆ™ã€‚è¿™ä¹Ÿè®©æµ‹è¯• &lt;code&gt;Controller&lt;/code&gt; ä¸­çš„é€»è¾‘å˜æˆä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ã€‚&lt;code&gt;Controller&lt;/code&gt; å’Œ &lt;code&gt;View&lt;/code&gt; çš„é«˜åº¦è€¦åˆã€‚&lt;code&gt;view&lt;/code&gt; çš„ç”Ÿå‘½å‘¨æœŸä½¿å¾—é€»è¾‘çš„åˆ†ç¦»å˜çš„ä¸é‚£ä¹ˆå®¹æ˜“ã€‚æˆ‘ä»¬å°±éœ€è¦èŠ±å¾ˆå¤§çš„ç²¾åŠ›æ¥å¤„ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
&lt;p&gt;MVVM å’Œ MVC éå¸¸ç›¸ä¼¼ã€‚ æ­£å¦‚å‰æ–‡æ‰€è¯´ã€‚ MVC ä¸­çš„ &lt;code&gt;Controller&lt;/code&gt; åŒæ—¶åŒ…å«äº†è§†å›¾å’Œç¨‹åºçš„é€»è¾‘ã€‚å°†é€»è¾‘ç›¸å…³çš„ä»£ç ä» &lt;code&gt;Controller&lt;/code&gt; ä¸­åˆ†ç¦»å‡ºæ¥, æ”¾åˆ°ä»–è‡ªå·±æŠ½è±¡å‡ºæ¥çš„ç±»é‡Œé¢å»ã€‚è¿™æ—¶å€™çš„ &lt;code&gt;Controller&lt;/code&gt;å°±åªå…³æ³¨è§†å›¾ç›¸å…³çš„äº‹æƒ…ã€‚åˆšåˆšåˆ†ç¦»å‡ºæ¥çš„è¿™ä¸ªç±»å¤„ç†ç›¸å…³çš„é€»è¾‘ã€‚è¿™ä¸ªç±»å°±æ˜¯ ViewModelã€‚ä»–å’Œ &lt;code&gt;Controller&lt;/code&gt; å…·æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æ‰€ä»¥è¯´ MVVM å°±æ˜¯å°†é€»è¾‘ä»£ç ä» &lt;code&gt;controller&lt;/code&gt;ä¸­åˆ†ç¦»åˆ° &lt;code&gt;ViewModel&lt;/code&gt; ä¸­çš„ MVC&lt;/p&gt;
&lt;h4 id=&quot;Binding-data-from-ViewModel-to-View&quot;&gt;&lt;a href=&quot;#Binding-data-from-ViewModel-to-View&quot; class=&quot;headerlink&quot; title=&quot;Binding data from ViewModel to View&quot;&gt;&lt;/a&gt;Binding data from ViewModel to View&lt;/h4&gt;&lt;p&gt;æœ‰å¾ˆå¤šå°†æ•°æ®ç»‘å®šçš„æœºåˆ¶, æ¯”å¦‚ Swift ä¸­çš„å±æ€§è§‚å¯Ÿã€‚è§†å›¾å¯ä»¥å¯¹å¤–æä¾›ä¸€ä¸ª Closure æ¥è¿›è¡Œè§†å›¾çš„æ›´æ–°ã€‚è¿™ä¸ª Closure ç”¨æ¥é€šçŸ¥ View ä»–å…³è”çš„å±æ€§çš„æ›´æ–°ã€‚é™¤äº†ç†Ÿæ‚‰è§‚å¯Ÿã€‚æˆ‘ä»¬çš„ç¨‹åºè¿˜ç»å¸¸éœ€è¦å¤„ç†å„ç§å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œå’Œé€šçŸ¥æˆ–è€…äº‹ä»¶çš„æµä¿¡æ¯ã€‚å‡½æ•°å“åº”å¼ç¼–ç¨‹(FRP)æ¡†æ¶ç®€ç›´å°±æ˜¯ä¸ºäº†å¤„ç†è¿™ç±»äº‹ä»¶è€Œç”Ÿçš„ã€‚ç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šFRP æ¡†æ¶ï¼Œå¯¹ iOS å¼€å‘æ¥è¯´ï¼Œæœ€å‡ºåçš„åº”è¯¥æ˜¯ &lt;code&gt;RxSwift&lt;/code&gt; å’Œ &lt;code&gt;ReactiveCocoa&lt;/code&gt;äº†ã€‚ä¹‹å‰åœ¨ä¸€ç¯‡å¯¹æ¯”æ–‡ç« ä¸­æœ‰æåˆ°è¿‡, ä¸ç®¡æ€æ ·ï¼Œæˆ‘æ›´å–œæ¬¢ &lt;code&gt;RxSwift&lt;/code&gt; &lt;/p&gt;
&lt;h3 id=&quot;RxSwift&quot;&gt;&lt;a href=&quot;#RxSwift&quot; class=&quot;headerlink&quot; title=&quot;RxSwift&quot;&gt;&lt;/a&gt;RxSwift&lt;/h3&gt;&lt;p&gt;æŒ‡ä»¤å¼ç¼–ç¨‹æ˜¯åŸºäºä¸€æ­¥ä¸€æ­¥æ˜ç¡®çš„æŒ‡ä»¤æ¥æ‰§è¡Œçš„ã€‚ä»–è¯¦ç»†çš„æè¿°äº†ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚å€¼åšä¸ºçŠ¶æ€è€Œå­˜åœ¨ã€‚ç”±äºç¨‹åºæ˜¯ä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œçš„,æ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼åœ¨ä¹‹åå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¸€æ”¹å˜ä¹Ÿä¸ä¼šè¢«ä¼ åˆ°ä¸‹ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æŒ‡ä»¤å¼ç¼–ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;b = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;c&lt;/span&gt; = a + b  &lt;span class=&quot;comment&quot;&gt;// c = 3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;   &lt;span class=&quot;comment&quot;&gt;// c = 3&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å“åº”å¼ç¼–ç¨‹,è·ŸæŒ‡ä»¤å¼ç›¸åã€‚ä»–æ˜¯åŸºäºå˜åŒ–çš„ã€‚ä»–åŸºäºå£°æ˜å¼ç¼–ç¨‹ï¼Œè¿™å°±æ„å‘³ç€ä»–å…³æ³¨çš„æ˜¯ç¨‹åºåº”è¯¥å®Œæˆä»€ä¹ˆï¼Œè€Œä¸æ˜¯ç¨‹åºæ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚å®ƒæ˜¯é€šè¿‡æ•°å­¦è¿ç®—å’Œå…¶ä»–åƒæ˜¯ &lt;code&gt;filter&lt;/code&gt; &lt;code&gt;map&lt;/code&gt; &lt;code&gt;reduce&lt;/code&gt; ä¹‹ç±»çš„è¿ç®—æ“ä½œçš„è¿ç”¨æ¥å®ç°çš„ã€‚å¦‚ä½•å‡†ç¡®çš„è¿è¡Œè¢«äº¤ç»™åº•å±‚çš„ç¨‹åºè¯­è¨€æˆ–è€…æ¡†æ¶æ¥è€ƒè™‘äº†ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å“åº”å¼ç¼–ç¨‹&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;b = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;c&lt;/span&gt; = a + b &lt;span class=&quot;comment&quot;&gt;// c = 3&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;a = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;     &lt;span class=&quot;comment&quot;&gt;// c = 7&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;RxSwift è®©ä½ èƒ½ç”¨é€šè¿‡å‡½æ•°å“åº”å¼ç¼–ç¨‹æ¥ç¼–å†™ä½ çš„ä»£ç ã€‚ä½¿ç”¨ RxSwift å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºäº‹ä»¶æˆ–è€…æ•°æ®æµã€‚è¿™äº›äº‹ä»¶æˆ–è€…æ•°æ®æµå¯ä»¥äº’ç›¸ç»„åˆã€è½¬æ¢ã€‚å¹¶ä¸”æœ€ç»ˆè¢«è§‚å¯Ÿåˆ°ï¼ŒåŸºäºå€¼æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚å‰æ–‡æ‰€è¯´ï¼Œåœ¨ MVVM ä¸­ View è§‚å¯Ÿ ViewModel ä¸­æ¨¡å‹çš„æ•°æ®ã€‚RxSwift æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•å¹¶ä¸”å¹²å‡€çš„æ–¹æ³•æ¥è§‚å¯Ÿè¿™äº›å€¼ï¼Œå¹¶ç»‘å®šåˆ°å¯¹åº”çš„ View ä¸Šã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/tags/Reactive/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://CepheusTeam.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I</title>
    <link href="https://CepheusTeam.github.io/2017/05/05/RxSwift%20and%20the%20awesome%20things%20you%20can%20do%20with%20Reactive%20Programming%E2%80%8A%E2%80%94%E2%80%8APart%20I/"/>
    <id>https://CepheusTeam.github.io/2017/05/05/RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I/</id>
    <published>2017-05-04T16:00:00.000Z</published>
    <updated>2017-05-13T04:13:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ªå›½å¤–çš„ç¾å¥³å·¥ç¨‹å¸ˆ <a href="https://medium.com/@kenzai" target="_blank" rel="external">Kenza Iraki</a> çš„æ–‡ç«  <a href="https://medium.com/@kenzai/rxswift-and-the-awesome-things-you-can-do-with-reactive-programming-part-i-3921137d251" target="_blank" rel="external">RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I</a></p>
<p>ç¬¬ä¸€æ¬¡å¬è§å“åº”å¼ç¼–ç¨‹ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„</p>
<center><br><img src="https://cdn-images-1.medium.com/max/1600/1*28RdzpfQBHklPcgLGsg0jw.png"><br></center>

<p>æ¥ä¸‹æ¥çš„å‡ æ¬¡å‡ æ¬¡æ¥è§¦, ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚æ•´æ•´ä¸¤ä¸ªæ˜ŸæœŸä¹‹å,å³ä½¿æˆ‘åœ¨é¡¹ç›®ä¸­å†™äº†ä¸€äº›å“åº”å¼ä»£ç ã€‚æˆ‘ä¾ç„¶æ˜¯è¿™ç§æ„Ÿè§‰ã€‚</p>
<p>ç°åœ¨æˆ‘æ‰çŸ¥é“æœ‰å¾ˆå¤šçš„äººåœ¨ç¬¬ä¸€æ¬¡é‡è§å“åº”å¼ç¼–ç¨‹çš„æ—¶å€™è·Ÿæˆ‘æœ‰ä¸€æ ·çš„æ„Ÿè§‰ã€‚æˆ‘ä¹ŸçŸ¥é“å¾ˆå¤šäººçœ‹è¿‡å“åº”å¼çš„ä»£ç ä¹‹åå†ä¹Ÿä¸æƒ³å†è§åˆ°å®ƒäº†ï¼Œå› ä¸ºå¥¹çš„å­¦ä¹ æ›²çº¿å¤ªè¿‡é™¡å³­äº†ã€‚ä½†æ˜¯æˆ‘èƒ½å‘Šè¯‰ä½ ä¸€ä¸ªäº‹å®, æˆ‘è¿˜æ²¡å¬è¯´è¿‡ä¸€ä¸ªäººï¼Œ åœ¨æœ€ç»ˆç†è§£äº†ä»–æ˜¯æ€ä¹ˆå›äº‹ä¹‹å,åæ‚”å­¦ä¹ å“åº”å¼ç¼–ç¨‹ã€‚</p>
<p>æˆ‘çŸ¥é“ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºå“åº”å¼ç¼–ç¨‹ç†è®ºå’Œæ€æƒ³è¿˜æœ‰ RxSwift çš„çš„èµ„æº, ä¹Ÿæœ‰å¾ˆå¤šæ•™ä½ ç”¨Rxæ¥åšå„ç§äº‹æƒ…çš„æ•™ç¨‹(æ–‡æœ«æˆ‘ä¼šç»™å‡ºä¸€äº›é“¾æ¥)ã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ˜¯ä¸€ä¸ªæ•™ç¨‹, ä¹Ÿä¸ä¼šè§£é‡Š <code>stream</code> å’Œ <code>observables</code> æ˜¯æ€ä¹ˆå›äº‹ã€‚ æˆ‘è¦åšçš„æ˜¯æä¾›ä¸€ä¸ªç›´æ¥ã€æ˜ç¡®å¹¶ä¸”å°½é‡å°‘çš„ç†è®ºæ€»ç»“æ¥å‘Šè¯‰ä½  RxSwift èƒ½åšä»€ä¹ˆ, å¹¶ä¸”å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆä½ ä¼šå–œæ¬¢ä¸Šå®ƒã€‚ç”±äº Rx çš„ä¸–ç•Œæ·±ä¼¼æµ·, æ‰€ä»¥æˆ‘æ‰“ç®—å†™ä¸‰ç¯‡æ–‡ç« æ¥è®¨è®ºè¿™ä»¶äº‹æƒ…, è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚</p>
<h2 id="Part1-Data-Binding-control-events-and-gesture-recognizers"><a href="#Part1-Data-Binding-control-events-and-gesture-recognizers" class="headerlink" title="Part1: Data Binding, control events and gesture recognizers"></a>Part1: Data Binding, control events and gesture recognizers</h2><h3 id="Data-Binding"><a href="#Data-Binding" class="headerlink" title="Data Binding"></a>Data Binding</h3><p>æ•°æ®ç»‘å®šçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªé«˜ç«¯çš„è¯è¯­, ä½†æ˜¯å®ƒå´æ˜¯ä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ã€‚å‡å¦‚ä½ æœ‰ä¸€ä¸ª App éœ€è¦ç”¨æˆ·åœ¨ <code>UITextField</code> ä¸­è¾“å…¥å®ƒä»¬çš„åå­—ã€‚å½“ä»–ä»¬åœ¨æ‰“å­—çš„æ—¶å€™, ç”¨ â€œä½ å¥½ + ç”¨æˆ·è¾“å…¥çš„æ–‡å­—â€ å±•ç¤ºåœ¨ç•Œé¢ä¸Šã€‚è¿™æ ·ä¸€ä¸ªå¾ˆåŸºæœ¬çš„åœºæ™¯ã€‚å¦‚æœåœ¨ä¸æ˜¯å“åº”å¼çš„ç¨‹åºä¸­, æˆ‘ä»¬éœ€è¦éµå®ˆ <code>UITextFieldDelegate</code> è¿™ä¸ªåè®®, ç„¶ååœ¨ <code>ViewController</code> ä¸­å®ç° <code>textFieldDidEndEditing</code> è¿™ä¸ªæ–¹æ³•, æ¥ç›‘å¬ç”¨æˆ·ç”¨æˆ·çš„è¡Œä¸ºï¼Œç„¶åç»™ <code>Label</code> èµ‹å€¼ã€‚</p>
<p>è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯å‡å¦‚æœ‰å¾ˆå¤šçš„ <code>UITextField</code> æˆ‘ä»¬è¿˜è¦åœ¨ä»£ç†æ–¹æ³•ä¸­åˆ¤æ–­, åˆæˆ–è€…, æˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨è¾“å…¥çš„è¿‡ç¨‹ä¸­æ—¶æ—¶çš„åˆ·æ–° <code>Label</code>ã€‚è¿™ç§åœºæ™¯, æˆ‘ä»¬çš„ä»£ç ï¼Œçœ‹èµ·æ¥å°±ä¼šå¾ˆç³Ÿç³•ã€‚è‡³å°‘ä¸ä¼šå¾ˆä¼˜é›…å§ã€‚</p>
<p>åœ¨å“åº”å¼ä¸­, è¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨æ•°æ®ç»‘å®šæ¥å®ç°ã€‚è¯´ç™½äº†,å°±æ˜¯å°†ç”¨æˆ·åœ¨ <code>UITextField</code> ä¸­è¾“å…¥çš„æ–‡å­—ç»‘å®šåˆ° <code>UILabel</code> ä¸Šã€‚åœ¨ <code>RxSwift</code> çš„ä¸–ç•Œé‡Œ,  æ²¡æœ‰ä»€ä¹ˆæ¯”å¤„ç†æ•°æ®ç»‘å®šæ›´ç®€å•çš„äº†ã€‚åˆšæ‰æè¿°çš„éœ€æ±‚, æˆ‘ä»¬åªéœ€è¦é€šè¿‡ä»¥ä¸‹ä»£ç å°±å¯ä»¥å®ç°äº†ã€‚</p>
<a id="more"></a>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> namefield = <span class="type">UITextField</span>()</div><div class="line"><span class="keyword">var</span> helloLabel = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    nameField.rx.text.<span class="built_in">map</span> &#123; <span class="string">"Hello <span class="subst">\($<span class="number">0</span>)</span>"</span> &#125;</div><div class="line">                     .bindTo(helloLabel.rx.text)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ï¼Œ æˆ‘ä»¬é¦–å…ˆæ˜¯è·å–åˆ°äº† <code>UITextField</code> çš„æ–‡å­—ã€‚ ç„¶åæˆ‘ä»¬å°†è¿™æ®µæ–‡å­—æ˜ å°„æˆæƒ³è¦çš„æ ¼å¼ï¼Œç„¶åèµ‹å€¼ç»™ <code>UILabel</code>ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹‹é—´è§åˆ°çš„åœ¨æ–‡å­—å‰é¢åŠ äº†ä¸€ä¸ª <code>&#39;hello&#39;</code>ï¼Œ å› ä¸º map æ˜¯ä¸€ä¸ªé—­åŒ…, å¯ä»¥ç®€å•çš„è¢«çœ‹ä½œä¸€ä¸ªåŒ¿åå‡½æ•°, å®ƒçš„å‚æ•°:<code>$0</code>(ç¬¬ä¸€ä¸ªå‚æ•°)ã€<code>$1</code>(ç¬¬äºŒä¸ªå‚æ•°)ä»¥æ­¤ç±»æ¨ã€‚ç„¶åå°†æ˜ å°„åçš„æ–‡å­—ç»‘å®šåˆ° <code>UILabel</code> çš„ <code>text</code> å±æ€§ä¸Šã€‚å°±è¿™ä¹ˆç®€å•ï¼Œè¿™ä¸ªéœ€æ±‚å°±å®Œæˆäº†ã€‚æ²¡æœ‰ä½¿ç”¨ä»£ç†ï¼Œä¹Ÿæ²¡æœ‰ç”¨å„ç§ if è¯­å¥, å°±ç®€å•æ˜äº†çš„å‡ è¡Œä»£ç ã€‚</p>
<p>ä½ å…ˆåœ¨è‚¯å®šåœ¨æƒ³,â€æ˜¯ï¼Œè¿™æ˜¯å¾ˆç¥å¥‡, ä½†æ˜¯çœŸçš„æœ‰å¾ˆå¤š app åœ¨è¿™æ ·åšå—â€ æˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œæ˜¯çš„ã€‚ä¸è¦ä»…ä»…æ˜¯é™åˆ¶åœ¨è¿™ç®€å•çš„å‡ ä¸ªä¾‹å­ä¸­ã€‚èƒ½å¤Ÿå°†æ•°æ®ç»‘å®šåˆ°è§†å›¾æ˜¯éå¸¸å¼ºå¤§çš„äº‹æƒ…ã€‚ä½ æƒ³æƒ³çœ‹ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè§†å›¾çš„èƒŒæ™¯é¢œè‰²éœ€è¦æ ¹æ®å¤©æ°”ç”¨æˆ·çš„åœ°ç†ä½ç½®è€Œæ”¹å˜ã€‚åŸºäºå¯èƒ½å˜åŒ–çš„æ•°æ®å’Œä¸€äº›ç®€å•çš„é€»è¾‘, ä¸éœ€è¦å¤ªè¿‡æ·±å…¥çš„ç ”ç©¶å®ƒèƒŒåçš„ä¸œè¥¿ã€‚è¿™å°±æ˜¯æ•°æ®ç»‘å®šæœ€ä¸»è¦çš„æ€æƒ³ã€‚</p>
<h3 id="Control-Events-and-Gesture-Recognizers"><a href="#Control-Events-and-Gesture-Recognizers" class="headerlink" title="Control Events and Gesture Recognizers"></a>Control Events and Gesture Recognizers</h3><p>ç®€å•çš„è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯äº‹ä»¶å§ï¼äº‹ä»¶åŸºæœ¬ä¸Šæ˜¯ç”¨æˆ·èƒ½åœ¨ä½ çš„ app ä¸Šæ“ä½œçš„æ‰€æœ‰è¡Œä¸ºï¼Œç‚¹å‡»ã€æ»‘åŠ¨ã€æ‹–æ‹½ç­‰ç­‰ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é’®çš„æ—¶å€™ï¼Œä½ çš„ç¨‹åºä¼šç›‘å¬åˆ°ä¸€ä¸ª <code>UIControlEvent</code> çš„äº‹ä»¶ç±»å‹ <code>.touchUpInSide</code>ã€‚ å¦‚æœä½ ç”¨çš„æ˜¯ <code>StoryBoary</code> ï¼Œä½ å¯èƒ½åœ¨åˆ›å»º <code>IBAction</code> çš„æ—¶å€™ï¼Œæ²¡æœ‰æƒ³è¿‡è¿™ä¸ªæŒ‰é’®çš„è¡Œä¸ºã€‚æˆ‘å·²ç»å†™äº†ä¸€ç¯‡<a href="">why I never use storyboards</a> ã€‚å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·,è¿™æ®µä»£ç ä½ è‚¯å®šä¼šå¾ˆç†Ÿæ‚‰äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = <span class="type">UIButton</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    button.addTarget(#selector(<span class="type">ViewController</span>.loginUser), target: <span class="keyword">self</span>, event: .touchUpInside</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">loginUser</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Implementation here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘çœŸçš„å¾ˆè®¨åŒ Selector, è¿™äº›ä»£ç å¤ªä¸æ˜ç¡®äº†ï¼Œè®©ä»£ç çœ‹èµ·æ¥å¾ˆä¹±ï¼Œä¹Ÿè®©æˆ‘ä»¬æ¢—å®¹æ˜“çŠ¯é”™ã€‚ä½†æ˜¯ç”¨ Rx è¿™æ ·å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> button = <span class="type">UIButton</span>()</div><div class="line"><span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    button.rx.tap.subscribe &#123; onNext <span class="number">_</span> <span class="keyword">in</span></div><div class="line">        <span class="comment">// Implementation here</span></div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸è¦å¤ªè¿‡çº ç»“ <code>disposeBag</code> å’Œ <code>subscribe</code> è¿™äº›ä¸œè¥¿ã€‚ä½ åªè¦çŸ¥é“è¿™äº›æ˜¯ä¸€äº›å¿…é¡»çš„åŠ¨ä½œå°±å¯ä»¥äº†ã€‚(ä¸‹é¢ä¼šæœ‰ä»‹ç»)</p>
<p>å½“ä½ éœ€è¦ç»™ä¸å…·æœ‰ control event çš„ç©ºé—´æ·»åŠ ä¸€äº›é€»è¾‘äº‹ä»¶, æ¯”å¦‚ç»™ <code>UILabel</code> æˆ–è€… <code>UIImageView</code> æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ã€‚æˆ‘ä»¬åªèƒ½ç»™ä»–æ·»åŠ æ‰‹åŠ¿ã€‚(è¿™æ˜¯æˆ‘åšè®¨åŒçš„ UIKit ç‰¹ç‚¹ä¹‹ä¸€)ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Show example of gesture recognizers</span></div><div class="line">    <span class="keyword">let</span> gestureRecognizer = <span class="type">UITapGestureRecognizer</span>(target: <span class="keyword">self</span>, action: â€œhandleTap:â€)</div><div class="line">    label.addGestureRecognizer(gestureRecognizer)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">handleTap</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="comment">// Your logic here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶ä»–çš„æ‰‹åŠ¿ï¼Œå¦‚æœä½ éœ€è¦å“åº”çš„è¯ã€‚ä½ å°±éœ€è¦ç»™è¿™ä¸ªæ§ä»¶æ·»åŠ å¤šä¸ª <code>gesture recognizer</code> ,ä½ è¦ç©¿ä»¶å¤šä¸ªæ‰‹åŠ¿ï¼Œç„¶åæŒ¨ä¸ªæ·»åŠ åˆ°è¿™ä¸ªæ§ä»¶ä¸Šã€‚è¿™ä¸ä»…æ˜¯å¾ˆå¤šæ ·æ¿ä»£ç è¿™ä¹ˆç®€å•ï¼Œè¿™ä¹Ÿå¯èƒ½å¸¦æ¥ä¸€äº›éš¾ä»¥æƒ³è±¡çš„æ··ä¹±å’Œæ½œåœ¨çš„é”™è¯¯ã€‚</p>
<p>ä½ å¯ä»¥å·²ç»æƒ³åˆ°äº†ã€‚Rx è®©è¿™ä¸ªä¸œè¥¿å˜çš„å¼‚å¸¸çš„ç®€å•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    label.rx.gesture(.tap).subscribe &#123;onNext (gesture) <span class="keyword">in</span></div><div class="line">        <span class="comment">// Your logic here</span></div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡å¦‚ä½ éœ€è¦æ·»åŠ å¤šä¸ªæ‰‹åŠ¿çš„è¯:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> label = <span class="type">UILabel</span>()</div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    label.rx.gesture(.tap, .pan, .swipeUp).subscribe &#123; onNext (gesture) <span class="keyword">in</span></div><div class="line">        <span class="keyword">switch</span> gesture &#123;</div><div class="line">        <span class="keyword">case</span> .tap: <span class="comment">// Do something</span></div><div class="line">        <span class="keyword">case</span> .pan: <span class="comment">// Do something</span></div><div class="line">        <span class="keyword">case</span> .swipeUp: <span class="comment">// Do something </span></div><div class="line">        <span class="keyword">default</span>: <span class="keyword">break</span>       </div><div class="line">        &#125;        </div><div class="line">    &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™äº›éƒ½æ˜¯ä¸€ä¸ªå« <a href="https://github.com/RxSwiftCommunity/RxGesture" target="_blank" rel="external">RxGesture</a> çš„ RxSwift åº“æä¾›çš„ã€‚</p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p><a href="https://github.com/ReactiveX/RxSwift" target="_blank" rel="external">ReactiveX/RxSwift</a></p>
<p><a href="https://realm.io/news/altconf-ash-furrow-functional-reactive-swift/" target="_blank" rel="external">Functional Reactive Awesomeness With Swift</a></p>
<p><a href="https://medium.com/swift-programming/reactive-swift-3b6050375534" target="_blank" rel="external">My journey with reactive programming in Swiftâ€Šâ€”â€Šand the iOS app that came out of it.</a></p>
<p><a href="https://github.com/DTVD/The-introduction-to-RxSwift-you-have-been-missing" target="_blank" rel="external">DTVD/The-introduction-to-RxSwift-you-have-been-missing</a></p>
<p><a href="https://www.thedroidsonroids.com/blog/ios/rxswift-by-examples-1-the-basics/" target="_blank" rel="external">RxSwift by Examples #1 â€“ The basics.</a></p>
<p><a href="https://news.realm.io/news/tryswift-Marin-Todorov-I-create-iOS-apps-is-RxSwift-for-me/" target="_blank" rel="external">I create iOS apps - is RxSwift for me?</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ªå›½å¤–çš„ç¾å¥³å·¥ç¨‹å¸ˆ &lt;a href=&quot;https://medium.com/@kenzai&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Kenza Iraki&lt;/a&gt; çš„æ–‡ç«  &lt;a href=&quot;https://medium.com/@kenzai/rxswift-and-the-awesome-things-you-can-do-with-reactive-programming-part-i-3921137d251&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RxSwift and the awesome things you can do with Reactive Programmingâ€Šâ€”â€ŠPart I&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å¬è§å“åº”å¼ç¼–ç¨‹ï¼Œæˆ‘çš„è¡¨æƒ…æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;center&gt;&lt;br&gt;&lt;img src=&quot;https://cdn-images-1.medium.com/max/1600/1*28RdzpfQBHklPcgLGsg0jw.png&quot;&gt;&lt;br&gt;&lt;/center&gt;

&lt;p&gt;æ¥ä¸‹æ¥çš„å‡ æ¬¡å‡ æ¬¡æ¥è§¦, ä¹Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚æ•´æ•´ä¸¤ä¸ªæ˜ŸæœŸä¹‹å,å³ä½¿æˆ‘åœ¨é¡¹ç›®ä¸­å†™äº†ä¸€äº›å“åº”å¼ä»£ç ã€‚æˆ‘ä¾ç„¶æ˜¯è¿™ç§æ„Ÿè§‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘æ‰çŸ¥é“æœ‰å¾ˆå¤šçš„äººåœ¨ç¬¬ä¸€æ¬¡é‡è§å“åº”å¼ç¼–ç¨‹çš„æ—¶å€™è·Ÿæˆ‘æœ‰ä¸€æ ·çš„æ„Ÿè§‰ã€‚æˆ‘ä¹ŸçŸ¥é“å¾ˆå¤šäººçœ‹è¿‡å“åº”å¼çš„ä»£ç ä¹‹åå†ä¹Ÿä¸æƒ³å†è§åˆ°å®ƒäº†ï¼Œå› ä¸ºå¥¹çš„å­¦ä¹ æ›²çº¿å¤ªè¿‡é™¡å³­äº†ã€‚ä½†æ˜¯æˆ‘èƒ½å‘Šè¯‰ä½ ä¸€ä¸ªäº‹å®, æˆ‘è¿˜æ²¡å¬è¯´è¿‡ä¸€ä¸ªäººï¼Œ åœ¨æœ€ç»ˆç†è§£äº†ä»–æ˜¯æ€ä¹ˆå›äº‹ä¹‹å,åæ‚”å­¦ä¹ å“åº”å¼ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çŸ¥é“ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äºå“åº”å¼ç¼–ç¨‹ç†è®ºå’Œæ€æƒ³è¿˜æœ‰ RxSwift çš„çš„èµ„æº, ä¹Ÿæœ‰å¾ˆå¤šæ•™ä½ ç”¨Rxæ¥åšå„ç§äº‹æƒ…çš„æ•™ç¨‹(æ–‡æœ«æˆ‘ä¼šç»™å‡ºä¸€äº›é“¾æ¥)ã€‚è¿™ç¯‡æ–‡ç« ä¸æ˜¯æ˜¯ä¸€ä¸ªæ•™ç¨‹, ä¹Ÿä¸ä¼šè§£é‡Š &lt;code&gt;stream&lt;/code&gt; å’Œ &lt;code&gt;observables&lt;/code&gt; æ˜¯æ€ä¹ˆå›äº‹ã€‚ æˆ‘è¦åšçš„æ˜¯æä¾›ä¸€ä¸ªç›´æ¥ã€æ˜ç¡®å¹¶ä¸”å°½é‡å°‘çš„ç†è®ºæ€»ç»“æ¥å‘Šè¯‰ä½  RxSwift èƒ½åšä»€ä¹ˆ, å¹¶ä¸”å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆä½ ä¼šå–œæ¬¢ä¸Šå®ƒã€‚ç”±äº Rx çš„ä¸–ç•Œæ·±ä¼¼æµ·, æ‰€ä»¥æˆ‘æ‰“ç®—å†™ä¸‰ç¯‡æ–‡ç« æ¥è®¨è®ºè¿™ä»¶äº‹æƒ…, è¿™æ˜¯ç¬¬ä¸€ç¯‡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Part1-Data-Binding-control-events-and-gesture-recognizers&quot;&gt;&lt;a href=&quot;#Part1-Data-Binding-control-events-and-gesture-recognizers&quot; class=&quot;headerlink&quot; title=&quot;Part1: Data Binding, control events and gesture recognizers&quot;&gt;&lt;/a&gt;Part1: Data Binding, control events and gesture recognizers&lt;/h2&gt;&lt;h3 id=&quot;Data-Binding&quot;&gt;&lt;a href=&quot;#Data-Binding&quot; class=&quot;headerlink&quot; title=&quot;Data Binding&quot;&gt;&lt;/a&gt;Data Binding&lt;/h3&gt;&lt;p&gt;æ•°æ®ç»‘å®šçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªé«˜ç«¯çš„è¯è¯­, ä½†æ˜¯å®ƒå´æ˜¯ä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ã€‚å‡å¦‚ä½ æœ‰ä¸€ä¸ª App éœ€è¦ç”¨æˆ·åœ¨ &lt;code&gt;UITextField&lt;/code&gt; ä¸­è¾“å…¥å®ƒä»¬çš„åå­—ã€‚å½“ä»–ä»¬åœ¨æ‰“å­—çš„æ—¶å€™, ç”¨ â€œä½ å¥½ + ç”¨æˆ·è¾“å…¥çš„æ–‡å­—â€ å±•ç¤ºåœ¨ç•Œé¢ä¸Šã€‚è¿™æ ·ä¸€ä¸ªå¾ˆåŸºæœ¬çš„åœºæ™¯ã€‚å¦‚æœåœ¨ä¸æ˜¯å“åº”å¼çš„ç¨‹åºä¸­, æˆ‘ä»¬éœ€è¦éµå®ˆ &lt;code&gt;UITextFieldDelegate&lt;/code&gt; è¿™ä¸ªåè®®, ç„¶ååœ¨ &lt;code&gt;ViewController&lt;/code&gt; ä¸­å®ç° &lt;code&gt;textFieldDidEndEditing&lt;/code&gt; è¿™ä¸ªæ–¹æ³•, æ¥ç›‘å¬ç”¨æˆ·ç”¨æˆ·çš„è¡Œä¸ºï¼Œç„¶åç»™ &lt;code&gt;Label&lt;/code&gt; èµ‹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯å‡å¦‚æœ‰å¾ˆå¤šçš„ &lt;code&gt;UITextField&lt;/code&gt; æˆ‘ä»¬è¿˜è¦åœ¨ä»£ç†æ–¹æ³•ä¸­åˆ¤æ–­, åˆæˆ–è€…, æˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨è¾“å…¥çš„è¿‡ç¨‹ä¸­æ—¶æ—¶çš„åˆ·æ–° &lt;code&gt;Label&lt;/code&gt;ã€‚è¿™ç§åœºæ™¯, æˆ‘ä»¬çš„ä»£ç ï¼Œçœ‹èµ·æ¥å°±ä¼šå¾ˆç³Ÿç³•ã€‚è‡³å°‘ä¸ä¼šå¾ˆä¼˜é›…å§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å“åº”å¼ä¸­, è¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨æ•°æ®ç»‘å®šæ¥å®ç°ã€‚è¯´ç™½äº†,å°±æ˜¯å°†ç”¨æˆ·åœ¨ &lt;code&gt;UITextField&lt;/code&gt; ä¸­è¾“å…¥çš„æ–‡å­—ç»‘å®šåˆ° &lt;code&gt;UILabel&lt;/code&gt; ä¸Šã€‚åœ¨ &lt;code&gt;RxSwift&lt;/code&gt; çš„ä¸–ç•Œé‡Œ,  æ²¡æœ‰ä»€ä¹ˆæ¯”å¤„ç†æ•°æ®ç»‘å®šæ›´ç®€å•çš„äº†ã€‚åˆšæ‰æè¿°çš„éœ€æ±‚, æˆ‘ä»¬åªéœ€è¦é€šè¿‡ä»¥ä¸‹ä»£ç å°±å¯ä»¥å®ç°äº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/categories/Reactive/"/>
    
    
      <category term="iOS" scheme="https://CepheusTeam.github.io/tags/iOS/"/>
    
      <category term="Reactive" scheme="https://CepheusTeam.github.io/tags/Reactive/"/>
    
      <category term="Swift" scheme="https://CepheusTeam.github.io/tags/Swift/"/>
    
      <category term="ç¿»è¯‘" scheme="https://CepheusTeam.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
</feed>
